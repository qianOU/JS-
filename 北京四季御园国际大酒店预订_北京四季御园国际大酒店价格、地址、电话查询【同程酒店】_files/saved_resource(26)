!function(g,f,j,i){function h(k,b){var a={className:"",title:"",html:"",open:!1,showCloseBtn:!0,width:600,zIndex:1050,showBg:!0,bgClose:!0,btns:null,initFn:null,beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null};g.extend(this,a,b),this.elem=k,this.hasSetHtml=!1,this.isIe=f.navigator.userAgent.toLocaleLowerCase().indexOf("msie")>-1,this.build()}g[i]=g.fn[i]=function(b){return new h(this,b)},h.prototype={build:function(){this.wrap=g('<div class="dialog2-wrap"><div class="dialog2-content"></div></div>');var a=g("body").append(this.wrap);this.showBg===!0&&(this.bg=g('<div class="dialog2-bg"></div>'),a.append(this.bg)),this.content=g(".dialog2-content",this.wrap),this.className&&"string"==typeof this.className&&(this.wrap.addClass(this.className),this.bg&&this.bg.addClass(this.className+"-bg")),"number"==typeof this.width&&600!=this.width&&this.content.css("width",this.width),"number"==typeof this.zIndex&&1050!=this.zIndex&&(this.wrap.css("z-index",this.zIndex),this.bg&&this.bg.css("z-index",this.zIndex-1)),this.title?(this.content.append('<div class="dialog2-header"><div class="dialog2-title"></div></div>'),g(".dialog2-title",this.content).html(this.title),this.showCloseBtn===!0&&(this.closeBtn=g('<a href="javascript:;" class="dialog2-close"></a>'),g(".dialog2-header",this.content).prepend(this.closeBtn))):this.showCloseBtn===!0&&(this.content.append('<div class="dialog2-head"><a href="javascript:;" class="dialog2-close"></a></div>'),this.closeBtn=g(".dialog2-close",this.content)),this.content.append('<div class="dialog2-body"></div>'),this.body=g(".dialog2-body",this.content),this.open===!0&&this.show(),this.eventInt(),"function"==typeof this.initFn&&this.initFn()},setHtml:function(a,k){var e=typeof a;if("string"===e){this.body.html(a),!this.hasSetHtml&&(this.hasSetHtml=!0)}else{if("object"!==e){throw new Error("弹窗内容设置错误")}if(!(1===a.nodeType&&"string"==typeof a.nodeName||a instanceof g)){throw new Error("弹窗内容设置错误")}this.placeholder=g('<div style="width: 0; height: 0; display: none; visibility: hidden;"></div>'),this.tempHtml=g(a).replaceWith(this.placeholder),this.body.html(a),!this.hasSetHtml&&(this.hasSetHtml=!0)}0==this.btns||g(".dialog2-footer",this.content)[0]||this.buildFooter(),k&&this.setPos()},setPos:function(){var m=this.content,l=m.outerWidth(),k=m.outerHeight(),b=this.wrap.css("display"),a=g(f).outerHeight();"none"===b&&(this.wrap.css({visibility:"hidden",display:"block"}),k=m.outerHeight(),this.wrap.css({visibility:"",display:"none"})),this.content.css({"margin-left":-l/2}),a>k?this.content.css({"margin-top":-k/2,"margin-bottom":0,top:"50%"}):this.content.css({"margin-top":30,"margin-bottom":30,top:0})},buildFooter:function(){if(this.btns!==!1){var r=this,q=j.createDocumentFragment(),p=j.createElement("a");if(this.content.append('<div class="dialog2-footer"></div>'),this.footer=g(".dialog2-footer",this.content),this.btns&&this.btns instanceof Object&&!(this.btns instanceof Array)){for(var o in this.btns){var n=p.cloneNode(),m=this.btns[o],l=o.split("#"),c=l[0],a=l[1];n.href="javascript:;",n.innerHTML=c,a&&(n.className=a),"function"==typeof m&&!function(e,b){g(e).click(function(){var d=b.call(r);d!==!1&&r.hide()})}(n,m),q.appendChild(n)}}else{n=n=p.cloneNode(),n.href="javascript:;",n.innerHTML="确定",g(n).click(function(){r.hide()}),q.appendChild(n)}this.footer.html(q)}},show:function(){if(this.setHtml(this.html,!this.hasSetHtml),"function"==typeof this.beforeOpen&&this.beforeOpen(),g("body").addClass("dialog2-open"),this.isIe){this.wrap.addClass("dialog2-show").show(),this.bg&&this.bg.addClass("dialog2-show").show()}else{var a=this;this.wrap.show(),this.bg&&this.bg.show(),setTimeout(function(){a.wrap.addClass("dialog2-show"),a.bg&&a.bg.addClass("dialog2-show")},1)}"function"==typeof this.afterOpen&&this.afterOpen()},hide:function(){var a=this;"function"==typeof this.beforeClose&&this.beforeClose(),this.wrap.removeClass("dialog2-show"),this.bg&&this.bg.removeClass("dialog2-show"),this.isIe?(a.wrap.hide(),a.bg&&a.bg.hide(),g("body").removeClass("dialog2-open"),a.placeholder&&a.placeholder.replaceWith(a.tempHtml)):setTimeout(function(){a.wrap.hide(),a.bg&&a.bg.hide(),g("body").removeClass("dialog2-open"),a.placeholder&&a.placeholder.replaceWith(a.tempHtml)},200),"function"==typeof this.afterClose&&this.afterClose()},eventInt:function(){var b=this;this.elem.on&&this.elem.on("click",function(){b.show()}),this.closeBtn&&this.closeBtn.on("click",function(){b.hide()}),this.bgClose&&this.wrap.on("click",function(a){var d=a.target;d===b.wrap[0]&&b.hide()})}},g.alert=function(a,k){k=k instanceof Object?k:{};var e={title:"提示信息",open:!0,html:a,className:"dialog2-alert"};g.extend(e,k),g.dialog2(e)},g.confirm=function(a,n){n=n instanceof Object?n:{};var m="function"==typeof n.okFn?n.okFn:function(){},l="function"==typeof n.cancelFn?n.cancelFn:function(){},k={title:"提示信息",open:!0,html:a,className:"dialog2-confirm",btns:{"确定":m,"取消#default":l}};g.extend(k,n),g.dialog2(k)}}(jQuery,window,document,"dialog2");
