!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=73)}([function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},function(e,t,a){"use strict";t.__esModule=!0;var n={home_tab:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","搜索tab",e)},destination:function(e,t){"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","城市选择",t):"list"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","搜索框","目的地",t)},time_choose:function(e,t,a){"home"===e?("start"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","入住时间选择","入住时间:"+a.start+";离店时间:"+a.end+";几晚:"+a.nightNum),"end"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","离店时间选择","离店时间:"+a.end+";几晚:"+a.nightNum)):"list"===e?("start"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","搜索框","入住时间","入住时间:"+a.start+";离店时间:"+a.end+";几晚:"+a.nightNum),"end"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","搜索框","离店时间","离店时间:"+a.end+";几晚:"+a.nightNum)):"last"===e&&("start"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","导航","入住时间","入住时间:"+a.start+";离店时间:"+a.end+";几晚:"+a.nightNum),"end"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","导航","离店时间","离店时间:"+a.end+";几晚:"+a.nightNum))},keyWord:function(e,t){"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","关键选择","关键字类别:"+t.type+";关键字名称:"+t.name):"list"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","搜索框","关键字","关键字类别:"+t.type+";关键字名称:"+t.name)},searchBtn:function(e,t){"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","搜索按钮处理","tab名称:"+t.tab+";城市名称:"+t.cityname+";入住时间:"+t.start+";离店时间:"+t.end+";几晚:"+t.night+";关键字名称:"+t.keyword):"list"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","搜索框","搜索","城市名称:"+t.cityname+";入住时间:"+t.start+";离店时间:"+t.end+";几晚:"+t.night+";关键字名称:"+t.keyword)},home_map_search:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","地图搜索","/")},hot_search:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页搜索框","大家热搜","城市名称："+e)},banner_click:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","首页banner","banner","活动链接:"+e)},banner_history:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","浏览记录","浏览记录","酒店名称:"+e.hotelname+";酒店id:"+e.hotelid)},hot_hotel_city:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","热门酒店","城市选择","城市名称:"+e.cityname+";城市id:"+e.cityid)},hot_hotel_detail:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","热门酒店","酒店详情","城市名称:"+e.cityname+";酒店名称:"+e.hotelname+";酒店id:"+e.hotelid+";最低价:"+e.minprice)},more_hotel:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","热门酒店","更多酒店","城市名称:"+e.cityname+";城市id:"+e.cityid)},vocation_theme:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","度假主题","主题","主题名称:"+e)},vocation_city:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","度假主题","度假城市","主题名称:"+e.theme+";城市名称:"+e.cityname)},cooperation_brand:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCindex","合作品牌","品牌","spid:"+e.spid)},location_loc:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","位置","位置类型","位置类型:"+e)},location_brand:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","位置","位置名称","位置类型:"+e.loc+";位置名称:"+e.locname)},price:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","价格","价格区间","价格区间:"+e)},star_level_OR_service:function(e){"star"===e.stamp&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","星级","星级类别","星级类别:"+e.type+";是否选中:"+e.isChoose),"service"===e.stamp&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","服务","服务设施名称","服务名称:"+e.type+";是否选中:"+e.isChoose)},checkboxs_cancel:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist",e.type,e.type+"类型",e.type+"类型:"+e.content)},clean:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","条件","清除条件","操作名称:"+e.operationName+";清除内容:"+e.operationContent)},chain_checkbox:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","品牌","品牌类型、品牌名称","品牌名称:"+e.brandname+";品牌类型:"+e.hoteltype+";是否选中:"+e.isChoose)},more_brand_choose:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","品牌","更多品牌","经济:"+e.typeA+";舒适:"+e.typeB+";高档:"+e.typeC+";豪华:"+e.typeD)},more_brand_clean:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","品牌","更多品牌",e)},sort_term:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","排序条件","同程推荐、好评、价格",e)},check_term:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","筛查条件","立即确认、预付优惠、免担保","选择类型:"+e.termtype+";是否勾选:"+e.isChoose)},list_imgOrTitle_click:function(e){e.hotelCBD!==undefined&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店列表",e.type,"酒店名称:"+e.hotelname+";酒店id:"+e.hotelid+";商圈名称:"+e.hotelCBD+";最低价:"+e.minprice),e.hotelCBD===undefined&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店列表",e.type,"酒店名称:"+e.hotelname+";酒店id:"+e.hotelid+";最低价:"+e.minprice)},list_comment:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店列表","点评","好评率:"+e.praiseRate+";点评数:"+e.commonNum+";酒店名称:"+e.hotelname+";酒店id:"+e.hotelid+";最低价:"+e.minprice)},list_map_btn:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店列表","地图搜索","/")},list_collection:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店列表","收藏","是否收藏:"+e.isCollection+";酒店名称:"+e.hotelname+";酒店id:"+e.hotelid)},list_map_trafficType:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店地图","交通类型","交通类型:"+(""!==e?e:"展开/折叠"))},list_map_trafficDetail:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","酒店地图","交通信息","交通类型:"+e.type+";信息名称:"+e.name)},list_map_bigBtn:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","列表地图","查看大地图","目的地:"+e.cityname+";城市id:"+e.cityid)},list_map_follow_roll:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","列表地图","随屏滚动","是否勾选:"+e)},list_map_hotel:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotellist","列表地图","酒店","目的地:"+e.cityname+";城市id:"+e.cityid+";酒店名称:"+e.hotelname+";酒店id:"+e.hotelid)},order_detail_check:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","酒店","酒店查看","/")},order_detail_cancel:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","按钮","取消订单","/")},order_detail_invoice:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","按钮","补开发票","/")},order_detail_print:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","按钮","打印订单","/")},order_detail_payment:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","按钮","立即支付","/")},order_detail_comment:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","按钮","发表点评","/")},order_detail_more_scenery:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","推荐","更多","/")},order_detail_scenery:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderdetails","推荐","景区","/")},book_top_logoin:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","顶部","登录","/")},book_top_register:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","顶部","注册","/")},book_top_userName:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","顶部","用户名","/")},book_help:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","左侧","帮助中心","/")},book_customer_service:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","左侧","在线客服","/")},book_update_date:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","修改日期","/")},book_roomNum_update:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","房间数量","间数:"+e)},book_cancel_insurance:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","取消险","是否勾选:"+e)},book_accident_insurance:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","意外险","是否勾选:"+e)},book_cancel_insurance_info:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","条款","/")},book_invoice_needed:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","发票","是否勾选:"+e)},book_submit_bill:function(e){0===e.isAccident&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","订单提交","是否取消险:"+e.isInsuance+";是否发票:"+e.isInvoice+";是否意外险:"+e.isAccident),1===e.isAccident&&window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChotelorderfill","信息","订单提交","是否取消险:"+e.isInsuance+";是否发票:"+e.isInvoice+";是否意外险:"+e.isAccident+";意外险类型:"+e.accInsurancetype+";意外险份数:"+e.accInsurancenum)},last_head_bread_crumb:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","导航","页面名称:"+e.pageName)},last_head_business_circle:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","商圈","商圈名称:"+e.businessCircle+";酒店id:"+e.hotelId)},last_head_map:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","地图")},last_head_comment:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","评分","酒店评分"+e.score),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","点评数","酒店点评数"+e.count),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","满意度","酒店好评率"+e.percent)},last_comment_view:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","点评","点评内容查看")},last_head_favorite:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","头部","收藏","收藏功能","酒店名称:"+e.hotelName+";酒店id"+e.hotelId+";城市id"+e.cityId)},last_nav_menu:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","导航",e)},last_nav_modify_date:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","导航","修改日期","入住时间:"+e.comeDate+";离店时间:"+e.leaveDate+";共"+e.night+"晚")},last_room_module_toggle:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型列表","房型","房型id:"+e.roomId)},last_policy_module_toggle:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型列表","查看","房型id:"+e.roomId)},last_policy_book:function(e){var t="";"35669"===e.supplierId&&(t="E政策"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型列表",t+"查看","酒店名称:"+e.hotelName+";酒店id:"+e.hotelId+";房型id:"+e.roomId+";城市id:"+e.cityId+";政策id:"+e.policyId)},last_hotel_scenary:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作","合作tab",e.name)},last_hotel_scenary_id:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作",e.name,e.id)},last_big_map:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","地图1","查看")},last_nearby_tab:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","推荐",e)},last_hotel_feature:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","信息","设施")},last_hotel_short:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","信息","简介")},last_right_client:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","右侧导航","客服")},last_right_top:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","右侧导航","回到顶部")},last_traffic_type:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","类型",e.name)},last_traffic_line:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","地点",e.name)},last_traffic_scale:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","大小")},last_map_location:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","信息")},last_comment_module:function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","标签","语义标签")},last_comment_tab:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","点评tab",e.name)},last_comment_page:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","点击翻页")},hotelPChotellist:function(e){}};t.buryChannelPoint=n},function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},function(e,t,a){var n=a(18),i=a(45),o=a(27),s=Object.defineProperty;t.f=a(4)?Object.defineProperty:function(e,t,a){if(n(e),t=o(t,!0),n(a),i)try{return s(e,t,a)}catch(r){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){e.exports=!a(19)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},function(e,t,a){"use strict";t.__esModule=!0,t.getantitoken=function(){var e=$.cookie("wangba");e&&void 0!==e||(e=(new Date).getTime().toString(),$.cookie("wangba",e,{path:"/",domain:"ly.com"}));return(0,o["default"])(e)};var n,i=a(37),o=(n=i)&&n.__esModule?n:{"default":n}},function(e,t,a){var n=a(0),i=a(38),o=a(39);e.exports=function(e){if(o.unindexedChars&&i(e)){for(var t=-1,a=e.length,s=Object(e);++t<a;)s[t]=e.charAt(t);return s}return n(e)?e:Object(e)}},function(e,t){var a=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=a)},function(e,t,a){var n=a(3),i=a(20);e.exports=a(4)?function(e,t,a){return n.f(e,t,i(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){var n=a(89),i=a(25);e.exports=function(e){return n(i(e))}},function(e,t,a){var n=a(31)("wks"),i=a(21),o=a(2).Symbol,s="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=s&&o[e]||(s?o:i)("Symbol."+e))}).store=n},function(e,t){e.exports=function(e){return!!e&&"object"==typeof e}},function(e,t){var a=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}},function(e,t,a){var n=a(22),i=a(13),o=a(12),s=Object.prototype.toString,r=n(Array,"isArray")||function(e){return o(e)&&i(e.length)&&"[object Array]"==s.call(e)};e.exports=r},function(e,t,a){e.exports={"default":a(75),__esModule:!0}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports=!0},function(e,t,a){var n=a(16);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var a=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++a+n).toString(36))}},function(e,t,a){var n=a(132);e.exports=function(e,t){var a=null==e?undefined:e[t];return n(a)?a:undefined}},function(e,t,a){"use strict";t.__esModule=!0,t.errorTip=function(e,t){$.dialog({content:'<div class="pops pop_tip">'+e+"</div>",fixed:!1,top:13,left:-9,className:"rel-pop",relative:"#"+t,isModal:!0,zIndex:[19,10],bgClose:!0,click:function(){this.close()}}).show(),$(".dialog-ui.rel-pop").css("z-index","1001"),$(".dialog-ui.rel-pop").addClass("over_twenty"),$(".dialog-ui.rel-pop").prev(".page_mask").remove(),$("body").on("click",function(e){var t=$(".dialog-ui.rel-pop.over_twenty").length>0,a=$(e.target).hasClass("update-btn");t&&!a&&$(".dialog-ui.rel-pop.over_twenty").remove()})}},function(e,t){var a=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:a)(e)}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t,a){var n=a(2),i=a(8),o=a(85),s=a(9),r=a(5),l=function(e,t,a){var c,d,p,u=e&l.F,m=e&l.G,f=e&l.S,h=e&l.P,v=e&l.B,g=e&l.W,y=m?i:i[t]||(i[t]={}),_=y.prototype,b=m?n:f?n[t]:(n[t]||{}).prototype;for(c in m&&(a=t),a)(d=!u&&b&&b[c]!==undefined)&&r(y,c)||(p=d?b[c]:a[c],y[c]=m&&"function"!=typeof b[c]?a[c]:v&&d?o(p,n):g&&b[c]==p?function(e){var t=function(t,a,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):h&&"function"==typeof p?o(Function.call,p):p,h&&((y.virtual||(y.virtual={}))[c]=p,e&l.R&&_&&!_[c]&&s(_,c,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,a){var n=a(16);e.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if("function"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&"function"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,a){var n=a(49),i=a(32);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,a){var n=a(31)("keys"),i=a(21);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,a){var n=a(8),i=a(2),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=t!==undefined?t:{})})("versions",[]).push({version:n.version,mode:a(17)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,a){var n=a(3).f,i=a(5),o=a(11)("toStringTag");e.exports=function(e,t,a){e&&!i(e=a?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,a){t.f=a(11)},function(e,t,a){var n=a(2),i=a(8),o=a(17),s=a(34),r=a(3).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||r(t,e,{value:s.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,a){var n,i,o,s,r;n=a(117),i=a(56).utf8,o=a(118),s=a(56).bin,(r=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=n.bytesToWords(e),l=8*e.length,c=1732584193,d=-271733879,p=-1732584194,u=271733878,m=0;m<a.length;m++)a[m]=16711935&(a[m]<<8|a[m]>>>24)|4278255360&(a[m]<<24|a[m]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;var f=r._ff,h=r._gg,v=r._hh,g=r._ii;for(m=0;m<a.length;m+=16){var y=c,_=d,b=p,$=u;d=g(d=g(d=g(d=g(d=v(d=v(d=v(d=v(d=h(d=h(d=h(d=h(d=f(d=f(d=f(d=f(d,p=f(p,u=f(u,c=f(c,d,p,u,a[m+0],7,-680876936),d,p,a[m+1],12,-389564586),c,d,a[m+2],17,606105819),u,c,a[m+3],22,-1044525330),p=f(p,u=f(u,c=f(c,d,p,u,a[m+4],7,-176418897),d,p,a[m+5],12,1200080426),c,d,a[m+6],17,-1473231341),u,c,a[m+7],22,-45705983),p=f(p,u=f(u,c=f(c,d,p,u,a[m+8],7,1770035416),d,p,a[m+9],12,-1958414417),c,d,a[m+10],17,-42063),u,c,a[m+11],22,-1990404162),p=f(p,u=f(u,c=f(c,d,p,u,a[m+12],7,1804603682),d,p,a[m+13],12,-40341101),c,d,a[m+14],17,-1502002290),u,c,a[m+15],22,1236535329),p=h(p,u=h(u,c=h(c,d,p,u,a[m+1],5,-165796510),d,p,a[m+6],9,-1069501632),c,d,a[m+11],14,643717713),u,c,a[m+0],20,-373897302),p=h(p,u=h(u,c=h(c,d,p,u,a[m+5],5,-701558691),d,p,a[m+10],9,38016083),c,d,a[m+15],14,-660478335),u,c,a[m+4],20,-405537848),p=h(p,u=h(u,c=h(c,d,p,u,a[m+9],5,568446438),d,p,a[m+14],9,-1019803690),c,d,a[m+3],14,-187363961),u,c,a[m+8],20,1163531501),p=h(p,u=h(u,c=h(c,d,p,u,a[m+13],5,-1444681467),d,p,a[m+2],9,-51403784),c,d,a[m+7],14,1735328473),u,c,a[m+12],20,-1926607734),p=v(p,u=v(u,c=v(c,d,p,u,a[m+5],4,-378558),d,p,a[m+8],11,-2022574463),c,d,a[m+11],16,1839030562),u,c,a[m+14],23,-35309556),p=v(p,u=v(u,c=v(c,d,p,u,a[m+1],4,-1530992060),d,p,a[m+4],11,1272893353),c,d,a[m+7],16,-155497632),u,c,a[m+10],23,-1094730640),p=v(p,u=v(u,c=v(c,d,p,u,a[m+13],4,681279174),d,p,a[m+0],11,-358537222),c,d,a[m+3],16,-722521979),u,c,a[m+6],23,76029189),p=v(p,u=v(u,c=v(c,d,p,u,a[m+9],4,-640364487),d,p,a[m+12],11,-421815835),c,d,a[m+15],16,530742520),u,c,a[m+2],23,-995338651),p=g(p,u=g(u,c=g(c,d,p,u,a[m+0],6,-198630844),d,p,a[m+7],10,1126891415),c,d,a[m+14],15,-1416354905),u,c,a[m+5],21,-57434055),p=g(p,u=g(u,c=g(c,d,p,u,a[m+12],6,1700485571),d,p,a[m+3],10,-1894986606),c,d,a[m+10],15,-1051523),u,c,a[m+1],21,-2054922799),p=g(p,u=g(u,c=g(c,d,p,u,a[m+8],6,1873313359),d,p,a[m+15],10,-30611744),c,d,a[m+6],15,-1560198380),u,c,a[m+13],21,1309151649),p=g(p,u=g(u,c=g(c,d,p,u,a[m+4],6,-145523070),d,p,a[m+11],10,-1120210379),c,d,a[m+2],15,718787259),u,c,a[m+9],21,-343485551),c=c+y>>>0,d=d+_>>>0,p=p+b>>>0,u=u+$>>>0}return n.endian([c,d,p,u])})._ff=function(e,t,a,n,i,o,s){var r=e+(t&a|~t&n)+(i>>>0)+s;return(r<<o|r>>>32-o)+t},r._gg=function(e,t,a,n,i,o,s){var r=e+(t&n|a&~n)+(i>>>0)+s;return(r<<o|r>>>32-o)+t},r._hh=function(e,t,a,n,i,o,s){var r=e+(t^a^n)+(i>>>0)+s;return(r<<o|r>>>32-o)+t},r._ii=function(e,t,a,n,i,o,s){var r=e+(a^(t|~n))+(i>>>0)+s;return(r<<o|r>>>32-o)+t},r._blocksize=16,r._digestsize=16,e.exports=function(e,t){if(e===undefined||null===e)throw new Error("Illegal argument "+e);var a=n.wordsToBytes(r(e,t));return t&&t.asBytes?a:t&&t.asString?s.bytesToString(a):n.bytesToHex(a)}},function(e,t,a){var n=a(12),i="[object String]",o=Object.prototype.toString;e.exports=function(e){return"string"==typeof e||n(e)&&o.call(e)==i}},function(e,t){var a=Array.prototype,n=Error.prototype,i=Object.prototype.propertyIsEnumerable,o=a.splice,s={};!function(e){var t=function(){this.x=1},a={0:1,length:1},r=[];for(var l in t.prototype={valueOf:1,y:1},new t)r.push(l);s.enumErrorProps=i.call(n,"message")||i.call(n,"name"),s.enumPrototypes=i.call(t,"prototype"),s.nonEnumShadows=!/valueOf/.test(r),s.ownLast="x"!=r[0],s.spliceObjects=(o.call(a,0,1),!a[0]),s.unindexedChars="x"[0]+Object("x")[0]!="xx"}(),e.exports=s},function(e,t,a){var n=a(22),i=a(41),o=a(0),s=a(133),r=a(39),l=n(Object,"keys"),c=l?function(e){var t=null==e?undefined:e.constructor;return"function"==typeof t&&t.prototype===e||("function"==typeof e?r.enumPrototypes:i(e))?s(e):o(e)?l(e):[]}:s;e.exports=c},function(e,t,a){var n=a(59),i=a(13);e.exports=function(e){return null!=e&&i(n(e))}},function(e,t){var a=/^\d+$/,n=9007199254740991;e.exports=function(e,t){return e="number"==typeof e||a.test(e)?+e:-1,t=null==t?n:t,e>-1&&e%1==0&&e<t}},function(e,t,a){"use strict";t.__esModule=!0;var n=s(a(81)),i=s(a(100)),o="function"==typeof i["default"]&&"symbol"==typeof n["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof i["default"]&&e.constructor===i["default"]&&e!==i["default"].prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{"default":e}}t["default"]="function"==typeof i["default"]&&"symbol"===o(n["default"])?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i["default"]&&e.constructor===i["default"]&&e!==i["default"].prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,a){"use strict";var n=a(17),i=a(26),o=a(47),s=a(9),r=a(28),l=a(87),c=a(33),d=a(94),p=a(11)("iterator"),u=!([].keys&&"next"in[].keys()),m=function(){return this};e.exports=function(e,t,a,f,h,v,g){l(a,t,f);var y,_,b,$=function(e){if(!u&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new a(this,e)}}return function(){return new a(this,e)}},w=t+" Iterator",C="values"==h,T=!1,k=e.prototype,D=k[p]||k["@@iterator"]||h&&k[h],S=D||$(h),I=h?C?$("entries"):S:undefined,P="Array"==t&&k.entries||D;if(P&&(b=d(P.call(new e)))!==Object.prototype&&b.next&&(c(b,w,!0),n||"function"==typeof b[p]||s(b,p,m)),C&&D&&"values"!==D.name&&(T=!0,S=function(){return D.call(this)}),n&&!g||!u&&!T&&k[p]||s(k,p,S),r[t]=S,r[w]=m,h)if(y={values:C?S:$("values"),keys:v?S:$("keys"),entries:I},g)for(_ in y)_ in k||o(k,_,y[_]);else i(i.P+i.F*(u||T),t,y);return y}},function(e,t,a){e.exports=!a(4)&&!a(19)(function(){return 7!=Object.defineProperty(a(46)("div"),"a",{get:function(){return 7}}).a})},function(e,t,a){var n=a(16),i=a(2).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,a){e.exports=a(9)},function(e,t,a){var n=a(18),i=a(88),o=a(32),s=a(30)("IE_PROTO"),r=function(){},l=function(){var e,t=a(46)("iframe"),n=o.length;for(t.style.display="none",a(93).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function(e,t){var a;return null!==e?(r.prototype=n(e),a=new r,r.prototype=null,a[s]=e):a=l(),t===undefined?a:i(a,t)}},function(e,t,a){var n=a(5),i=a(10),o=a(90)(!1),s=a(30)("IE_PROTO");e.exports=function(e,t){var a,r=i(e),l=0,c=[];for(a in r)a!=s&&n(r,a)&&c.push(a);for(;t.length>l;)n(r,a=t[l++])&&(~o(c,a)||c.push(a));return c}},function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){var n=a(49),i=a(32).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(111),o=(n=i)&&n.__esModule?n:{"default":n};t["default"]=function(e,t,a){return t in e?(0,o["default"])(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){"use strict";t.__esModule=!0,t.buryPoint=undefined;var n,i=a(53);var o=(0,((n=i)&&n.__esModule?n:{"default":n})["default"])({sbox_k:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/k",e)},sbox_destArea_ac:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/ac",e)},sbox_destArea_ac_click:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/ac/click",e)},sbox_destArea_k_hot:function(e,t){"list"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/hot"," |*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/list|*|plat:2|*|"):"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/hot"," |*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/homepage|*|plat:2|*|"):"bigMap"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/hot"," |*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/list/map|*|plat:2|*|")},sbox_destArea_k_history:function(e,t){"list"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/history","|*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/list|*|plat:2|*|"):"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/history","|*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/homepage|*|plat:2|*|"):"bigMap"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/destArea/k/history","|*|k:"+t.name+"|*|pos:"+t.pos+"|*|cityId:"+t.id+"|*|pgPath:hotel/list/map|*|plat:2|*|")},sbox_ac:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/ac",e)},sbox_ac_click:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/ac/click",e)},sbox_k_hot:function(e,t){"list"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/k/hot","|*|k:"+t.k+"|*|pos:"+t.pos+"|*|locCId:|*|cityId:"+t.cid+"|*|pgPath:hotel/list|*|plat:2|*|"):"home"===e?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/k/hot","|*|k:"+t.k+"|*|pos:"+t.pos+"|*|locCId:|*|cityId:"+t.cid+"|*|pgPath:hotel/homepage|*|plat:2|*|"):"bigMap"===e&&window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sbox/k/hot","|*|k:"+t.k+"|*|pos:"+t.pos+"|*|locCId:|*|cityId:"+t.cid+"|*|pgPath:hotel/list/map|*|plat:2|*|")},show:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/show",e)},page:function(e,t){"list"===t?window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/page","|*|k:"+e.k+"|*|locCId:|*|cityId:"+e.id+"|*|page:"+e.page+"|*|ab:|*|pgPath:/hotel/list|*|plat:2|*|"):"bigMap"===t&&window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/page","|*|k:"+e.k+"|*|locCId:|*|cityId:"+e.id+"|*|page:"+e.page+"|*|ab:|*|pgPath:/hotel/list/map|*|plat:2|*|")},sort:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/sort","|*|k:"+e.k+"|*|locCId:|*|cityId:"+e.id+"|*|sort:"+e.sort+"|*|ab:|*|pgPath:/hotel/list|*|plat:2|*|")},filter:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/filter","|*|k:"+e.k+"|*|locCId:|*|cityId:"+e.id+"|*|filter:"+e.filter+"|*|ab:|*|pgPath:/hotel/list|*|plat:2|*|")},detail_show:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/show","|*|resId:"+e+"|*|pgPath:/hotel/detail|*|plat:2|*|")},book:function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/book","|*|resId:"+e+"|*|pgPath:/hotel/detail|*|plat:2|*|")}},"filter",function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("search","13","/filter",e)});t.buryPoint=o},function(e,t,a){"use strict";t.__esModule=!0;var n={getQueryString:function(e){var t,a,n=window.location.href.split("?")[1]||"",i={};for(t=0,a=(n=n.replace(/#.*$/,"").split("&")).length;t<a;t++){var o=n[t].indexOf("=");if(o>0){var s=decodeURIComponent(n[t].substring(0,o)),r=n[t].substr(o+1)||"";try{r=decodeURIComponent(r)}catch(l){}i[s]=r}}return i[e]},checkUrlHasSpm:function(e,t,a,n){var i="",o=/\?/g.test(e)?"&":"?",s=this.getQueryString("refid")?this.getQueryString("refid"):0,r=this.getStrCount(location.href,"spm"),l=e,c="";if(e.indexOf("#")>-1&&(l=e.split("#")[0],e.split("#")[1]&&(c="#"+e.split("#")[1])),0===r)i=""+l+o+"spm0=10002.2001.1."+s+"."+t+"."+a+"."+n;else{for(var d=[],p=0;p<r;p++)d.push("spm"+p+"="+this.getQueryString("spm"+p));i=""+l+o+d.join("&")+"&spm"+r+"=10002.2001.1."+s+"."+t+"."+a+"."+n}return e.indexOf("HotelInfo-")>-1&&s&&(i=i+"&refid="+s),i+c},getStrCount:function(e,t){if(""!==e){for(var a=0;-1!==e.indexOf(t);)e=e.replace(t,""),a++;return a}}};t.tcSpm=n},function(e,t){var a={utf8:{stringToBytes:function(e){return a.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(a.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=a},function(e,t,a){"use strict";t.__esModule=!0,t.drawCirclePercent=function(e,t){t=parseInt(t/5*100);var a=null,n=0;null!==e&&($(".circle",e).length&&$(".circle",e).css("display","block"),a=setInterval(function(){var i,o,s;n>=t?clearInterval(a):(n++,function(e,t){var a=e[0],n=(t=t||0,null),i=null,o=null;null!==a&&(i=(n=a.querySelectorAll("div"))[0]||document.createElement("div"),o=n[1]||document.createElement("div"),a.setAttribute("percent",t),t<=50&&t>=0?(i.style.visibility="hidden",$(o).css("transform","rotate(-"+3.6*t+"deg)")):t>50&&(t=t>100?100:t,i.style.visibility="visible",$(i).css("transform","rotate(-"+3.6*(t-50)+"deg)"),$(o).css("transform","rotate(-180deg)")),!n[0]&&a.appendChild(i),!n[1]&&a.appendChild(o))}($(".circle",e),n),$(".percent span",e).html((i=n/100*5,o=1,s=Math.pow(10,o),Math.round(i*s)/s).toFixed(1)))},17))}},function(e,t,a){"use strict";t.__esModule=!0,t.DZSMap=undefined;var n,i=a(43),o=(n=i)&&n.__esModule?n:{"default":n};function s(e){this.wrapper=e,this.begainLoadMapEvent(),this.baiduMap=new BMap.Map(e,{enableMapClick:!1}),this.allwaysRemberArr=[],this.baiduMap.addEventListener("load",this.loadEvent)}s.prototype={constructor:s,render:function(e){this.createMapView(e);var t=this.baiduMap;if("adress"===this.centerType)t.centerAndZoom(this.center,this.zoomLevel);else{var a=new BMap.Point(e.center[0],e.center[1]);t.centerAndZoom(a,this.zoomLevel)}if(this.wheelScroll&&t.enableScrollWheelZoom(!0),this.control){var n=this.createControll();"object"===(void 0===n?"undefined":(0,o["default"])(n))&&(n instanceof Array?n.forEach(function(e,a){t.addControl(e)}):t.addControl(n))}},createMapView:function(e){if(e.center){if("string"==typeof e.center)this.centerType="adress",this.center=e.center;else{if(!(e.center instanceof Array))return void alert("请认真阅读方法说明");this.centerType="point",this.center=e.center}this.lng=e.lng,this.lat=e.lat,this.zoomLevel=e.zoomLevel||15,this.control=e.control||!1,this.rule=e.rule||!1,this.wheelScroll=e.wheelScroll||!1,this.controlSize=e.controlSize?e.controlSize:""}else alert("地图初始化需要中心点经纬度或传入地址名")},createControll:function(){return new BMap.NavigationControl({type:this.controlSize})},addCustomMarker:function(e){this.thisAddCustomMarkerPoint=[];var t=this;this._addCustomMarker(e);var a=[].concat(this.allwaysRemberArr);a.push(e),this.clearAllOverlay(),a.forEach(function(e,a){t._addCustomMarker(e)}),e.viewport&&t.baiduMap.setViewport(t.thisAddCustomMarkerPoint,{margins:[0,100,0,0]}),e.allwayRember&&this.allwaysRemberArr.push(e)},_addCustomMarker:function(e){var t=this,a=doT.template(e.content);if(e.infoWindow){var n=doT.template(e.infoWindow);t.infoWindowFn=n}var i=this.baiduMap,o=[],s=[];e.point.forEach(function(n,r){var l=n.lng,c=n.lat,d=(n.param,a(n.param.contentData));e.contentOffset||(e.contentOffset=[0,0]);var p=new BMap.Size(e.contentOffset[0],e.contentOffset[1]),u=new BMap.Point(l,c);o.push(u);var m=new BMapLib.RichMarker(d,u,{anchor:p});m.savedThisMarkerPoint=u,m.savedThisMarkerData={markerid:n.param.contentData.markerid,contentData:n.param.contentData,windowInfoData:n.param.windowInfoData,param:n.param},s.push(m),i.addOverlay(m),m.addEventListener("click",function(){e.infoWindow&&t.createInfoWindowBox({windowInfoData:this.savedThisMarkerData.windowInfoData}),e.infoWindow&&i.openInfoWindow(t.infoWindow,this.savedThisMarkerPoint),e.clickCallBack&&e.clickCallBack.call(t,this)}),m.addEventListener("onmouseover",function(){e.mouseinCallBack&&e.mouseinCallBack.call(t,this)}),m.addEventListener("onmouseout",function(){e.mouseoutCallBack&&e.mouseoutCallBack.call(t,this)})}),t.thisAddCustomMarkerPoint=t.thisAddCustomMarkerPoint.concat(o),this.overLayMarkers=s},clearAllwayRember:function(){this.allwaysRemberArr=[]},clearAllCurrentMarker:function(){var e=this.baiduMap,t=this.overLayMarkers;t&&t.forEach(function(t,a){e.removeOverlay(t)})},clearAllOverlay:function(){this.baiduMap.clearOverlays()},addMarker:function(e){var t=this.baiduMap,a=[];e.point.forEach(function(e,n){var i=e.lng,o=e.lat,s=(e.param,new BMap.Point(i,o));a.push(s);var r=new BMap.Marker(s);t.addOverlay(r)}),t.setViewport(a,{margins:[40,40,40,40]})},customTrueMarker:function(e,t,a){var n=this;function i(e,t,a){this._point=e,this._text=t,this._overText=a}return i.prototype=new BMap.Overlay,i.prototype.initialize=function(e){this._map=e;var t=this._div=document.createElement("div");return t.innerHTML="<span>hello</span>",n.baiduMap.getPanes().labelPane.appendChild(t),t},i.prototype.draw=function(){var e=this._map.pointToOverlayPixel(this._point);this._div.style.left=e.x-0+"px",this._div.style.top=e.y-30+"px"},new i(t,"hello","toow")},setDZSMarkerIcon:function(e){return{url:"./images/icon.png",offset:[-4,-437]}},createInfoWindowBox:function(e){var t=this.infoWindowFn(e),a=new BMap.InfoWindow(t,{width:0,height:0,offset:new BMap.Size(-3,-11)});this.infoWindow=a},renderPolyLine:function(e,t,a,n){var i=this;if("bus"===e){var o=new BMap.TransitRoute(i.baiduMap,{renderOptions:{map:i.baiduMap},onSearchComplete:function(e){if(o.getStatus()===BMAP_STATUS_SUCCESS){var s=e.getPlan(0),r=(e.getStart().title,e.getEnd().title,s.getDistance(!1));r=r>1e4?r/1e3+"km":r+"m";var l=Math.ceil(s.getDuration(!1)/60),c=Math.floor(l/60),d=Math.floor(l%60),p=Math.floor(l/60)<=0?"":Math.floor(l/60)+"小时",u=Math.floor(l%60)<=0?"":Math.floor(l%60)+"分钟";if(c>0||d>0)var m="，约"+p+u;else m="";for(var f=s.getNumRoutes()+s.getNumLines(),h=[],v=0;v<f;v++)if(v%2==0)v/2==0&&0===s.getRoute(v/2).getDistance(!1)&&(h[v]={type:"foot",distance:0}),v/2==s.getNumRoutes()-1&&0===s.getRoute(v/2).getDistance(!1)&&(h[v]={type:"foot",distance:0}),s.getRoute(v/2).getDistance(!1)>0&&(h[v]={type:"foot",distance:s.getRoute(v/2).getDistance(!0)});else{var g=s.getLine((v-1)/2);h[v]={type:g.type==BMAP_LINE_TYPE_SUBWAY?"sub":"bus",distance:g.getDistance(!0),stationNum:g.getNumViaStops(),startStation:g.getGetOnStop().title,endStation:g.getGetOffStop().title}}n&&n.call(i,{discription:h,start:t.title,end:a.title,allDistance:r,allDuration:m,type:"bus"})}else n&&n.call(i,{error:!0,type:"bus"})}});o.search(t.point,a.point)}else if("car"===e){var s=new BMap.DrivingRoute(i.baiduMap,{renderOptions:{map:i.baiduMap},onSearchComplete:function(e){if(s.getStatus()===BMAP_STATUS_SUCCESS){var o=e.getPlan(0),r=(e.getStart().title,e.getEnd().title,o.getDistance(!1));r=r>1e3?r/1e3+"km":r+"m";var l=Math.ceil(o.getDuration(!1)/60),c=Math.floor(l/60),d=Math.floor(l%60),p=Math.floor(l/60)<=0?"":Math.floor(l/60)+"小时",u=Math.floor(l%60)<=0?"":Math.floor(l%60)+"分钟";if(c>0||d>0)var m="，约"+p+u;else m="";for(var f=[],h=0;h<o.getNumRoutes();h++)for(var v=o.getRoute(h),g=0;g<v.getNumSteps();g++){var y=v.getStep(g);f.push(y.getDescription(!1))}n&&n.call(i,{s:f,start:t.title,end:a.title,allDistance:r,allDuration:m,type:"car"})}else n&&n.call(i,{error:!0,type:"car"})}});s.search(t.point,a.point)}else if("foot"===e){var r=new BMap.WalkingRoute(i.baiduMap,{renderOptions:{map:i.baiduMap},onSearchComplete:function(e){if(r.getStatus()===BMAP_STATUS_SUCCESS){var o=e.getPlan(0),s=(e.getStart().title,e.getEnd().title,o.getDistance(!1));s=s>1e3?s/1e3+"km":s+"m";var l=Math.ceil(o.getDuration(!1)/60),c=Math.floor(l/60),d=Math.floor(l%60),p=Math.floor(l/60)<=0?"":Math.floor(l/60)+"小时",u=Math.floor(l%60)<=0?"":Math.floor(l%60)+"分钟";if(c>0||d>0)var m="，约"+p+u;else m="";for(var f=[],h=0;h<o.getNumRoutes();h++)for(var v=o.getRoute(h),g=0;g<v.getNumSteps();g++){var y=v.getStep(g);f.push(y.getDescription(!1))}n&&n.call(i,{s:f,start:t.title,end:a.title,allDistance:s,allDuration:m,type:"foot"})}else n&&n.call(i,{error:!0,type:"foot"})}});r.search(t.point,a.point)}},begainLoadMapEvent:function(){},loadEvent:function(){}},t.DZSMap=s},function(e,t,a){var n=a(60)("length");e.exports=n},function(e,t,a){var n=a(7);e.exports=function(e){return function(t){return null==t?undefined:n(t)[e]}}},function(e,t,a){var n=a(0),i="[object Function]",o=Object.prototype.toString;e.exports=function(e){return n(e)&&o.call(e)==i}},function(e,t){var a=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}();e.exports=a},function(e,t,a){var n=a(41),i=a(12),o=Object.prototype,s=o.hasOwnProperty,r=o.propertyIsEnumerable;e.exports=function(e){return i(e)&&n(e)&&s.call(e,"callee")&&!r.call(e,"callee")}},function(e,t,a){var n=a(140),i=a(0),o=a(12);e.exports=function s(e,t,a,r,l,c){return e===t||(null==e||null==t||!i(e)&&!o(t)?e!=e&&t!=t:n(e,t,s,a,r,l,c))}},function(e,t,a){var n=a(0);e.exports=function(e){return e==e&&!n(e)}},function(e,t,a){var n=a(7);e.exports=function(e,t,a){if(null!=e){e=n(e),a!==undefined&&a in e&&(t=[a]);for(var i=0,o=t.length;null!=e&&i<o;)e=n(e)[t[i++]];return i&&i==o?e:undefined}}},function(e,t,a){var n=a(14),i=a(7),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){var a=typeof e;return!!("string"==a&&s.test(e)||"number"==a)||!n(e)&&(!o.test(e)||null!=t&&e in i(t))}},function(e,t,a){var n=a(151),i=a(14),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;e.exports=function(e){if(i(e))return e;var t=[];return n(e).replace(o,function(e,a,n,i){t.push(n?i.replace(s,"$1"):a||e)}),t}},function(e,t){e.exports=function(e){return e}},function(e,t){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(a=window)}e.exports=a},,,function(e,t,a){e.exports=a(74)},function(e,t,a){"use strict";var n,i=a(15),o=(n=i)&&n.__esModule?n:{"default":n},s=(a(76),a(77)),r=a(78),l=a(79),c=a(80),d=a(119),p=a(121),u=a(122),m=a(123),f=a(125),h=(a(126),a(23),a(127)),v=a(130),g=a(1),y=a(54),_=a(55);window.com_num=10,s.slider.init(),m.summary.init(),(0,h.init)();var b=function(){var e=$(".facility-icon li.nosupply");$(".facility-icon li.supply");$(".facility-icon li.nosupply").remove(),$(".facility-icon").append(e),$("#hotel-details .hotel-facility ul li.room-facility span").each(function(){$(this).text().indexOf("早餐")>-1&&$(this).remove()});$("#hotelAndScenary .h-s-title ul li").click(function(){$("#hotelAndScenary .h-s-title ul li").hasClass("none")||($("#hotelAndScenary .h-s-title ul li").eq($(this).index()).addClass("active").siblings().removeClass("active"),$(".hspackage").hide().eq($(this).index()).show())}),$("#startTime").attr("readonly","readonly"),$("#endTime").attr("readonly","readonly");var t=$(".checkin").parent();new r.Calendar(!0,!1,!0,t,"last").editDateSearch=w,d.comments.init(),l.secondaryMenu.init(),c.roomList.init();var a=(fish.parseDate($("#endTime").val())-fish.parseDate($("#startTime").val()))/1e3/60/60/24;$(".checkin .total-date span").html(a),v.browseHistory.init(),$("body").on("click",function(e){var t=$(e.target),a=$(".comments_saoma .QR_code"),n=t.hasClass("QR_code")||t.hasClass("desc")||t.hasClass("content")||t.hasClass("code_img")||t.hasClass("QC_img")||t.hasClass("doc")||t.hasClass("text")||t.hasClass("summary")||t.hasClass("comments_saoma")||t.hasClass("QR_code_img")||t.hasClass("declare")||t.hasClass("triangle_img"),i=t.hasClass("comments_saoma")||t.hasClass("QR_code_img")||t.hasClass("declare")||t.hasClass("triangle_img");!1===n?(a.removeClass("show"),$("#comments .triangle_img").removeClass("open"),a.css("display","none")):!0===i&&a.hasClass("show")?(a.removeClass("show"),$("#comments .triangle_img").removeClass("open"),a.css("display","none")):(a.addClass("show"),$("#comments .triangle_img").addClass("open"),a.css("display","block"))});var n=settings.hotelid;y.buryPoint.detail_show(n);var i,o={pageName:$(".bread-hotel").html(),businessCircle:$("#hightlight .landmark").html(),hotelId:settings.hotelid};g.buryChannelPoint.last_head_bread_crumb(o),g.buryChannelPoint.last_head_business_circle(o),$("#T_commonsilder li.c-k").on("click",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","右侧导航","客服")}),$("#T_commonsilder li.c-t").on("click",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","右侧导航","返回顶部")}),$(".contract-phone").on("click",function(){$(this).css("display","none"),$(".contract-phone-wrapper").css("display","inline-block"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","信息","联系电话")}),$(".hotel-license .check").on("click",function(){var e=$(this).hasClass("supplier-check"),t="//m.ly.com/hotel/hotellicence/"+settings.hotelid+"/?wvc3=1";e&&(t+="&licencetype=1"),$("#license-wrap").append('<iframe class="iframe" src="'+t+'" frameborder="0" width="800" height="500"></iframe>').show(),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","信息",e?"查看供应商证照":"查看营业执照")}),$("#license-wrap .close").on("click",function(){$("#license-wrap").hide(),$("#license-wrap iframe").remove()}),$(".SEO_icon").on("click",function(){$("#seo-list .SEO_icon").hasClass("SEO_Close")?($(".city_hote_label_cont").removeClass("none"),$("#seo-list .SEO_icon").removeClass("SEO_Close"),$("#seo-list .SEO_icon").addClass("SEO_Open")):($(".city_hote_label_cont").addClass("none"),$("#seo-list .SEO_icon").addClass("SEO_Close"),$("#seo-list .SEO_icon").removeClass("SEO_Open"))}),$("#hightlight .address").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href")||"";if(""!==t&&!/javascript/.test(t)){var a=_.tcSpm.checkUrlHasSpm(t,3,1,1);$("#reUrlBox").attr("href",a),$("#reUrl").trigger("click")}}),i=$(".bread-crumb a"),$("#breadcrumb .bread-crumb").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href");if(""!==t&&!/javascript/.test(t)){var a=i.index(this)+2,n=_.tcSpm.checkUrlHasSpm(t,3,1,a);$("#reUrlBox").attr("href",n),$("#reUrl").trigger("click")}}),$("#fjhotel-list").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href");if(""!==t&&!/javascript/.test(t)){var a=$(this).parents("li").index()+1,n=_.tcSpm.checkUrlHasSpm(t,3,3,a);$("#reUrlBox").attr("href",n),$("#reUrl").trigger("click")}}),$("#zbhotel-list").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href")||"";if(""!==t&&!/javascript/.test(t)){var a=$("#fjhotel-list a").length||0,n=$(this).parents("li").index()+a+1,i=_.tcSpm.checkUrlHasSpm(t,3,3,n);$("#reUrlBox").attr("href",i),$("#reUrl").trigger("click")}}),$("#seo-list .aroundlist").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),a=_.tcSpm.checkUrlHasSpm(t,3,4,1);""===t||/javascript/.test(t)||(location.href=a)}),$(".overall-view a").length&&$(".overall-view a").on("click",function(e){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","720全景查看",settings.hotelid)}),$(window).scroll(function(){if($(".secondary-menu-wrap").hasClass("fixed")&&"block"===$(".calendar-panel").css("display")&&$(".calendar-panel").css("display","none"),1!==window.isSeadTravelSee){var e=$(window).height();$("#mini-map").offset().top+$("#mini-map").height()-$(window).scrollTop()<=e&&(window.isSeadTravelSee=1,f.suggestedTab.enableCallback=!0,0===settings.isPaChong&&f.suggestedTab.getHotel(),f.suggestedTab.bindEvents(),p.hotelAndScenary.getPackages(),u.scenery.getScenery())}}),function(){var e,t,a;function n(){t.offsetWidth-a.scrollLeft<=0?a.scrollLeft-=e.offsetWidth:a.scrollLeft++}var i=setInterval(n,20);clearInterval(i),$("body").on("mouseover",".scroll_div",function(){var o=$(this);o.width()>=220&&(e=o.find(".scroll_begin")[0],t=o.find(".scroll_end")[0],a=o[0],t.innerHTML=e.innerHTML,i=setInterval(n,20))}),$("body").on("mouseout",".scroll_div",function(){var n=$(this);n.width()>=220&&(e=n.find(".scroll_begin")[0],t=n.find(".scroll_end")[0],a=n[0],t.innerHTML=e.innerHTML,clearInterval(i))})}()};function w(){if($(".checkin .update-btn.active").removeClass("active"),!$(".checkin .update-btn").hasClass("disable")){var e=settings.hotelid,t=c.roomList.getUrlDataBySeach(e),a=$("#room-list"),n=(fish.parseDate($("#endTime").val())-fish.parseDate($("#startTime").val()))/1e3/60/60/24;$(".checkin .total-date span").html(n),c.roomList.apiSetCookies($("#startTime").val(),$("#endTime").val()),n<20&&($(".checkin .update-btn").addClass("disable"),$(".checkin .update-btn").html(""),$("#room-list div.policy-items").empty(),$("#filter-policys").addClass("none"),$("#filter-policys li:not(.all-clear)").removeClass("active"),$(".filter-items ul li.filter-discount-type span").html("优惠"),$(".filter-items ul li.filter-bed-type span").html("床型"),$(".filter-items ul li.filter-pay span").html("支付类型"),$(".filter-items ul li.all-clear").addClass("none"),$(".filter-empty").addClass("none"),c.roomList.showLoading(a),$(".secondary-menu-wrap").hasClass("fixed")&&window.scrollTo(0,$("#room-list").offset().top-58),c.roomList.ajaxRoomList(t,a))}}!function(){var e=settings.comedate||"",t=settings.leavedate||"";if(e&&t){var a={GnHotelComeDate:e,GnHotelLeaveDate:t},n=(0,o["default"])(a);localStorage.setItem("GnHotelData",n)}}(),b()},function(e,t,a){var n=a(8),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,a){"use strict";window.console||(window.console={log:function(){}}),Array.prototype.map||(Array.prototype.map=function(e,t){var a,n,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(a=t),n=new Array(s),i=0;i<s;){var r,l;i in o&&(r=o[i],l=e.call(a,r,i,o),n[i]=l),i++}return n})},function(e,t,a){"use strict";t.__esModule=!0;var n={bigImgDom:$(".mSlider_con ul li img"),init:function(){var e=this,t=$(".smpic.active img.active").attr("orisrc");void 0!==t&&e.bigImgDom.attr("orisrc",t.replace("_120x120_02","").replace("_120x120_00","")),$("#slider .left .ltbtn").addClass("disabled"),$("#slider .right .topbtn").addClass("disabled"),$("#slider .left .tab ul li").click(function(){e.bigImgDom.attr("src","");var t=$(this).index();$(this).addClass("active").siblings("li").removeClass("active"),$(".smpic").eq(t).addClass("active").siblings(".smpic").removeClass("active");var a=$(".smpic.active");$("#slider .left .ltbtn").addClass("disabled"),1===$("img",a).length?$("#slider .left .rtbtn").addClass("disabled"):$("#slider .left .rtbtn").removeClass("disabled"),$("#slider .topbtn").addClass("disabled"),1===$("li",a).length?$("#slider .botbtn").addClass("disabled"):$("#slider .botbtn").removeClass("disabled"),$("li",a).eq(0).addClass("active").siblings("li").removeClass("active"),$("img",a).removeClass("active").eq(0).addClass("active"),e.imgclickAppear(),e.changeBigImgSrc()}),$("#slider .left").mouseover(function(){$("#slider .btns").removeClass("none")}),$("#slider .left").mouseout(function(){$("#slider .btns").addClass("none")}),$("#slider .right").mouseover(function(){$("#slider .topbtn").removeClass("none"),$("#slider .botbtn").removeClass("none")}),$("#slider .right").mouseout(function(){$("#slider .topbtn").addClass("none"),$("#slider .botbtn").addClass("none")}),$("#slider .topbtn").click(function(){if(!$(this).hasClass("disabled")){e.bigImgDom.attr("src",""),$("#slider .right .botbtn,#id-next").removeClass("disabled");var t=$(".smpic.active"),a=$("li.active",t).index();!--a&&$(this).addClass("disabled"),!a&&$("#id-previous").addClass("disabled"),$("li",t).eq(a).addClass("active").siblings("li").removeClass("active"),$("li img",t).removeClass("active"),$(" li.active img",t).eq(0).addClass("active"),e.imgclickAppear(),e.changeBigImgSrc()}}),$("#slider .botbtn").click(function(){if(!$(this).hasClass("disabled")){e.bigImgDom.attr("src",""),$("#slider .right .topbtn,#id-previous").removeClass("disabled");var t=$(".smpic.active"),a=$("li.active",t).index(),n=$("li",t).length-1;a++,$("li",t).eq(a).addClass("active").siblings("li").removeClass("active"),$("li img",t).removeClass("active"),$(" li.active img",t).eq(0).addClass("active"),a===n&&$(this).addClass("disabled"),a===n&&1===$("li.active img",t).length&&$("#id-next").addClass("disabled"),e.imgclickAppear(),e.changeBigImgSrc()}}),$(".smpic img").click(function(){var t=$(".smpic.active img");t.removeClass("active"),$(this).addClass("active"),$(".mSlider_con ul li img").attr("src",$(this).attr("src").replace("_120x120_02","").replace("_120x120_02",""));var a=e.index(this,t);$("#id-next,#id-previous").removeClass("disabled"),a===t.length-1&&$("#id-next").addClass("disabled"),0===a&&$("#id-previous").addClass("disabled")}),$(".smpic.active ul li").length<=1?($("#id-next").addClass("none"),$("#id-previous").addClass("none")):($("#id-next").removeClass("none"),$("#id-previous").removeClass("none")),$("#id-next").click(function(){if(!$(this).hasClass("disabled")){e.bigImgDom.attr("src",""),$("#slider .left .ltbtn").removeClass("disabled");var t=$(".smpic.active"),a=e.index($("img.active",t)[0],$("img",t));if(++a===$("img",t).length-1&&$(this).addClass("disabled"),$(".smpic.active img").eq(a).parents("li").hasClass("active"))$(".smpic.active li img").removeClass("active"),$(".smpic.active li img").eq(a).addClass("active");else{var n=$(".smpic.active li.active").index();n++,$("#slider .topbtn").removeClass("disabled"),n===$(".smpic.active li").length-1&&$("#slider .botbtn").addClass("disabled"),$(".smpic.active li").eq(n).addClass("active").siblings("li").removeClass("active"),$(".smpic.active li img").removeClass("active"),$(".smpic.active li img").eq(a).addClass("active")}e.imgclickAppear(),e.changeBigImgSrc()}}),$("#id-previous").click(function(){if(!$(this).hasClass("disabled")){e.bigImgDom.attr("src",""),$("#slider .left .rtbtn").removeClass("disabled");var t=$(".smpic.active"),a=e.index($("img.active",t)[0],$("img",t));if(0===--a&&$(this).addClass("disabled"),$(".smpic.active img").eq(a).parents("li").hasClass("active"))$(".smpic.active li img").removeClass("active"),$(".smpic.active li img").eq(a).addClass("active");else{var n=$(".smpic.active li.active").index();n--,$("#slider .botbtn").removeClass("disabled"),0===n&&$("#slider .topbtn").addClass("disabled"),$(".smpic.active li").eq(n).addClass("active").siblings("li").removeClass("active"),$(".smpic.active li img").removeClass("active"),$(".smpic.active li img").eq(a).addClass("active")}e.changeBigImgSrc()}})},imgclickAppear:function(){var e=$(".smpic.active"),t=$("li.active",e);$("img",t).each(function(e,t){var a=$(this).attr("orisrc");$(this).attr("src",a)})},changeBigImgSrc:function(){var e=$(".smpic.active img.active");e.attr("src")&&this.bigImgDom.attr("src",e.attr("src").replace("_120x120_02","").replace("_120x120_02","")),e.attr("orisrc")&&this.bigImgDom.attr("orisrc",e.attr("orisrc").replace("_120x120_02","").replace("_120x120_02",""))},loadWebp:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){fish.admin.config({lazyLoad:{v:"0.2.1",g:20160706}});"function"==typeof loadWebp&&loadWebp({attr:"orisrc",img:e,fn:function(){fish.require("lazyLoad",function(){e.lazyLoad({attr:"orisrc"})})}})}),index:function(e,t){for(var a=0;a<t.length;a++)if(t[a]===e)return a}};t.slider=n},function(e,t,a){"use strict";t.__esModule=!0,t.Calendar=undefined;var n=a(23),i=a(1),o={editDateSearch:function(){},leave_date:"",come_date:"",init:function(e,t,a,n,s,r,l){var c,d,p,u=this,m=new $.Calendar({firstDay:1,wrapperWidth:288}),f=0,h=["周日","周一","周二","周三","周四","周五","周六"],v=new Date;(new Date).getHours()<5&&"home"==s?(c=(p=new Date(Date.now()-864e5)).Format("yyyy-MM-dd"),d=h[new Date(Date.now()-864e5).getDay()],u.setNextDate(p,n),$('<p class="tip"><span></span>今晨0-5点入住 , 入住日期请选择'+new Date(Date.now()-864e5).Format("M月d日")+"（ 昨日 ）</p>").insertBefore($(".destination")),$(".search_content .home_hotel_content").addClass("notop")):(c=(p=new Date).Format("yyyy-MM-dd"),d=h[(new Date).getDay()],u.setNextDate(new Date(Date.now()+864e5),n)),o.come_date=c;var g=h[v.getDay()];return e&&($(".start-week",n).html(d),$(".end-week",n).html(g)),$(".startTime",n).val(c),v=new Date((new Date).setDate((new Date).getDate()+59)).Format("yyyy-MM-dd"),$(".checkin "+r,n).on("click",function(t){$(".date-box",n).removeClass("active"),$(this).addClass("active"),$(".dialog-ui.rel-pop.over_twenty").css("display","none"),m.pick({elem:$($(".startTime",n)),startDate:(new Date).getHours()<5?new Date(Date.now()-864e5):new Date,mode:"rangeFrom",skin:"green",endDate:v,currentDate:[undefined,$(".endTime",n).val()],offset:{top:10,left:-40},hoverIn:function(e,t){$(".dayNumTip").remove();var a=$(".endTime",n).val().replace(/-/g,"/"),i=new Date(t).Format("yyyy-MM-dd");i=i.replace(/-/g,"/");var o=Date.parse(new Date(a))-Date.parse(new Date(i));f=o/1e3/60/60/24,o>0?($(".dayNumTip").remove(),f=o/1e3/60/60/24,$(".calendar-panel .calendar-wrapper .to-day span").after('<div class="dayNumTip"><span>'+f+"</span>晚</div>")):$(".dayNumTip").remove()},hoverOut:function(e){$(".dayNumTip",e).remove();u.showTotalNight("start",n)},buildContent:u.buildContent,fn:function(t,a,r,c){o.come_date=$(c).attr("data-date"),$(".dialog-ui.rel-pop").remove(),$(".date-box",n).removeClass("active");var p=$(".startTime",n).val(),m=$(".endTime",n).val();if(e){var v=new Date(Date.parse(p.replace(/-/g,"/"))),y=new Date(Date.parse(m.replace(/-/g,"/")));d=h[v.getDay()],g=h[y.getDay()],$(".start-week",n).html(d),$(".end-week",n).html(g)}if(p>=m){var _=u.stringToDate(p);if(u.setNextDate(_,n),e){v=new Date(Date.parse(p.replace(/-/g,"/"))),y=new Date(Date.parse($(".endTime",n).val().replace(/-/g,"/")));d=h[v.getDay()],g=h[y.getDay()],$(".start-week",n).html(d),$(".end-week",n).html(g)}}u.overTwentyDays(f);var b=s,w={nightNum:0===f?1:f,start:p,end:$(".endTime").val()};i.buryChannelPoint.time_choose(b,"start",w),$(".checkin "+l,n).click()}}),u.showTip(),u.showTotalNight("",n)}),$(".checkin "+l,n).on("click",function(r){var l=$(".startTime",n).val();$(".date-box").removeClass("active"),$(this).addClass("active"),$(".dialog-ui.rel-pop.over_twenty").css("display","none"),m.pick({elem:$($(".endTime",n)),startDate:fish.parseTime(l,{days:1}),endDate:v,mode:"rangeTo",skin:"green",showOtherMonth:!0,currentDate:[l],offset:{top:10,left:-40},hoverIn:function(e,t){$(".dayNumTip").remove();new Date(t).getTime(),$("td.from-day").attr("data-date"),$(e).attr("data-date");var a=new Date(t).Format("yyyy-MM-dd");a=a.replace(/-/g,"/"),l=l.replace(/-/g,"/");var n=Date.parse(new Date(a))-Date.parse(new Date(l));f=n/1e3/60/60/24,$("span",e).after('<div class="dayNumTip"><span>'+f+"</span>晚</div>")},hoverOut:function(e){$(".dayNumTip",e).remove();u.showTotalNight("end",n)},buildContent:u.buildContent,fn:function(r,l,c,d){if($(".checkin .update-btn").addClass("endHover"),o.leave_date=$(d).attr("data-date"),$(".date-box",n).removeClass("active"),$("#tempEndTime").val($(".endTime").val()),$(".dialog-ui.rel-pop").remove(),e){var p=new Date(Date.parse($(".endTime",n).val().replace(/-/g,"/")));g=h[p.getDay()],$(".end-week",n).html(g),a&&($(".checkin .update-btn.active").removeClass("active"),u.editDateSearch())}u.overTwentyDays(f);var m=s,v={nightNum:0===f?1:f,end:$(".endTime").val()};i.buryChannelPoint.time_choose(m,"end",v),t&&("last"===s||$("#search-submit").trigger("click"))}}),u.showTip(),u.showTotalNight(n)}),$(".startTime",n).keyup(function(t){var a=$(this).val(),n=$(this).attr("id");u.checkDate(a,n,e)}),$(".endTime",n).keyup(function(t){var a=$(this).val(),n=$(this).attr("id");u.checkDate(a,n,e)}),$(".startTime",n).focus(function(){o.come_date=$(".startTime",n).val()}),$(".endTime",n).blur(function(e){o.leave_date=$(".endTime",n).val()}),$(".startTime",n).blur(function(){setTimeout(function(){if("none"===$(".calendar-panel").css("display")){$(".startTime",n).val(o.come_date),$(".dialog-ui.rel-pop").find(".calendar_error").length>0&&$(".dialog-ui.rel-pop").remove();var e=u.calculateDays();u.overTwentyDays(e)}},200),$(".date-box").removeClass("active")}),$(".endTime",n).blur(function(e){setTimeout(function(){"none"===$(".calendar-panel").css("display")&&($(".endTime",n).val(o.leave_date),$(".dialog-ui.rel-pop").find(".calendar_error").length>0&&$(".dialog-ui.rel-pop").remove());var e=u.calculateDays();u.overTwentyDays(e)},200),$(".date-box").removeClass("active")}),this},showTip:function(){(new Date).getHours()<5&&!$(".calendar-panel .tip").length&&"home"==pageFlag&&$(".calendar-panel").append('<div class="wtip"><div class="tip"><span></span><p>如果您是凌晨5点前入住，入住日期请选择前一天。例：2018.7.12凌晨2点入住，入住日期选择7.11即可。</p></div></div>')},setNextDate:function(e,t){var a=new Date(e.setDate(e.getDate()+1)).Format("yyyy-MM-dd");$(".endTime",t).val(a),""===o.leave_date&&(o.leave_date=a)},stripscript:function(e){for(var t=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“’。，、？]"),a="",n=0;n<e.length;n++)a+=e.substr(n,1).replace(t,"");return a},stringToDate:function(e){var t=e.split("-");if(t=new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10)),!isNaN(t.getTime()))return t},checkDate:function(e,t,a,n){if(/^(\d{4})-(0\d{1}|1[0-2])-(0\d{1}|[12]\d{1}|3[01])$/.test(e)){if("startTime"===t){o.come_date=e;var i=$(".startTime").val();if(i>=$(".endTime").val()){var s=o.stringToDate(i),r=["周日","周一","周二","周三","周四","周五","周六"];if(o.setNextDate(s,n),a){var l=new Date(Date.parse(i.replace(/-/g,"/"))),c=new Date(Date.parse($(".endTime",n).val().replace(/-/g,"/"))),d=r[l.getDay()],p=r[c.getDay()];$(".start-week",n).html(d),$(".end-week",n).html(p)}}}else"endTime"===t&&(o.leave_date=e);$(".dialog-ui.rel-pop").remove()}else{this.errorTip("日期格式有误",t)}},showTotalNight:function(e,t){var a=$(".startTime",t).val().replace(/-/g,"/"),n=$(".endTime",t).val().replace(/-/g,"/");if("end"===e?n=$(".to-day",this.wrapper).attr("data-date"):"start"===e&&(a=$(".from-day",this.wrapper).attr("data-date")),n!==undefined&&(n=n.replace(/-/g,"/")),a!==undefined&&(a=a.replace(/-/g,"/")),a&&n){var i=Date.parse(new Date(n))-Date.parse(new Date(a)),o=i/1e3/60/60/24;i>0?($(".dayNumTip").remove(),o=i/1e3/60/60/24,$(".calendar-panel .calendar-wrapper .to-day span").after('<div class="dayNumTip"><span>'+o+"</span>晚</div>")):$(".dayNumTip").remove()}},errorTip:function(e,t){$.dialog({content:'<div class="pops calendar_error">'+e+"</div>",fixed:!1,top:7,className:"rel-pop",relative:"#"+t,left:60,isModal:!1,zIndex:[19,10]}).show(),$(".dialog-ui.rel-pop").css("z-index","10000"),$(".dialog-ui.rel-pop").prev(".page_mask").remove()},buildContent:function(e,t,a,n,i){var o,s=$(".startTime",i).val().replace(/-/g,"/"),r=Math.ceil((t.getTime()-new Date(s).getTime())/24/60/60/1e3),l=$(".endTime",i).val().replace(/-/g,"/");o=a?'<span class="d">'+a+"</span>":'<span class="d">'+t.getDate()+"</span>",t.Format("yyyy-MM-dd")===l&&(o+='<div class="dayNumTip"><span>'+r+"</span>晚</div>"),$(e).html(o)},overTwentyDays:function(e){if(e>20){var t=$(".endTime").attr("id");(0,n.errorTip)("如果您需要在酒店入住20天以上，请致电95711，我们会竭诚为您服务。",t)}},calculateDays:function(){var e=0,t=$(".endTime").val().replace(/-/g,"/"),a=$(".startTime").val().replace(/-/g,"/");a=a.replace(/-/g,"/");var n=Date.parse(new Date(t))-Date.parse(new Date(a));return n>0&&($(".dayNumTip").remove(),e=n/1e3/60/60/24),e}};function s(e,t,a,n,i){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:".date-box.start",s=arguments.length>6&&arguments[6]!==undefined?arguments[6]:".date-box.end";return this.init(e,t,a,n,i,o,s)}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},s.prototype=o,t.Calendar=s},function(e,t,a){"use strict";t.__esModule=!0,t.secondaryMenu=undefined;var n=a(1),i={init:function(){$(window).on("scroll",function(){var e=$(window).scrollTop(),t=$("#main-wrapper").offset().top,a=($("#hotelAndScenaryBox").height(),$("#hotelAndScenaryBox").offset().top,$("#hotel-details").height(),$("#hotel-details").offset().top),n=($("#map").height(),$("#map").offset().top),i=($("#comments").height(),$("#comments").offset().top),o=$(".secondary-menu-wrap").height()-10;e<t?($("#secondary-menu .secondary-menu-wrap").removeClass("fixed"),$("#menu-title .book-num").removeClass("none"),$(".secondary-menu-wrap-box").removeClass("top"),$("#menu-title .menu-title-con").hasClass("clicked")||$("#menu-title ul li").eq(0).addClass("active").siblings("li").removeClass("active")):e>=t&&e<a-o?($("#menu-title .menu-title-con").hasClass("clicked")||$("#menu-title ul li").eq(0).addClass("active").siblings("li").removeClass("active"),$("#secondary-menu .secondary-menu-wrap").addClass("fixed"),$("#menu-title .book-num").addClass("none"),$(".secondary-menu-wrap-box").addClass("top")):e>=a-o&&e<n-o-25?($("#menu-title .menu-title-con").hasClass("clicked")||$("#menu-title .hotel-info").addClass("active").siblings("li").removeClass("active"),$("#secondary-menu .secondary-menu-wrap").addClass("fixed"),$("#menu-title .book-num").addClass("none"),$(".secondary-menu-wrap-box").addClass("top")):e>=n-o-25&&e<i-o?($("#menu-title .menu-title-con").hasClass("clicked")||$("#menu-title .map").addClass("active").siblings("li").removeClass("active"),$("#secondary-menu .secondary-menu-wrap").addClass("fixed"),$("#menu-title .book-num").addClass("none"),$("#largeMapSider").removeClass("hidden"),$(".secondary-menu-wrap-box").addClass("top")):($("#menu-title .menu-title-con").hasClass("clicked")||($("#menu-title .comment").hasClass("active")||window._tcTraObj&&_tcTraObj._tcTrackEvent("301","6","Scendet_dpclick","301^"+settings.hotelid+"^1^"+settings.cityid+"^"),$("#menu-title .comment").addClass("active").siblings("li").removeClass("active")),$("#secondary-menu .secondary-menu-wrap").addClass("fixed"),$("#menu-title .book-num").addClass("none"),$(".secondary-menu-wrap-box").addClass("top"))}),$(".menu-title-con ul li").on("click",function(){var e=$(this).attr("data-index"),t=$("a",this).html();n.buryChannelPoint.last_nav_menu(t);var a=this;switch($(this).parents(".menu-title-con").addClass("clicked"),setTimeout(function(){$(".menu-title-con ul li").removeClass("active"),$(a).addClass("active").parents(".menu-title-con").removeClass("clicked")},100),e){case"0":window.scrollTo(0,$("#room-list").offset().top-58);break;case"1":window.scrollTo(0,$("#hotelAndScenary").offset().top-58);break;case"2":window.scrollTo(0,$("#hotel-details").offset().top-58);break;case"3":window.scrollTo(0,$("#map").offset().top-58);break;case"4":window.scrollTo(0,$("#comments").offset().top-60),window._tcTraObj&&_tcTraObj._tcTrackEvent("301","6","Scendet_dpclick","301^"+settings.hotelid+"^0^"+settings.cityid+"^")}}),$("#hightlight .address .map").on("click",function(){window.scrollTo(0,$("#map").offset().top-58),n.buryChannelPoint.last_head_map(),setTimeout(function(){$(".menu-title-con ul li.map").addClass("active").siblings("li").removeClass("active")},100)})}};t.secondaryMenu=i},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.roomList=undefined;var _typeof2=__webpack_require__(43),_typeof3=_interopRequireDefault(_typeof2),_defineProperty2=__webpack_require__(53),_defineProperty3=_interopRequireDefault(_defineProperty2),_stringify=__webpack_require__(15),_stringify2=_interopRequireDefault(_stringify),_viewButton=__webpack_require__(114),_viewDatePrice=__webpack_require__(115),_tip=__webpack_require__(23),_buryChannelPoint=__webpack_require__(1),_buryPointNew=__webpack_require__(54),_tcSpm=__webpack_require__(55),_setTimeByRulesNew=__webpack_require__(116),_getantitoken=__webpack_require__(6);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var memberLevel=fish.cookie.get("us","level"),redirectLoginUrl="https://passport.ly.com/?pageurl="+encodeURIComponent(location.href),minPrice=0,allNotBookedPricesArr=[],allPriceArr=[],pageFlag="last",roomList={cityid:settings.cityid,provinceid:settings.provinceid,isgat:!1,picClassName:"",grouponPolicyArr:[],hotelid:settings.hotelid,ghotelid:settings.ghotelid,tempHotelInfo:[],tempHotelInfoArr:[],roomFacilities:[],init:function(){this.initLocalDate();var e=$("#room-list");"395"!==this.cityid&&"396"!==this.cityid&&"35"!==this.provinceid&&(this.isgat=!0),this.hotelid=this.hotelid;var t=this.getUrlData(this.hotelid);this.showLoading(e),this.ajaxRoomList(t,e),this.filterTriggle()},loading:!1,showLoading:function(e){this.loading=!0,$(".page-loading",e).css("display","block")},hideLoading:function(e){$(".page-loading",e).css("display","none"),this.loading=!1},initLocalDate:function initLocalDate(){var comeDate=this.getQueryString("comedate")||"",leaveDate=this.getQueryString("leavedate")||"";if(comeDate&&leaveDate){var localStorageInfo=eval("("+localStorage.getItem("GnHotelData")+")");localStorageInfo||(localStorageInfo={}),localStorageInfo.CnHotelComeDate=comeDate,localStorageInfo.CnHotelLeaveDate=leaveDate,localStorage.setItem("GnHotelData",""),localStorage.setItem("GnHotelData",(0,_stringify2["default"])(localStorageInfo))}},ajaxReady:function(e,t){var a,n=this;settings.policyInfo.url,e.ptUse=1,$.ajax((a={url:settings.policyInfo.url,data:e,dataType:settings.dataType,type:"get"},(0,_defineProperty3["default"])(a,"dataType","json"),(0,_defineProperty3["default"])(a,"cache",!1),(0,_defineProperty3["default"])(a,"success",function(e){n.roomFacilities=[],n.removeDateLoading(),$("#room-list").removeClass("no-filter");e.isCanYuDing;if(200===e.Status){$("#slider .left .price").removeClass("soldout"),$("#room-list div.empty").addClass("none"),$("#slider .left .price").removeClass("soldout"),$("#room-list div.empty").addClass("none"),n.tempHotelInfoArr=e.RoomList,n.processPolicyInfo(e.RoomList),n.processGrouponDetail(),this.bindPageEvents();var a=parseInt(this.getQueryString("payType"))||"";if(a)for(var i=$(".pay-wrap-s"),o=0;o<i.length;o++){var s=i.eq(o).data("index");1===a&&3==s?i.eq(o).click():2===a&&1===s&&i.eq(o).click()}}else n.hideLoading(t),n.renderRoomsEmpty();this.hideLoading(t)}.bind(this)),(0,_defineProperty3["default"])(a,"error",function(e){$("#room-list div.empty").html("网络异常，请刷新重试！"+e.status),n.hideLoading(t),n.renderRoomsEmpty()}),a))},ajaxRoomList:function(e,t){var a=this;-1===document.domain.indexOf("ly.com")?a.ajaxReady(e,t):setTimeout(function(){$.td(function(){a.ajaxReady(e,t)},"/td/key","/td/cookie")},100)},renderRoomsEmpty:function(){$("#slider .left .price").addClass("soldout"),$("#slider .left .price").html("已售罄"),$("#room-list div.empty").removeClass("none"),$("#menu-title .book-num").addClass("none")},removeDateLoading:function(){$(".checkin .update-btn").hasClass("disable")&&($(".checkin .update-btn").removeClass("disable"),$(".checkin .update-btn").html("修改日期"))},processPolicyInfo:function(e){var t=[],a=[],n=e,i=0,o=0;window.isAllSoldOut=0;for(var s=0;s<n.length;s++){var r=$.extend(!0,{},n[s]),l=$.extend(!0,{},n[s]);r.PolicyInfo=[],l.PolicyInfo=[];var c=n[s].PolicyInfo;if(0!==c.length){var d=0;o+=c.length;for(var p=0;p<c.length;p++){var u=c[p];!1===u.IsCanYuding&&(d+=1),3==u.PolicyType?l.PolicyInfo.push(u):r.PolicyInfo.push(u)}i+=d,r.PolicyInfo.length>0&&t.push(r),l.PolicyInfo.length>0&&(a.push(l),this.grouponPolicyArr.push(l))}}i===o&&(window.isAllSoldOut=1,$("#slider .left .price").addClass("soldout"),$("#slider .left .price").html("订完")),this.tempHotelInfo=t,this.processNormalInfo(t,e),this.initFilterItems(),0===t.length&&0===a.length&&$("#room-list .empty").removeClass("none")},processNormalInfo:function(e,t){for(var a=[],n=[],i=[],o="",s=new Object,r=0;r<e.length;r++){var l=[],c=[],d=[],p=e[r],u=this.processPic(p,s),m=this.getRoomSummaryHtml(p),f=this.getRoomRemarkHtml(p),h=new Object,v=this.createPolictyTitleHtml(),g="",y=p.PolicyInfo;h.Adsl=e[r].Adsl,h.Bed=e[r].Bed;for(var _=0,b=0;b<y.length;b++){var w=y[b];h.HasWindow=p.WindowDesc||"",h=this.setPolicy(h,w,settings.hotelid,p.RoomId,t);var C=this.getPolicyName(p,w);h.BedType=p.BedType,h.Bed=p.Bed,h.AddBed=w.AddBedInfo,h.MinAmount=w.MinAmount;var T=w.CouponDesc.replace(/\s+/g,""),k=w.Breakfast,D=this.getCancelRulesHtml(h),S=this.getAvagePriceBtnHtml(h),I=this.getPolicyTagsHtml(h);this.getpolicyAddbedHtml(h),this.getpolicyWindowHtml(h),this.getpolicyMultiLive(h);T+="<br/>"+w.SubCouponDesc.replace(/\s+/g,"");var P="",x="";b>=5?(x="hide",P=' <div class="more policy"><span>查看更多产品</span> <i class="up"></i></div>'):P=' <div class="more none"><span>查看更多产品</span> <i class="up"></i></div>';var O="";(h.window&&h.benifit||h.window&&h.benifit||h.window&&h.gift&&h.benifit)&&(O="wrap"),O="wrap";var j="";""===D&&(j="none"),1!=w.PolicyType&&0!=w.IsCanYuding?(a.push(w.AvgPrice),c.push(w.AvgPrice)):d.push(w.AvgPrice),1!=w.PolicyType&&n.push(w.AvgPrice),l.push(w.AvgPrice);var M=0;h.SRId&&(M=h.SRId);var E=h.Adsl,L="&nbsp;";if(h.BedType>=0){var B="";L='<span class="cbline">'+((B=1===h.BedType?"大/双床":2===h.BedType?"大床":3===h.BedType?"双床":4===h.BedType?"帐篷床":5===h.BedType?"多张床":"其他")||"&nbsp")+"</span>"}var A="床型："+h.Bed,N="",H=h.SupplierId;if(A&&(N='<div class="tips-rules"><span class="tip-info">'+A+"</span></div>"),1===h.BedType)B="大/双床";else if(2===h.BedType)B="大床";else if(3===h.BedType)B="双床";else if(4===h.BedType)B="帐篷床";else if(5===h.BedType)B="多张床";else B="其他";g+='<div class="policy-info-s '+x+" "+j+'" data-policyid="'+h.policyId+'" data-shadowid="'+M+'" data-isrecommend="'+h.IsRecommend+'" data-supplierId="'+H+'">                                                    <dl class="'+O+' clearfix">                                                        <dt class="policy-name">                                                            <span class="name" title="'+C+'">'+(C||"&nbsp;")+'</span>                                                            <span class="tags">'+I+'</span>                                                        </dt>                                                        <dd class="policy-type" data-bedtype="'+(B||"&nbsp")+'">'+L+N+'</dd>                                                        <dd class="policy-band">'+(E||"&nbsp")+'</dd>                                                        <dd class="policy-break">'+k+"</dd>                                                           "+D+"                                                           "+S+'</dl>                                                    <span class="minuPrice">'+T+"</span>                                                </div>",_++}var R=0;R=0===c.length?Math.min.apply(null,d):Math.min.apply(null,c);var F="";h.HasWindow&&(F="<ul><li><span>窗户信息：</span>"+h.HasWindow+"</li></ul>");var U=s.photoUrl.replace("80_80","550_410");o+='  <div class="policy-item" data-index="'+r+'" data-roomid="'+p.RoomId+'">                                \x3c!-- 房型信息总述 start --\x3e                                <div class="policy-item-info on">                                    <dl>                                        <dt class="policy-pic '+this.picClassName+'">                                            <img src="'+s.photoUrl.replace("http:","")+'" alt="">                                            <div class="showDetailImg">                                                <img src="'+U+'" alt="">                                            </div>                                        </dt>                                        <dd class="policy-desc">'+m+'<div class="fac-block fac'+p.RoomId+'" data-win="'+h.HasWindow+'">'+F+'</div></dd>                                        <dd class="price">                                            <span>&yen;<strong>'+R+'</strong><em>起</em></span>                                        </dd>                                        <dd class="product-count">共'+_+'个产品</dd>                                    </dl>                                    <i class="arrow unfold"></i>                                </div>',o+=v+g+P+'<div class="room-mark">'+f+'                                            <ul class="clearfix">'+u+"</ul>                                          </div>                                    </div>                                </div>                            </div>                        </div>",i.push(p.RoomId)}$("#room-list div.policy-items").html(o),this.addBookedTag(),this.setMinPriceForSlide(a,n,0);for(var z=0;z<e.length;z++)e[z].RoomFacility.length>0&&this.initRoomFacilities(e[z].RoomFacility,e[z].RoomId)},initRoomFacilities:function(e,t){this.renderRoomFac(e,t),this.roomFacilities=e},renderRoomFac:function(e,t){for(var a=e,n="",i=0;i<a.length;i++){var o=a[i];n+="<li><span>"+o.split(":")[0]+"：</span>"+o.split(":")[1]+"</li>";var s="";a.length>1&&(s='<span class="facmore">查看更多</span>')}var r=$(".fac"+t).data("win")||"";r&&(n+=" <li><span>窗户信息：</span>"+r+"</li>"),$(".fac"+t).html(s+"<ul>"+n+"</ul>")},initFilterItems:function(){$("#filter-policys .bed-type-wrap").empty(),$("#filter-policys .bed-type-wrap").html('<a data-name="不限">不限</a>'),$("#filter-policys .filter-pay-wrap").empty(),$("#filter-policys .filter-pay-wrap").html('<a class="pay-wrap-s" data-index="0">不限</a>'),$("#filter-policys .discount-type-wrap").empty(),$("#filter-policys .discount-type-wrap").html('<a class="discount-wrap-s">不限</a>'),$(".policy-item:not(.groupon) .policy-info .policy-break").each(function(){if("无早"!=$(this).html())return $("#filter-policys .filter-break").removeClass("none"),!1}),$(".policy-item:not(.groupon) .policy-info .policy-type").each(function(){var e=$(this).data("bedtype");e&&""!==e.trim()&&"&nbsp;"!==e&&($("#filter-policys .filter-bed-type").removeClass("none"),0===$("#filter-policys .filter-bed-type .bed-type-wrap").find("a[data-name='"+e+"']").length&&$("#filter-policys .filter-bed-type .bed-type-wrap").append("<a data-name='"+e+"'>"+e+"</a>"))}),$(".policy-item:not(.groupon) .policy-info .confirm").length>0&&$("#filter-policys .filter-confirm").removeClass("none"),$(".policy-item:not(.groupon) .policy-info .youhui").length>0?($("#filter-policys .filter-discount-type").removeClass("none"),$(".policy-item:not(.groupon) .policy-info .fanxian").length>0?$("#filter-policys .filter-discount-type .discount-type-wrap").append('<a class="discount-wrap-s" data-index="3">返现</a>'):$(".policy-item:not(.groupon) .policy-info .lijian").length>0&&$("#filter-policys .filter-discount-type .discount-type-wrap").append('<a class="discount-wrap-s" data-index="3">立减</a>')):$("#filter-policys li.filter-discount-type").addClass("none"),($(".policy-item:not(.groupon) .policy-info .free-cancel").length>0||$(".policy-item:not(.groupon) .policy-info .limite-cancel").length>0)&&$("#filter-policys .filter-free").removeClass("none"),$(".policy-item:not(.groupon) .policy-info .policy-pay .booking").length>0&&$("#filter-policys .filter-book").removeClass("none"),$(".policy-item:not(.groupon) .policy-info .policy-tag").length>0&&($("#filter-policys .filter-pay").removeClass("none"),$(".policy-item:not(.groupon) .policy-info .policy-tag .online").length>0&&$("#filter-policys .filter-pay .filter-pay-wrap").append('<a class="pay-wrap-s" data-index="1">在线付</a>'),$(".policy-item:not(.groupon) .policy-info .policy-tag .danbao").length>0&&$("#filter-policys .filter-pay .filter-pay-wrap").append('<a class="pay-wrap-s" data-index="2">担保</a>'),$(".policy-item:not(.groupon) .policy-info .policy-tag .arrive-pay").length>0&&$("#filter-policys .filter-pay .filter-pay-wrap").append('<a class="pay-wrap-s" data-index="3">到店付</a>')),$("#filter-policys ul li.none").length<8&&$("#filter-policys").removeClass("none");var e=this.getQueryString("type");"1"===e?($(".filter-items ul li.filter-confirm").addClass("active"),this.bindFilterEvents()):"2"===e?($(".filter-items ul li.filter-book").addClass("active"),this.bindFilterEvents()):"3"===e&&($(".filter-items ul li.filter-confirm").addClass("active"),$(".filter-items ul li.filter-book").addClass("active"),this.bindFilterEvents())},processGrouponInfo:function(e){for(var t=[],a=0;a<e.length;a++)for(var n=e[a],i=0;i<n.length;i++){var o=n[i];1!=o.IsCanYuDing&&2!=o.IsCanYuDing&&t.push(o.AvgPriceCNY)}if(t&&t.length>0)return e[t.indexOf(Math.min.apply(null,t))]},processGrouponDetail:function(){if(this.grouponPolicyArr.length>0)$(".policy-item.groupon").attr("data-grouponid")},bindPageEvents:function(){var e=this;$(".policy-item-info").on("click",function(e){var t=$(e.target);if(t.hasClass("facmore")){var a=t.closest(".fac-block");t.hasClass("active")?(t.html("查看更多").removeClass("active"),a.removeClass("on")):(t.html("收起").addClass("active"),a.addClass("on"))}else if(!t.closest(".policy-desc").length){$(this).toggleClass("on"),$(this).siblings(".policy-wrap").toggleClass("none");var n={roomId:$(this).parent(".policy-item").attr("data-roomid")};_buryChannelPoint.buryChannelPoint.last_room_module_toggle(n)}}),$(".policy-item.groupon .policy-item-info").on("click",function(){$(".policy-group-wrap").length>0&&($(this).toggleClass("arrow"),$(this).siblings(".policy-group-wrap").toggleClass("none"));var e={roomId:$(this).parent(".policy-item").attr("data-roomid")};_buryChannelPoint.buryChannelPoint.last_room_module_toggle(e)}),$(".more.policy").on("click",function(){var e=$(this).parent();$(".policy-info-s.hide",e).toggleClass("show"),$(".more.policy i",e).toggleClass("up"),$(".more.policy i",e).hasClass("up")?$(".more.policy span",e).html("查看更多产品"):$(".more.policy span",e).html("收起");var t={roomId:e.parents(".policy-item").attr("data-roomid")};_buryChannelPoint.buryChannelPoint.last_room_module_toggle(t)}),$(".policy-info dd.policy-pay span.booking").on("click",function(){if(!$(this).hasClass("disable-book")){window.chooseBtn=$(this);var t=$(this).parents(".policy-info-s").attr("data-policyid"),a=$(this).parents(".policy-item").attr("data-roomid"),n=($(this).parents(".policy-item").find(".policy-item-info dl dd p.name").html(),$(this).parents(".policy-info-s").attr("data-shadowid")),i=$(this).parents(".policy-info-s").attr("data-isrecommend"),o=e.getSubmitUrl(!1,a),s="",r="",l=$(this).parents(".policy-info-s").attr("data-supplierid");n&&(s="&SRId="+n),i&&"true"===i&&(r="&IsRecommend=1");var c={hotelName:center.title,hotelId:settings.hotelid,roomId:a,cityId:settings.cityid,supplierId:l,policyId:t};_buryChannelPoint.buryChannelPoint.last_policy_book(c);var d=settings.hotelid;settings.cityid,$(this).parents(".policy-info-s").index();_buryPointNew.buryPoint.book(d);c={HotelId:settings.hotelid,RoomTypeId:a,PolicyId:t,RoomCount:1,ComeDate:$.trim($("#startTime").val()),LeaveDate:$.trim($("#endTime").val()),ComeTime:(new Date).getHours(),ShadowId:$(this).parents(".policy-info-s").attr("data-shadowid")||0,antitoken:(0,_getantitoken.getantitoken)()};var p=o+t+($(this).find(".online").hasClass("changed")?"&ptuse=1":"")+s+r,u=$("#room-list .policy-info-s .booking").index(this)+1,m=_tcSpm.tcSpm.checkUrlHasSpm(p,3,2,u);$.ajax({url:settings.bookingpolicy.url,type:settings.type,dataType:settings.dataType,data:c,success:function(t){!0===t.rspStatus?t.ChageInfoMsg&&t.ChageInfoMsg.length>0&&!0===t.rspStatus?e.bookChange(t.ChageInfoMsg,m,!1):location.href=m:e.bookChange(t.rspStatus,m,!0)},error:function(e){}})}}),$(".policy-item.groupon dl dd.action").on("click",function(){var t=$(".policy-item.groupon").attr("data-grouponid"),a=e.getSubmitUrl(!0,t),n=($(".policy-item.groupon").find(".policy-item-info dl dd p.name").html(),{hotelName:center.title,hotelId:settings.hotelid,roomId:t,cityId:settings.cityid});_buryChannelPoint.buryChannelPoint.last_policy_book(n);var i=settings.hotelid;settings.cityid,$(this).parents(".policy-item.groupon").index();_buryPointNew.buryPoint.book(i),location.href=a+t+"&iid="+(new Date).getTime()}),$(".policy-item .policy-pay .look").on("click",function(){_viewButton.viewButton.show($(this))}),$(".policy-item .policy-price span.line").on("mouseover",function(){_viewDatePrice.viewDatePrice.show($(this),$("#startTime").val())}),$(".policy-item .policy-price span.line").on("mouseleave",function(){_viewDatePrice.viewDatePrice.hide()}),$(".policy-info dl dd.policy-type").hover(function(){0===$(this).children().length&&$(this).addClass("no")}),$(".policy-info span i.gift .tips-rules span.rules .gift-list .gift-name").on("click",function(){var e=$(this).data("num");$(this).addClass("active").siblings(".gift-name").removeClass("active"),$(this).parents(".tips-rules").find('span.tip-info[data-num="'+e+'"]').css("display","block").siblings(".tip-info").css("display","none")}),$(".checkin .update-btn").on("click",function(){if(!$(".checkin .update-btn").hasClass("disable")){var t=settings.hotelid,a=e.getUrlDataBySeach(t);$(this).hasClass("active")&&($(this).removeClass("active"),$(this).html("修改日期"));var n=$("#room-list"),i=(fish.parseDate($("#endTime").val())-fish.parseDate($("#startTime").val()))/1e3/60/60/24;if(e.apiSetCookies($("#startTime").val(),$("#endTime").val()),i>=20)"block"!==$(".dialog-ui.rel-pop").css("display")&&(0,_tip.errorTip)("如果您需要在酒店入住20天以上，请致电95711，我们会竭诚为您服务。","endTime");else{$(".checkin .update-btn").addClass("disable"),$(".checkin .update-btn").html(""),$("#room-list div.policy-items").empty(),$("#filter-policys").addClass("none"),$("#filter-policys li:not(.all-clear)").removeClass("active"),$(".filter-items ul li.filter-discount-type span").html("优惠"),$(".filter-items ul li.filter-bed-type span").html("床型"),$(".filter-items ul li.filter-pay span").html("支付类型"),$(".filter-items ul li.all-clear").addClass("none"),$(".filter-empty").addClass("none"),e.showLoading(n),$(".secondary-menu-wrap").hasClass("fixed")&&window.scrollTo(0,$("#room-list").offset().top-58),roomList.ajaxRoomList(a,n);var o={comeDate:$("#startTime").val(),leaveDate:$("#endTime").val(),night:i};_buryChannelPoint.buryChannelPoint.last_nav_modify_date(o)}}})},filterTriggle:function(){var e=this;$("#filter-policys li.filter-bed-type").hover(function(){$(this).addClass("current"),$(this).find(".bed-type-wrap").removeClass("none")},function(){$(this).removeClass("current"),$(this).find(".bed-type-wrap").addClass("none")}),$("#filter-policys li.filter-pay").hover(function(){$(this).addClass("current"),$(this).find(".filter-pay-wrap").removeClass("none")},function(){$(this).removeClass("current"),$(this).find(".filter-pay-wrap").addClass("none")}),$("#filter-policys li.filter-discount-type").hover(function(){$(this).addClass("current"),$(this).find(".discount-type-wrap").removeClass("none")},function(){$(this).removeClass("current"),$(this).find(".discount-type-wrap").addClass("none")}),$("#filter-policys").undelegate(),$("#filter-policys").delegate("li:not(.filter-bed-type):not(.filter-pay):not(.filter-discount-type):not(.all-clear)","click",function(){$(".filter-empty").addClass("none"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型筛选",$("span",this).html()),e.bindFilterEvents()}),$("#filter-policys").delegate("li.filter-bed-type a","click",function(){$("#filter-policys li.filter-bed-type a").removeClass("selected"),$(this).addClass("selected"),$(".bed-type-wrap").addClass("none"),"不限"!==$(this).html().trim()?($("#filter-policys li.filter-bed-type").addClass("active"),$("#filter-policys li.all-clear").removeClass("none")):($("#filter-policys li.filter-bed-type").removeClass("active"),$("#filter-policys li.all-clear").addClass("none")),$(".filter-items ul li.filter-bed-type span").html("不限"==$(this).html().trim()?"床型":$(this).html()),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型筛选","床型",$("span",this).html()),e.bindFilterEvents()}),$("#filter-policys").delegate("li.filter-discount-type a","click",function(){$("#filter-policys li.filter-discount-type a").removeClass("selected"),$(this).addClass("selected"),$(".discount-type-wrap").addClass("none"),"不限"!==$(this).html().trim()?($("#filter-policys li.filter-discount-type").addClass("active"),$("#filter-policys li.all-clear").removeClass("none")):($("#filter-policys li.filter-discount-type").removeClass("active"),$("#filter-policys li.all-clear").addClass("none")),$(".filter-items ul li.filter-discount-type span").html("不限"==$(this).html().trim()?"优惠":$(this).html()),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型筛选","优惠",$("span",this).html()),e.bindFilterEvents()}),$("#filter-policys").delegate("li .filter-pay-wrap a","click",function(){if($("#filter-policys li .filter-pay-wrap a").removeClass("selected"),$(this).addClass("selected"),$(".filter-pay-wrap").addClass("none"),1===window.paytypeClick&&window.location.href.indexOf("payType")>-1){window.paytypeClick+=1;var t=e.changeURLPar(window.location.href,"payType","");window.history.pushState({},0,t)}window.paytypeClick=1,"不限"!==$(this).html().trim()?($("#filter-policys li.filter-pay").addClass("active"),$("#filter-policys li.all-clear").removeClass("none")):($("#filter-policys li.filter-pay").removeClass("active"),$("#filter-policys li.all-clear").addClass("none")),$(".filter-items ul li.filter-pay span").html("不限"==$(this).html().trim()?"支付类型":$(this).html()),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","房型筛选","支付类型",$("span",this).html()),e.bindFilterEvents()}),$("#filter-policys").delegate("li.all-clear","click",function(){$("#filter-policys li:not(.all-clear)").removeClass("active"),$(".filter-items ul li.filter-discount-type span").html("优惠"),$(".filter-items ul li.filter-bed-type span").html("床型"),$(".filter-items ul li.filter-pay span").html("支付类型"),$(this).addClass("none"),$(".filter-empty").addClass("none"),e.processNormalInfo(e.tempHotelInfo,e.tempHotelInfoArr),$(".policy-item.groupon").show(),window.firstCome=0,e.bindPageEvents()}),$(".filter-empty").delegate(".filter-tip","click",function(){$("#filter-policys li.all-clear").click()})},changeURLPar:function changeURLPar(destiny,par,par_value){var pattern=par+"=([^&]*)",replaceText=par+"="+par_value;if(destiny.match(pattern)){var tmp="/\\"+par+"=[^&]*/";return tmp=destiny.replace(eval(tmp),replaceText),tmp}return destiny.match("[?]")?destiny+"&"+replaceText:destiny+"?"+replaceText},bindFilterEvents:function(){var e=$("#filter-policys li:not(.all-clear).active").length,t=$("#filter-policys li.filter-bed-type span").html().trim(),a=$("#filter-policys li.filter-pay span").html().trim(),n=$("#filter-policys li.filter-discount-type span").html().trim();0==e?"床型"===t?$("li.all-clear").addClass("none"):"支付类型"===a?$("li.all-clear").addClass("none"):"优惠"===n&&$("li.all-clear").addClass("none"):$("li.all-clear").removeClass("none"),this.showLoading($("#roomList")),$(".policy-item.groupon").hide();var i=$.extend(!0,[],this.tempHotelInfo),o=[];if($.each(i,function(e,t){o.push(t)}),$("#filter-policys .filter-break").hasClass("active"))for(var s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(var r=o[s].PolicyInfo.length-1;r>=0;r--)o[s].PolicyInfo[r].Breakfast.indexOf("无")>-1&&o[s].PolicyInfo.splice(r,1);0===o[s].PolicyInfo.length&&o.splice(s,1)}var l=$("#filter-policys li.filter-bed-type span").html();if("床型"!==l)for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--){var c=o[s].BedType;if(1===c)var d="大/双床";else if(2===c)d="大床";else if(3===c)d="双床";else if(4===c)d="帐篷床";else if(5===c)d="多张床";else d="其他";l!=d&&o[s].PolicyInfo.splice(r,1)}0===o[s].PolicyInfo.length&&o.splice(s,1)}var p=$("#filter-policys .filter-discount-type span").html();if("不限"!==p)for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--)"返现"===p?o[s].PolicyInfo[r].PolicyLabel.fanxian&&o[s].PolicyInfo[r].PolicyLabel.fanxian.length||o[s].PolicyInfo.splice(r,1):"立减"===p&&(o[s].PolicyInfo[r].PolicyLabel.lijian&&o[s].PolicyInfo[r].PolicyLabel.lijian.length||o[s].PolicyInfo.splice(r,1));0===o[s].PolicyInfo.length&&o.splice(s,1)}if($("#filter-policys .filter-confirm").hasClass("active"))for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--)0==o[s].PolicyInfo[r].Instant&&o[s].PolicyInfo.splice(r,1);0===o[s].PolicyInfo.length&&o.splice(s,1)}if($("#filter-policys .filter-free").hasClass("active"))for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--)2===o[s].PolicyInfo[r].CancelType&&o[s].PolicyInfo.splice(r,1);0===o[s].PolicyInfo.length&&o.splice(s,1)}if($("#filter-policys .filter-book").hasClass("active"))for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--)1!=o[s].PolicyInfo[r].IsCanYuding&&o[s].PolicyInfo.splice(r,1);0===o[s].PolicyInfo.length&&o.splice(s,1)}var u=$("#filter-policys .filter-pay span").html();if("支付类型"!==u)for(s=o.length-1;s>=0;s--)if(o[s].PolicyInfo!==undefined){for(r=o[s].PolicyInfo.length-1;r>=0;r--)"在线付"===u?2!==o[s].PolicyInfo[r].BookType&&o[s].PolicyInfo.splice(r,1):"担保"===u?1!==o[s].PolicyInfo[r].BookType&&o[s].PolicyInfo.splice(r,1):"到店付"===u&&0!==o[s].PolicyInfo[r].BookType&&o[s].PolicyInfo.splice(r,1);0===o[s].PolicyInfo.length&&o.splice(s,1)}this.processNormalInfo(o,this.tempHotelInfoArr),0===o.length?($(".filter-empty").removeClass("none"),$("#room-list").addClass("no-filter")):($(".filter-empty").addClass("none"),$("#room-list").removeClass("no-filter")),0===$("#filter-policys li.active").length&&$(".policy-item.groupon").show(),this.bindPageEvents()},renderFilterNoResult:function(){},getUrlDataBySeach:function(e){fish.cookie.get("us","userid")||fish.cookie.get("cnUser","userid"),fish.cookie.get("CNSEInfo","RefId");return this.isgat?1:0,{HotelId:e,ComeDate:$("#startTime").val(),LeaveDate:$("#endTime").val(),antitoken:(0,_getantitoken.getantitoken)()}},getSubmitUrl:function(e,t){var a=$("#startTime").val(),n=$("#endTime").val();return e?"/Yuding1.aspx?ComeDate="+a+"&LeaveDate="+n+"&YudingCode=0&cometel=&jobnum=&Tuanid=":"/book1.html?HotelId="+this.hotelid+"&RoomTypeId="+t+"&ComeDate="+a+"&LeaveDate="+n+"&PolicyId="},showBigImg:function(e){$("body").append('<div id="apiShowPos"><img src="" /></div>');var t=$(e),a=t.attr("src").replace(/_120x120_00/,"").replace(/_120x120_02/,""),n=$("#apiShowPos"),i=$("img",n),o=t.offset();t.width();i.attr("src",a),n.css({position:"absolute",left:o.left+8+"px",top:o.top+72+"px"})},showRemakImg:function(e){$("body").append('<div id="apiShowPos"><img src="" /></div>');var t=$(e),a=t.attr("src").replace(/_120x120_00/,"").replace(/_120x120_02/,""),n=$("#apiShowPos"),i=$("img",n),o=t.offset();t.width();i.attr("src",a),n.css({position:"absolute",left:o.left+27+"px",top:o.top+80+"px","z-index":6})},hideImg:function(){$("#apiShowPos").remove()},createGrouponHtml:function(e){var t="",a=e.PolicyInfo[0];if(3===a.PolicyType&&null!=a.GroupBuyUrl){var n=this.getUrlId(a.GroupBuyUrl),i="";null!=a.RoomPicList&&a.RoomPicList.length>0?(i=a.RoomPicList[0],picClassName=""):(i="//img1.40017.cn/cn/sl/dzs-hotel/last/roomlist/room-pic1.png",picClassName="default-icon");var o=this.getRoomSummaryHtml(a),s=i.replace(/_120x120_00/,"").replace(/_120x120_02/,"").replace("http:","");t+='<div class="policy-item groupon" data-grouponid="'+n+'">                                    <div class="policy-item-info">                                        <dl>                                            <dt class="policy-pic '+picClassName+'">                                                <img src="'+i.replace("http:","")+'" alt="">                                                <div class="showDetailImg">                                                    <img src="'+s+'" alt="">                                                </div>                                            </dt>                                            <dd>'+o+'</dd>                                            <dd class="price">                                                <span>&yen;<strong>'+a.AvgPrice+'</strong></span>                                            </dd>                                            <dd class="action">立即抢购</dd>                                        </dl>                                        <i class="arrow unfold"></i>                                    </div>                                    <div class="policy-group-wrap none"></div>                                </div>'}return t},getUrlId:function(e){var t=0;return e&&(t=e.match(/detail-\d+/))&&(t=t[0].match(/\d+/)[0]),t},buildGrouponDetails:function(e){var t=this;$.ajax({url:settings.grouponDetails,data:{tuanId:e},dataType:settings.dataType,success:function(e){e?($(".policy-item.groupon.on i.arrow").addClass("show"),t.createGrouponDetailHtml(e)):$(".policy-item.groupon.on i.arrow").removeClass("show")},error:function(e){}})},createGrouponDetailHtml:function(e){var t,a="";""===e.coupontime&&(a="none"),t=' <div class="group-detail">                                            <ul>                                                <li class="title"><span>团购详情</span></li>                                                <li class="tel">                                                    <label>预约电话</label>                                                    <span>'+e.reservationTel+'</span>                                                </li>                                                <li class="effective">                                                    <label>有效期</label>                                                    <span>'+e.expireTime+'</span>                                                </li>                                                <li class="unwork '+a+'">                                                    <label>不适用日期</label>                                                    <span>2016年4月29日-2016年5月2日、2016年6月8日-2016年6月11日不适用</span>                                                </li>                                                <li class="include">                                                    <label>产品包含</label>                                                    <span class="txt">                                                        <h4>'+e.productContains+' </h4>                                                    </span>                                                </li>                                                <li class="remind">                                                    <label> 特别提醒</label>                                                    <span class="txt">                                                        <h4>'+e.specialtip+'</h4>                                                    </span>                                                </li>                                            </ul>                                      </div>                                      <div class="instruction">此产品由同程提供发票，如需发票请致电客服，本团购酒店产品由同程旅游战略合作伙伴携程旅行网提供</div>',$(".policy-group-wrap").html(t)},getUrlData:function getUrlData(hotelid){var that=this,com=void 0,out=void 0,comeDate=void 0,leaveDate=void 0,CCashBack=void 0,memberid=fish.cookie.get("us","userid")||fish.cookie.get("cnUser","userid")||0,refid=fish.cookie.get("CNSEInfo","RefId")||0,startDate=new Date((new Date).setDate((new Date).getDate())).Format("yyyy-MM-dd"),endDate=new Date((new Date).setDate((new Date).getDate()+1)).Format("yyyy-MM-dd"),localStorageInfo=eval("("+localStorage.getItem("GnHotelData")+")");if(null==localStorageInfo){$("#startTime").val(startDate),$("#endTime").val(endDate);var str={CnHotelComeDate:startDate,CnHotelLeaveDate:endDate},timeHistory=(0,_stringify2["default"])(str)}else{(new Date).getHours()<5&&($("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(localStorageInfo.CnHotelLeaveDate));var subStartDate=new Date(localStorageInfo.CnHotelComeDate)-new Date(startDate),subEndDate=new Date(localStorageInfo.CnHotelLeaveDate)-new Date(endDate);if(subStartDate<0||subEndDate<0){$("#startTime").val(startDate),$("#endTime").val(endDate),localStorageInfo.CnHotelComeDate=startDate,localStorageInfo.CnHotelLeaveDate=endDate;var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo)}else $("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(localStorageInfo.CnHotelLeaveDate)}(0,_setTimeByRulesNew.setTimeByRules)(pageFlag),that.setLastTimeWeek(),CCashBack=this.isgat?1:0;var data={HotelId:hotelid,ComeDate:$("#startTime").val(),LeaveDate:$("#endTime").val(),antitoken:(0,_getantitoken.getantitoken)()};return data},setLastTimeWeek:function(){var e=["周日","周一","周二","周三","周四","周五","周六"],t=e[new Date($(".startTime").val()).getDay()],a=e[new Date($(".endTime").val()).getDay()];$(".start-week").html(t),$(".end-week").html(a)},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},addBookedTag:function(){$(".policy-item").not(".groupon").each(function(){var e=!0;$(".policy-info dl dd.policy-pay span",this).each(function(){($(this).hasClass("booking")||$(this).hasClass("look"))&&(e=!1)}),e&&($(this).addClass("booked"),$(".policy-item-info",this).removeClass("on"),$(".policy-item-info dl dd.price span",this).css("color","#999"),$(".policy-wrap",this).addClass("none")),0==$(".policy-info",this).find(".policy-info-s").length&&$(this).addClass("none")})},setMinPriceForSlide:function(e,t,a){0===(a=0===e.length?0===t.length?0:Math.min.apply(null,t):Math.min.apply(null,e))?($("#slider .left .price").addClass("soldout"),$("#slider .left .price").html("已售罄")):1===window.isAllSoldOut?($("#slider .left .price").addClass("soldout"),$("#slider .left .price").html("订完")):($("#slider .left .price").removeClass("soldout"),$("#slider .left .price").html("<span><i>&yen;</i><em>"+a+"</em></span>起"))},processPic:function(e,t){var a=this.setPictureUrl(),n=e.ImageList;return(null==n||n.length<=0)&&(n=e.PhotoList),null!=n&&n.length>0?(null!=e.RoomImage&&e.RoomImage.length>0?t.photoUrl=e.RoomImage:t.photoUrl=n[0],t.roomPicList=n,t.photoUrl===a.url1||t.photoUrl===a.url2?(t.photoUrl=a.iconUrl,this.picClassName="default-icon"):this.picClassName="",this.getRemarkPics(t)):(e.Photo?(t.photoUrl=e.Photo,t.photoUrl==a.url2&&(this.picClassName="default-icon",t.photoUrl=a.iconUrl)):(t.photoUrl=a.iconUrl,this.picClassName="default-icon"),t.roomPicList=e.PhotoList,t.roomPicList&&t.roomPicList.length>0?this.getRemarkPics(t):"")},getRoomRemarkHtml:function(e){var t="";return""!==e.OtherNotes&&"无"!==e.OtherNotes&&(t+="<p>其他："+e.OtherNotes+"</p>"),t},getRemarkPics:function(e){for(var t="",a=0;a<e.roomPicList.length&&1!==e.roomPicList.length;a++)if(a<5){var n=e.roomPicList[a].split("400_300"),i=n[0].replace("http:",""),o=n[1];e.roomPicList[a]=i+"120_120"+o,t+='<li>                                        <img src="'+e.roomPicList[a].replace("http:","")+'" alt=""/>                                        <div class="showDetailImg">                                            <img src="'+e.roomPicList[a].replace("http:","").replace("120_120","400_300")+'" alt=""/>                                        </div>                                     </li>'}return t},getRoomSummaryHtml:function(e){var t="";t+=this.getBedName(e);for(var a=this.getRoomArr(e),n="",i=0;i<a.length;i++)i===a.length-1&&(n="none"),t+="<span>"+a[i]+'</span><span class="line '+n+'">|</span>';return t},getBedName:function(e){return""!==e.RoomName?'<p class="name" title="'+e.RoomName+'">'+e.RoomName+"</p>":'<p class="name">暂无</p>'},getRoomArr:function(e){var t=[];return""!==e.Area&&null!==e.Area&&(e.Area.indexOf("平方米")>-1?t.push("面积"+e.Area.replace("平方米","")+"㎡"):e.Area.indexOf("㎡")>-1?t.push("面积"+e.Area):t.push("面积"+e.Area+"㎡")),e.Floor&&""!==e.Floor&&null!==e.Floor&&(e.Floor.indexOf("层")<=-1&&t.push("楼层"+e.Floor+"层"),e.Floor.indexOf("层")>-1&&t.push("楼层"+e.Floor)),e.CheckInNum&&"0"!=e.CheckInNum&&null!=e.CheckInNum&&(e.CheckInNum.indexOf("+")>-1?t.push("可住"+e.CheckInNum.replace("+","")+"人以上"):t.push("最多可住"+e.CheckInNum+"人")),t},getBedStr:function(e){var t="",a="",n="",i="",o="";if(""!==e.BedType&&null!==e.BedType)if(-1!==e.BedType.indexOf("/")?a=e.BedType.split("/"):n=e.BedType,"0"!==e.BedWidth&&""!==e.BedWidth&&"0,0"!==e.BedWidth&&(e.BedWidth=e.BedWidth.replace("米",""),-1!==e.BedWidth.indexOf(",")?i=e.BedWidth.split(","):o=e.BedWidth+"米"),a&&a.length){var s="",r="",l=a[0],c=a[1];-1!==a[0].indexOf("大")?(s="1张",l="大床"):-1!==a[0].indexOf("双")&&(s="2张",l="单人床"),-1!==a[1].indexOf("大")?(c="大床",r="1张"):-1!==a[1].indexOf("双")&&(r="2张",c="单人床"),t=i&&i.length?l+i[0]+"米, "+s+",或者"+c+i[1]+"米,"+r:l+","+s+"或者"+c+","+r}else{var d="",p=n;if(-1!==n.indexOf("大"))d=",1张",p="大床";else if(-1!==n.indexOf("双"))d=",2张",p="单人床";else if(d="",p="",i&&i.length){for(var u=0;u<i.length;u++)o+=i[u].split("米")+"米,";o=o.substring(0,o.length-1)}t=p+o+d}return t},setPictureUrl:function(){return{url1:"//pic2.40017.cn/hotel/2015/7/6/14/36/F/014df5c7f8aa406e944a36740c05342a.jpg",url2:"//pic2.40017.cn/hotel/2015/7/6/14/36/L/8bd74d64fecd4c278994311515be848d.jpg",iconUrl:"//img1.40017.cn/cn/sl/dzs-hotel/last/roomlist/room-pic1.png"}},setPolicy:function(e,t,a,n,i){return e.policyId=t.PolicyId,e.policyName=t.PolicyName,e.Breakfast=t.Breakfast,e.policyPrice=t.AvgPrice,e.danbaoType=t.DanbaoType,e.policyType=t.PolicyType,e.isCanYuDing=t.IsCanYuding,e.policyId=t.PolicyId,e.CustomerLevel=t.CustomerLevel,e.memberLevel=memberLevel,e.groupBuyUrl=!!t.GroupBuyUrl&&t.GroupBuyUrl.replace(".17u.cn",this.getCookieDomain()),e.isHaveGifts=t.HasGift,e.laterReserveTime=t.LaterReserveTime,e.SupplierId=t.SupplierId,e.GiftInfos=t.GiftList,e.hotelId=a,e.roomId=n,e.roomStatus="0",e.roomUndecided="0",e.roomAmountAdvice=t.AvgPrice,e.roomAmountAdviceCNY=0,e.comeDate=i.ComeDate,e.leaveDate=i.LeaveDate,e.nowDate=fish.parseDate(new Date),e.giftsDescription=!0===t.HasGifts?t.GiftList.GiftContent:[],e.giftsBDate=t.HasGifts?t.GiftList.StartDate:"",e.giftsEDate=t.HasGifts?t.GiftList.EndDate:"",e.LimitEarliestArrivalTime=t.LimitEarliestArrivalTime,e.LimitLatestArrivalTime=t.LimitLatestArrivalTime,e.CpId=t.CpId,e.ForPeople=t.ForPeople,e.SRId=t.SRId,e.Adsl=e.Adsl,e.OverviewDescription=t.CancelDesc,e.CancelType=t.CancelType,e.CancelTypeDesc=t.CancelTypeDesc,e.IsRecommend=t.IsRecommend||!1,e.GuestType=t.GuestType,e.PolicyLabel=t.PolicyLabel,e.Instant=t.Instant,e.PriceList=t.PriceList,e.BookType=t.BookType,e.RoomFacility=i[0].RoomFacility,e.BedType=t.BedType,e.Bed=t.Bed,e.Window=t.Window,e},getPolicyName:function(e,t){var a=t.PolicyName,n=e.RoomName;return""===a?n:a},createPolictyTitleHtml:function(){return' <div class="policy-wrap">                                            <div class="policy-title-wrap">                                                <ul class="clearfix">                                                    <li class="policy-name">                                                        <span>名称</span>                                                    </li>                                                    <li class="policy-type"><span>床型</span></li>                                                    <li class="policy-band"><span>宽带</span></li>                                                    <li class="policy-break"><span>早餐</span></li>                                                    <li class="policy-rules"><span>取消规则</span></li>                                                    <li class="policy-price"><span class="avage-price">日均价</span></li>                                                    <li class="policy-pay"></li>                                                    <li class="policy-tag"></li>                                                </ul>                                            </div>                                            <div class="policy-info-wrap">                                                <div class="policy-info">',' <div class="policy-wrap">                                            <div class="policy-title-wrap">                                                <ul class="clearfix">                                                    <li class="policy-name">                                                        <span>名称</span>                                                    </li>                                                    <li class="policy-type"><span>床型</span></li>                                                    <li class="policy-band"><span>宽带</span></li>                                                    <li class="policy-break"><span>早餐</span></li>                                                    <li class="policy-rules"><span>取消规则</span></li>                                                    <li class="policy-price"><span class="avage-price">日均价</span></li>                                                    <li class="policy-pay"></li>                                                    <li class="policy-tag"></li>                                                </ul>                                            </div>                                            <div class="policy-info-wrap">                                                <div class="policy-info">'},getCancelRulesHtml:function(e){var t="",a="";if(t='<dd class="policy-rules free-cancel no" data-type="0">&nbsp;</dd>',!e.OverviewDescription)if(0===e.CancelType)e.OverviewDescription="免费取消";else if(2===e.CancelType)e.OverviewDescription="不可取消";else if(1===e.CancelType)e.OverviewDescription="限时取消";else{if(3!==e.CancelType)return t;e.OverviewDescription="收费取消"}return 0===e.CancelType?(a='<div class="tips-rules">                            <span class="rules"></span> <span class="tip-info">'+e.OverviewDescription+"</span>                          </div>",t='<dd class="policy-rules free-cancel" data-type="3"><span class="cbline">'+e.CancelTypeDesc+"</span> "+a+"</dd>"):2===e.CancelType?(a='<div class="tips-rules">                           <span class="rules"></span> <span class="tip-info">'+e.OverviewDescription+"</span>                          </div>",t='<dd class="policy-rules no-cancel" data-type="1"><span class="cbline">'+e.CancelTypeDesc+"</span>"+a+"</dd>"):1===e.CancelType?(a='<div class="tips-rules">                           <span class="rules"></span><span class="tip-info">'+e.OverviewDescription+"</span>                          </div>",t='<dd class="policy-rules limite-cancel"><span class="cbline">'+e.CancelTypeDesc+"</span>"+a+"</dd>"):3===e.CancelType&&(a='<div class="tips-rules">                           <span class="rules"></span><span class="tip-info">'+e.OverviewDescription+"</span>                          </div>",t='<dd class="policy-rules limite-cancel"><span class="cbline">'+e.CancelTypeDesc+"</span>"+a+"</dd>"),t},getpolicyAddbedHtml:function(e){var t="";return t+=e.AddBed},getpolicyMultiLive:function(e){return e.MinAmount>1?"<br /><i></i>至少预订"+e.MinAmount+"间，方可享受此价格":""},getPolicyNeiwaibin:function(e){var t="";return e.GuestType&&(t=e.GuestType),""!==t?'<br /><i class="neiwaibin_policy_icon"></i><div class="neiWaiBin_policy_des">适用客人：'+t+"</div>":""},getAvagePriceBtnHtml:function(e){var t="",a=this.getBtnTypeByMemberVip(e),n="";n=(fish.parseDate($("#endTime").val())-fish.parseDate($("#startTime").val()))/1e3/60/60/24>1?"line":"one-line";for(var i="",o="",s="",r="",l="",c="",d=0;d<e.PriceList.length;d++){var p=0,u=0,m=e.PriceList[d].PromotionAmount;m?(p=m.fanxian?m.fanxian:0,u=m.lijian?m.lijian:0):(p=0,u=0),i+=e.PriceList[d].Price+";",o+=e.PriceList[d].Breakfast+";",l+=e.roomUndecideds+";",c+=e.roomStatus+";",s+=p+";",r+=u+";"}i=i.substring(0,i.length-1),o=o.substring(0,o.length-1),l=l.substring(0,l.length-1),c=c.substring(0,c.length-1),s=s.substring(0,s.length-1),r=r.substring(0,r.length-1);var f={hotelid:[e.hotelId,i,c,o,l,i,e.AddBed,e.CpId,e.GuestType,s,r].join("|")},h=this.getAttrStr(f,"data");switch("76285350"==e.hotelId&&alert(e.hotelId),a){case 1:t='<dd class="policy-price"><span class="'+n+'" '+h+"><i>&yen;</i>"+e.policyPrice+'<span class="addbedpoli"><i></i>'+this.getpolicyAddbedHtml(e)+this.getpolicyMultiLive(e)+this.getPolicyNeiwaibin(e)+'</span></span></dd>                                         <dd class="policy-pay"><span class="booking '+(this.newgetPolicyStatusHtml(e).indexOf("在线付")>-1?"changecolor":"")+'">预&nbsp;&nbsp;订'+this.newgetPolicyStatusHtml(e)+"</span></dd>";break;case 2:var v={hotelid:e.hotelId,roomid:e.roomId,policyId:e.policyId,policyType:e.policyType,nhref:this._apiSubmitUrl(this.hotelid,e.roomId,e.policyId,e.isCanYuDing),_htxt:"",rstates:e.roomStatus,rundecided:e.roomUndecided,comedate:$("#startTime").val(),iscanyuding:e.isCanYuDing},g=this.getAttrStr(v,"data");t='<dd class="policy-price"><span class="'+n+'" '+h+"><i>&yen;</i>"+e.PriceList.Price+'<span class="addbedpoli"><i></i>'+this.getpolicyAddbedHtml(e)+this.getpolicyMultiLive(e)+this.getPolicyNeiwaibin(e)+'</span></span></dd>                                         <dd class="policy-pay"><span class="look" '+g+">查看</span></dd>";break;case 3:v={cdate:e.comeDate,ldate:e.leaveDate,time:e.laterReserveTime},g=this.getAttrStr(v,"data");var y="",_="",b="";""!==v.time&&v.time&&v.time.indexOf("1900")<0&&v.time.indexOf("0001-1-1")<0?y=v.time.indexOf("T")>0?v.cdate.split("-")[1]+"月"+v.cdate.split("-")[2]+"日的房间，请在"+v.time.split("-")[1]+"月"+v.time.split("-")[2].split("T")[0]+"日"+v.time.split("T")[1].split(":")[0]+"点前预订":v.cdate.split("-")[1]+"月"+v.cdate.split("-")[2]+"日的房间，请在"+v.time.split("-")[1]+"月"+v.time.split("-")[2].split(" ")[0]+"日"+v.time.split(" ")[1].split(":")[0]+"点前预订":(b="unableBook",_="none"),t='<dd class="policy-price"><span class="'+n+'" '+h+"><i>&yen;</i>"+e.policyPrice+'<span class="addbedpoli"><i></i>'+this.getpolicyAddbedHtml(e)+this.getpolicyMultiLive(e)+this.getPolicyNeiwaibin(e)+'</span></span></dd>                                        <dd class="policy-pay">                                            <span class="disable-book '+b+'" '+g+'>订完                                                <div class="tips-rules '+_+'">                                                    <span class="tip-info">'+y+"</span>                                                </div>                                                "+this.newgetPolicyStatusHtml(e).replace("online","online gray").replace("danbao","danbao gray").replace("arrive-pay","arrive-pay gray")+"                                            </span>                                        </dd>";break;case 4:t='<dd class="policy-price"><span class="'+n+'" '+h+"><i>&yen;</i>"+e.PriceList.Price+'<span class="addbedpoli"><i></i>'+this.getpolicyAddbedHtml(e)+this.getpolicyMultiLive(e)+this.getPolicyNeiwaibin(e)+'</span></span></dd>                                         <dd class="policy-pay"><span class="booked">订完</span>'+this.newgetPolicyStatusHtml(e)+"</dd>";break;case 6:case 7:case 8:case 9:case 10:break;case 11:t='<dd class="policy-price zx">                                                <span class="zx">                                                    <span class="'+n+'" '+h+"><i>&yen;</i>"+e.policyPrice+'</span>                                                    <i class="ask-info">                                                        <div class="tips-rules">                                                            <span class="tip-info">'+title+'</span>                                                        </div>                                                    </i>                                                </span>                                            </dd>                                            <dd class="policy-pay"><span class="booking">预订</span></dd>'}return t},getAttrStr:function(e,t){if(!e||"object"!==(void 0===e?"undefined":(0,_typeof3["default"])(e)))return"";var a=[];for(var n in e)if(e.hasOwnProperty(n)){var i=n.toLowerCase()+'="'+e[n]+'"';t&&(i=t+"-"+i),a.push(i)}return a.join(" ")},getMemberGradeName:function(e){var t="";if(null==e)return"";var a=[];if(e.indexOf(";")>-1){a=e.split(";");for(var n=0;n<a.length;n++){switch(a[n]){case"1":t+="/普卡";break;case"2":t+="/银卡";break;case"3":t+="/金卡";break;case"4":t+="/白金卡";break;default:return""}}return t=(t=t.replace("/","")).replace("银卡/银卡","银卡")}return this.getGradeTitle(e)},getGradeTitle:function(e){var t="";switch(e){case"1":t="普卡";break;case"2":t="银卡";break;case"3":t="金卡";break;case"4":t="白金卡";break;default:t=!1}return t},getpolicyWindowHtml:function(e){var t="";return 2===e.HasWindow?(t+='<i class="window">有窗</i>',e.window=!0):1===e.HasWindow?(t+='<i class="partwindow">部分无窗</i>',e.window=!0):0===e.HasWindow?(t+='<i class="partwindow">无窗</i>',e.window=!0):t+="&nbsp;",t},getPolicyTagsHtml:function(e){var t="";if(e.PolicyLabel.lijian&&e.PolicyLabel.lijian.length&&(t+='<i class="lijian youhui">立减                                <div class="tips-rules">                                    <span class="rules">立减</span>                                    <span class="tip-info">'+e.PolicyLabel.lijian+"</span>                                </div>                                </i>"),e.PolicyLabel.fanxian&&e.PolicyLabel.fanxian.length){var a=e.PolicyLabel.fanxian,n=a.match(/¥\d+/);t+='<i class="fanxian youhui">返现                                <div class="tips-rules">                                    <span class="rules">返现</span>                                    <span class="tip-info">'+a.replace(n,'<i class="hlprice">'+n+"</i>")+"</span>                                </div>                                </i>"}if(e.PolicyLabel.daili&&(t+='<i class="agent" data-type="1">代理                                 <div class="tips-rules">                                        <span class="rules">代理</span>                                        <span class="tip-info">'+e.PolicyLabel.daili+"</span>                                    </div>                                </i>",e.agent=!0),!0===e.Instant&&(t+='<i class="confirm" data-type="3">立即确认                                <div class="tips-rules">                                    <span class="rules">立即确认</span>                                    <span class="tip-info">订单提交后，酒店将立即确认您的订单，保障您的住房需求。</span>                                </div>                            </i>',e.confirm=!0),e.PolicyLabel.ziying&&(t+='<i class="self_support" data-type="4">同程艺龙                                <div class="tips-rules">                                    <span class="rules">同程艺龙</span>                                    <span class="tip-info">'+e.PolicyLabel.ziying+"</span>                                </div>                            </i>",e.self_support=!0),!0===e.isHaveGifts){var i,o=e.GiftInfos,s="",r="",l=new Date;l.getDay();l=l.getFullYear()+"-"+(l.getMonth()+1)+"-"+l.getDate();new Date(l.replace(/\-/g,"/"));for(var c=$("#startTime").val(),d=(new Date(c.replace(/\-/g,"/")),$("#endTime").val()),p=(new Date(d.replace(/\-/g,"/")),0);p<o.length;p++){var u=p,m=0==u?"initial":"none";o[p].StartDate,o[p].EndDate,o[p].GiftName;r+='<span class="tip-info" style= "display:'+m+'" data-num="'+u+'">\n                                            <div class="gift-content gift-item"><span class="title"></span><span>'+o[p].GiftContent+"</span></div>\n                                            </span>",0==u?1===o.length?s+='<span class="gift-name active" data-num="'+u+'">礼包</span>':s+='<span class="gift-name active" data-num="'+u+'">礼包'+(u+1)+"</span>":s+='<span class="gift-name" data-num="'+u+'">礼包'+(u+1)+"</span>"}if(o.length>1)var f="多重礼包";else f="";i='<div class="tips-rules">                                <span class="rules">                                    <span class="gift-list">                                    '+s+"                                    </span>                                </span>                                "+r+"                            </div>",t+=""==f?'<i class="gift gift-old" data-type="0">                                    <span class="gift-kind old-pack">                                        <span class="gift1">礼</span>                                    </span>'+i+"                                 </i>":'<i class="gift" data-type="0">                        <span class="gift-kind">                            <span class="gift1">礼</span>                            <span class="gift2">'+f+"</span>                        </span>"+i+"                     </i>"}return e.PolicyLabel.botao&&(t+='<i class="botaoPreference" data-type="5">首住优惠 <div class="tips-rules">\n                                    <span class="tip-info">该政策仅支持每位预订人享受一晚特价</span>\n                                </div></i>'),t},compare:function(e){return function(t,a){return t[e]-a[e]}},newgetPolicyStatusHtml:function(e){return 2===e.BookType?'<div class="policy-tag">                                            <span class="online changed">在线付                                            </span>                                        </div>':1===e.BookType?'<div class="policy-tag">                                            <span class="danbao">担&nbsp;&nbsp;&nbsp;保                                            </span>                                        </div>':0===e.BookType?' <div class="policy-tag"><span class="arrive-pay">到店付</span></div>':' <div class="policy-tag"><span></span></div>'},getPolicyStatusHtml:function(e){return 0===e.danbaoType?' <dd class="policy-tag"><span class="arrive-pay">到店付</span></dd>':3===e.danbaoType&&3!==e.policyType?'<dd class="policy-tag">                                            <span class="online">在线付                                                <div class="tips-rules">                                                    <span class="rules">在线付</span>                                                    <span class="tip-info">预订该房型，需要您预先在网上支付房费，预订成功后酒店会为您保留房间，抵达酒店时无需再支付房费，直接办理入住即可。</span>                                                </div>                                            </span>                                        </dd>':1==e.isGuarantee&&0!=e.danbaoType?'<dd class="policy-tag">                                            <span class="danbao">担&nbsp;&nbsp;&nbsp;保                                                <div class="tips-rules">                                                    <span class="rules">担保</span>                                                    <span class="tip-info">房型空房不多，酒店需要您提供信用卡担保进行预订。</span>                                                    <div class="intro">                                                        <p>什么是“信用卡担保”？</p>                                                        <div class="answer">                                                            我们会预先冻结相应的保证金，您实际入住后，保证金会在您退房后的3-5个工作日内解冻并回到您的信用卡中。                                                        </div>                                                    </div>                                                </div>                                            </span>                                        </dd>':' <dd class="policy-tag"><span></span></dd>'},getBtnTypeByPolicy:function(e){var t=0,a=e.isCanYuDing,n=e.policyType,i=e.groupBuyUrl;switch(0===a&&3===n&&(i?(e.groupBuyUrlId=this.getUrlId(),t=6):t=7),a){case!0:t=1;break;case!1:t=3}return t},getBtnTypeByMemberVip:function(e){return this.getBtnTypeByPolicy(e)},isMemberLogin:function(){var e=fish.cookie.get("us","userid")||fish.cookie.get("cnUser","userid");return!(!e||""===e||"0"===e)},getCookieDomain:function(){return location.hostname.match(/^(\d+\.\d+\.\d+\.\d+)|(localhost)$/)?location.hostname:/.*(\..*\..*)$/.exec(location.hostname)[1]},_apiSubmitUrl:function(e,t,a,n){var i="/book1.html?HotelId=",o=$("#startTime").val(),s=$("#endTime").val();return 0===n?(i=i+e+"&RoomTypeId="+t,i+="&ComeDate="+o+"&LeaveDate="+s,i+="&PolicyId="+a):i=i+e+"&RoomTypeId="+t+"&ComeDate=_comeDate&LeaveDate=_leaveDate&HotelType=&PolicyId="+a,i},apiSetCookies:function(e,t){var a,n,i;if(window.localStorage)if(localStorage.getItem("GnHotelData")||localStorage.getItem("CnHotelDate")){var o;if(localStorage.getItem("GnHotelData"))(o=JSON.parse(localStorage.getItem("GnHotelData"))).CnHotelComeDate=e,o.CnHotelLeaveDate=t;else(o=JSON.parse(localStorage.getItem("CnHotelDate"))).CnHotelComeDate=e,o.CnHotelLeaveDate=t}else{a=encodeURIComponent("北京"),n="53",i="0";encodeURIComponent(a)}else"undefined"!==a&&"null"!==a&&a||(a=encodeURIComponent("北京"),n="53",i="0",fish.cookie.set({days:-1,name:"CnHotelData",value:"",path:"/"}),fish.cookie.set({domain:getCookieDomain(),name:"CnHotelData",value:"CnHotelComeDate="+e+"&CnHotelLeaveDate="+t+"&CnHotelCity="+encodeURIComponent(a)+"&CityType=0&CityId=53",days:1,path:"/",encode:!1}))},dateDiff:function(e,t){var a,n,i;return a=e.split("-"),n=new Date(a[1]+"-"+a[2]+"-"+a[0]),a=t.split("-"),i=new Date(a[1]+"-"+a[2]+"-"+a[0]),parseInt(Math.abs(n-i)/1e3/60/60/24)},autoZero:function(e){return e<10?"0"+e:e},younger_time:function(e){if(e){var t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return t+"-"+this.autoZero(a)+"-"+this.autoZero(n)}},bookChange:function(e,t,a){var n="";if(a)n+='<p class="change_detail">抱歉，您预订的房型已不可订，请更换其他房型或日期</p>';else for(var i=0;i<e.length;i++){n+='<p class="change_detail">'+('<span class="date">'+e[i].Date+"</span>")+"&nbsp;的房间"+(e[i].Price.length>0?'价格由<span class="history">'+e[i].Price[0]+'</span>元变为<span class="new">'+e[i].Price[1]+"</span>元；":"")+(e[i].Canceltype.length>0?'<span class="history">'+e[i].Canceltype[0]+'</span>变为<span class="new">'+e[i].Canceltype[1]+"</span>；":"")+(e[i].Breakfast.length>0?'<span class="history">'+e[i].Breakfast[0]+'</span>变为<span class="new">'+e[i].Breakfast[1]+"</span>；":"")+"</p>"}var o='<div class="message">';if(e.length>10&&(o='<div class="message" style="overflow-y:scroll">'),!0===a)var s='<div class="keding">\n                        <div class="tips-info keding-con warning">\n                            '+o+"\n                                "+n+"\n                                </div>\n                        </div>\n                    </div>";else s='<div class="keding">\n                        <div class="tips-info keding-con warning">\n                            '+o+"\n                                "+n+'\n                                </div>\n                            <div class="pop-btn">\n                                <a href="javascript:;" class="cancel"><span>更换房型</span></a>\n                                <a href="javascript:;" class="ok"><span>继续预订</span></a>\n                            </div>\n                        </div>\n                    </div>';$(".keding").undelegate(".cancel","click"),$(".keding").undelegate(".ok","click");$.dialog2({title:'<i class="icon"></i><p class="hotel-p">尊敬的用户，非常抱歉， 您所选的房型存在以下调整：</p>',html:s,width:726,className:"keding",showBg:!0,bgClose:!0,btns:!1,afterClose:function(){$(".dialog2-wrap.keding").remove(),$(".dialog2-bg.keding-bg").remove(),$(".update-btn").trigger("click")},afterOpen:function(){$("body").delegate(".keding .cancel","click",function(){$(".update-btn").trigger("click"),$(".dialog2-wrap.keding.dialog2-show .dialog2-close").trigger("click")}),$("body").delegate(".keding .ok","click",function(){window.location.href=t})}}).show()}};exports.roomList=roomList},function(e,t,a){e.exports={"default":a(82),__esModule:!0}},function(e,t,a){a(83),a(96),e.exports=a(34).f("iterator")},function(e,t,a){"use strict";var n=a(84)(!0);a(44)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,a=this._i;return a>=t.length?{value:undefined,done:!0}:(e=n(t,a),this._i+=e.length,{value:e,done:!1})})},function(e,t,a){var n=a(24),i=a(25);e.exports=function(e){return function(t,a){var o,s,r=String(i(t)),l=n(a),c=r.length;return l<0||l>=c?e?"":undefined:(o=r.charCodeAt(l))<55296||o>56319||l+1===c||(s=r.charCodeAt(l+1))<56320||s>57343?e?r.charAt(l):o:e?r.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},function(e,t,a){var n=a(86);e.exports=function(e,t,a){if(n(e),t===undefined)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,i){return e.call(t,a,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,a){"use strict";var n=a(48),i=a(20),o=a(33),s={};a(9)(s,a(11)("iterator"),function(){return this}),e.exports=function(e,t,a){e.prototype=n(s,{next:i(1,a)}),o(e,t+" Iterator")}},function(e,t,a){var n=a(3),i=a(18),o=a(29);e.exports=a(4)?Object.defineProperties:function(e,t){i(e);for(var a,s=o(t),r=s.length,l=0;r>l;)n.f(e,a=s[l++],t[a]);return e}},function(e,t,a){var n=a(50);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,a){var n=a(10),i=a(91),o=a(92);e.exports=function(e){return function(t,a,s){var r,l=n(t),c=i(l.length),d=o(s,c);if(e&&a!=a){for(;c>d;)if((r=l[d++])!=r)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===a)return e||d||0;return!e&&-1}}},function(e,t,a){var n=a(24),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,a){var n=a(24),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},function(e,t,a){var n=a(2).document;e.exports=n&&n.documentElement},function(e,t,a){var n=a(5),i=a(95),o=a(30)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,a){var n=a(25);e.exports=function(e){return Object(n(e))}},function(e,t,a){a(97);for(var n=a(2),i=a(9),o=a(28),s=a(11)("toStringTag"),r="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<r.length;l++){var c=r[l],d=n[c],p=d&&d.prototype;p&&!p[s]&&i(p,s,c),o[c]=o.Array}},function(e,t,a){"use strict";var n=a(98),i=a(99),o=a(28),s=a(10);e.exports=a(44)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=undefined,i(1)):i(0,"keys"==t?a:"values"==t?e[a]:[a,e[a]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,a){e.exports={"default":a(101),__esModule:!0}},function(e,t,a){a(102),a(108),a(109),a(110),e.exports=a(8).Symbol},function(e,t,a){"use strict";var n=a(2),i=a(5),o=a(4),s=a(26),r=a(47),l=a(103).KEY,c=a(19),d=a(31),p=a(33),u=a(21),m=a(11),f=a(34),h=a(35),v=a(104),g=a(105),y=a(18),_=a(16),b=a(10),$=a(27),w=a(20),C=a(48),T=a(106),k=a(107),D=a(3),S=a(29),I=k.f,P=D.f,x=T.f,O=n.Symbol,j=n.JSON,M=j&&j.stringify,E=m("_hidden"),L=m("toPrimitive"),B={}.propertyIsEnumerable,A=d("symbol-registry"),N=d("symbols"),H=d("op-symbols"),R=Object.prototype,F="function"==typeof O,U=n.QObject,z=!U||!U.prototype||!U.prototype.findChild,W=o&&c(function(){return 7!=C(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,a){var n=I(R,t);n&&delete R[t],P(e,t,a),n&&e!==R&&P(R,t,n)}:P,q=function(e){var t=N[e]=C(O.prototype);return t._k=e,t},G=F&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},V=function(e,t,a){return e===R&&V(H,t,a),y(e),t=$(t,!0),y(a),i(N,t)?(a.enumerable?(i(e,E)&&e[E][t]&&(e[E][t]=!1),a=C(a,{enumerable:w(0,!1)})):(i(e,E)||P(e,E,w(1,{})),e[E][t]=!0),W(e,t,a)):P(e,t,a)},Y=function(e,t){y(e);for(var a,n=v(t=b(t)),i=0,o=n.length;o>i;)V(e,a=n[i++],t[a]);return e},Z=function(e){var t=B.call(this,e=$(e,!0));return!(this===R&&i(N,e)&&!i(H,e))&&(!(t||!i(this,e)||!i(N,e)||i(this,E)&&this[E][e])||t)},Q=function(e,t){if(e=b(e),t=$(t,!0),e!==R||!i(N,t)||i(H,t)){var a=I(e,t);return!a||!i(N,t)||i(e,E)&&e[E][t]||(a.enumerable=!0),a}},J=function(e){for(var t,a=x(b(e)),n=[],o=0;a.length>o;)i(N,t=a[o++])||t==E||t==l||n.push(t);return n},K=function(e){for(var t,a=e===R,n=x(a?H:b(e)),o=[],s=0;n.length>s;)!i(N,t=n[s++])||a&&!i(R,t)||o.push(N[t]);return o};F||(r((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:undefined),t=function(a){this===R&&t.call(H,a),i(this,E)&&i(this[E],e)&&(this[E][e]=!1),W(this,e,w(1,a))};return o&&z&&W(R,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",function(){return this._k}),k.f=Q,D.f=V,a(52).f=T.f=J,a(36).f=Z,a(51).f=K,o&&!a(17)&&r(R,"propertyIsEnumerable",Z,!0),f.f=function(e){return q(m(e))}),s(s.G+s.W+s.F*!F,{Symbol:O});for(var X="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;X.length>ee;)m(X[ee++]);for(var te=S(m.store),ae=0;te.length>ae;)h(te[ae++]);s(s.S+s.F*!F,"Symbol",{"for":function(e){return i(A,e+="")?A[e]:A[e]=O(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in A)if(A[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),s(s.S+s.F*!F,"Object",{create:function(e,t){return t===undefined?C(e):Y(C(e),t)},defineProperty:V,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:K}),j&&s(s.S+s.F*(!F||c(function(){var e=O();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))})),"JSON",{stringify:function(e){for(var t,a,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(a=t=n[1],(_(t)||e!==undefined)&&!G(e))return g(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!G(t))return t}),n[1]=t,M.apply(j,n)}}),O.prototype[L]||a(9)(O.prototype,L,O.prototype.valueOf),p(O,"Symbol"),p(Math,"Math",!0),p(n.JSON,"JSON",!0)},function(e,t,a){var n=a(21)("meta"),i=a(16),o=a(5),s=a(3).f,r=0,l=Object.isExtensible||function(){return!0},c=!a(19)(function(){return l(Object.preventExtensions({}))}),d=function(e){s(e,n,{value:{i:"O"+ ++r,w:{}}})},p=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!l(e))return!0;if(!t)return!1;d(e)}return e[n].w},onFreeze:function(e){return c&&p.NEED&&l(e)&&!o(e,n)&&d(e),e}}},function(e,t,a){var n=a(29),i=a(51),o=a(36);e.exports=function(e){var t=n(e),a=i.f;if(a)for(var s,r=a(e),l=o.f,c=0;r.length>c;)l.call(e,s=r[c++])&&t.push(s);return t}},function(e,t,a){var n=a(50);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,a){var n=a(10),i=a(52).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return s.slice()}}(e):i(n(e))}},function(e,t,a){var n=a(36),i=a(20),o=a(10),s=a(27),r=a(5),l=a(45),c=Object.getOwnPropertyDescriptor;t.f=a(4)?c:function(e,t){if(e=o(e),t=s(t,!0),l)try{return c(e,t)}catch(a){}if(r(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,a){a(35)("asyncIterator")},function(e,t,a){a(35)("observable")},function(e,t,a){e.exports={"default":a(112),__esModule:!0}},function(e,t,a){a(113);var n=a(8).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},function(e,t,a){var n=a(26);n(n.S+n.F*!a(4),"Object",{defineProperty:a(3).f})},function(e,t,a){"use strict";function n(e){var t;switch(new Date(e.split("-")[0],e.split("-")[1]-1,e.split("-")[2]).getDay()){case 1:t="周一";break;case 2:t="周二";break;case 3:t="周三";break;case 4:t="周四";break;case 5:t="周五";break;case 6:t="周六";break;case 0:t="周日"}return t}t.__esModule=!0;t.viewButton={show:function(e){$("#id_yd_tip").length||($("body").append('<div id="id_yd_tip" class="yd_tip none"><div class="hd"></div><div class="tipBG"><div class="txt"></div></div></div>'),fish.on("click",function(e){var t=fish.all("#id_yd_tip"),a=fish.getTarget(e);if(0!==t.length&&0!==fish.one(t[0]).offset().left){do{if("id_yd_tip"===a.id||a.className&&a.className.indexOf("look")>-1||a.className&&(a.className.indexOf("date")>-1||a.className.indexOf("calendar-panel")>-1))return;a=a.parentNode||null}while(a);t.addClass("none")}},document));var t,a=e.offset().left,i=e.offset().top,o=e.width(),s=(e.height(),e.data("hotelid"),e.data("roomid")),r=e.data("policyid"),l=(e.data("policytype"),e.data("specifichousing")),c=e.data("housingcount"),d=e.data("freedays"),p=e.data("advdays"),u=e.data("nhref"),m=(e.data("_htxt"),e.data("rstates")?(e.data("rstates")+"").split(";"):[]),f=e.data("rundecided")?e.data("rundecided").split(";"):[],h=e.data("comedate"),v=fish.parseTime(h,{days:m.length}),g=e.data("iscanyuding"),y="",_="";switch(g){case 3:case 4:y="",_='<p class="boxTit">选择时间段内存在不可预订时间，请重新选择！</p>\n                    <div class="errShow">'+L(h,m,f)+"</div>";break;default:_="<p class='boxTit'></p>";var b=c;5===g&&0!==parseInt(p,10)?y='<p class="tipCount">很抱歉，该房型需提前'+p+'天预订，当前时间只能预订<span style="color:#f60;">'+fish.parseTime(new Date,{days:parseInt(p,10)})+"</span>之后的房间。</p>":6===g&&0!==l&&("1"===l?b=c:"3"===l&&(fish.parseDate(v)-fish.parseDate(h))/1e3/60/60/24%c!=0&&(y='<p class="tipCount">预订需连住'+b*c+"晚，您可以修改入离日期进行预订哟~</p>")),0!==b&&1!==b&&(y='<p class="tipCount">预订需连住'+b+"晚，您可以修改入离日期进行预订哟~</p>")}t='<p class="tipCount">'+y+'</p><table><thead><tr><th>入住:</th><th>离店:</th></tr></thead><tbody><tr><td width="128px"><input type="text" id="pop_from" autocomplete="off" class="date" maxlength="20" value="'+fish.parseTime(new Date)+'"><label for="pop_from" id="checkDate01" class="checkLabel">'+n(fish.parseTime(new Date))+'</label></td> <td width="128px"><input type="text" id="pop_to" autocomplete="off" class="date" value="'+fish.parseTime(new Date,{days:1})+'"><label for="pop_to" id="checkDate02" class="checkLabel">'+n(fish.parseTime(new Date,{days:1}))+'</label></td><td><a id="rebook" href="javascript:void(0);"  class="notBtn">预订</a></td></tr></tbody> </table>'+_+'<div class="errShow" style="margin-top:10px;"></div>',fish.dom("#id_yd_tip .txt").innerHTML=t,fish.one("#rebook").on("click",function(e){if(!fish.one(this).hasClass("notBtn")){fish.preventDefault(e);var t=fish.one(this).attr("href");location.href=t}});var w=fish.all("#id_yd_tip");w.removeClass("none"),w[0].style.left=a-(fish.all("#id_yd_tip").width()-o)+"px",w[0].style.top=i+e.height()+10+"px";var C=fish.one("#pop_from"),T=fish.one("#pop_to"),k=fish.parseTime(new Date,{days:58});e=fish.one("#rebook");var D="",S="",I=!1,P=!1,x=fish.one("#txtCityId").val();"395"!==x&&"396"!==x||(k=fish.parseTime(new Date,{months:6})),parseInt(p,10)?(D=fish.parseTime(new Date,{days:parseInt(p,10)}),parseInt(p,10)):D=fish.parseTime(h);for(var O=0;O<f.length;O++)I||"3"!==g&&"4"!==g||"1"===m[O]||"1"===f[O]||(D=fish.parseTime(h,{days:O}),I=!0);switch(l){case"0":S=fish.parseTime(D,{days:1});break;case"1":S=fish.parseTime(D,{days:parseInt(HousingCount,10)});break;case"2":S=fish.parseTime(D,{days:parseInt(HousingCount,10)+parseInt(d,10)});break;case"3":S=fish.parseTime(D,{days:parseInt(HousingCount,10)})}C&&C.val(D),T&&(fish.parseDate(v).getTime()>fish.parseDate(S).getTime()?fish.parseDate(v).getTime()>fish.parseDate(D).getTime()?T.val(fish.parseTime(v)):T.val(fish.parseTime(D,{days:1})):fish.parseDate(S).getTime()>fish.parseDate(D).getTime()?T.val(fish.parseTime(S)):T.val(fish.parseTime(D,{days:1})));var j=new $.Calendar({monthNum:"2",startDate:fish.parseTime(new Date),endDate:k}),M=new $.Calendar({monthNum:"2",endDate:k});function E(){var t,a,n,i,o=C.val(),u=T.val(),m=(fish.parseDate(u)-fish.parseDate(o))/1e3/60/60/24;if(m>20&&0===parseInt(l)&&c<20)return fish.all(".errShow").html('<p style="color:#ff7800">如果您需要在酒店入住20天以上，请致电95711，我们会竭诚为您服务</p>'),e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),void e.attr("target","");if(0!==parseInt(p)&&fish.parseDate(o)<fish.parseDate(fish.parseTime(new Date),{days:parseInt(p,10)}))return e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),void e.attr("target","");if(0!==parseInt(l)){if(1===parseInt(l)&&m!==parseInt(c,10))return e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),void e.attr("target","");if(2===parseInt(l)&&m<parseInt(c,10)+parseInt(d,10))return e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),void e.attr("target","");if(3===parseInt(l)&&m%parseInt(c,10)!=0)return e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),void e.attr("target","")}t=fish.cookie.get("us","userid")||fish.cookie.get("cnUser","userid"),a="",n=settings.hotelid,i="",settings.ghotelid>0?(n=settings.ghotelid,i=settings.policyPriceInfo.gurl):(n=settings.hotelid,i=settings.policyPriceInfo.url),t=t&&""!==t&&0!=t&&"-1"!==t?t:"",a=i+"?","172.16.2.49:81"===location.host&&(a="http://172.16.2.22:82/RoomPolicyPriceHandler.ashx?"),a+="HotelId="+n+"&RoomId="+s+"&PolicyId="+r+"&ComeDate="+C.val()+"&LeaveDate="+T.val()+"&Plant=1&ResFormat=json&MemberId="+t+"&IsByPromo=1&jsoncallback=api_policy&n="+Math.round(1e8*Math.random()),e.html("查询中"),setTimeout(function(){fish.ajax({url:a,type:"script"})},500)}function L(e,t,a){var n,i=fish.all(".errShow");if(i.length>0){if(t.length>20)return"<p style='color:#ff7800'>如果您需要在酒店入住20天以上，请致电95711，我们会竭诚为您服务</p>";i.html("inner","")}var o=0,s="<ul class='dateList clearfix'>",r="",l=t,c=a;n=l.length/7>1?l.length+Math.ceil(l.length/7):l.length+1;for(var d=0;d<n;d++)if(d%8==0)r+="<li style='color:#999;'>日期<br/>房态</li>";else{var p=fish.parseTime(e,{days:o}).split("-"),u=void 0;u="1"===c[o]?'<span style="color:#f60;">未定</span>':"1"===l[o]?'<span style="color:#f60;">满房</span>':'<span style="color:#666;">√</span>',r+="<li>"+p[1]+"-"+p[2]+"<br/>"+u+"</li>",o++}return s+=r+"</ul>",B(e,l.length)+s}function B(e,t){var a,n=e.split("-"),i=n[0],o=parseInt(n[1],10)-1+"",s=n[2],r=new Date(i,o,s).getDay(),l="<ul class='dateListTitle clearfix'>",c="<li>&nbsp;</li>";a=t>=7?7:t;for(var d=0;d<a;d++){var p=r+d-7>0?r+d-7:r+d;switch(p){case 1:p="一";break;case 2:p="二";break;case 3:p="三";break;case 4:p="四";break;case 5:p="五";break;case 6:p="六";break;default:p="日"}c+=d===a-1?'<li class="borderLi">'+p+"</li>":"<li>"+p+"</li>"}return l+=c+"</ul>"}fish.one("#pop_from").on("focus",function(){j.pick({elem:this,fn:function(e,t,a){var i;i=fish.parseTime(fish.one("#pop_from").val())>=fish.parseTime(fish.one("#pop_to").val())?fish.parseTime(fish.one("#pop_from").val(),{days:1}):fish.parseTime(fish.one("#pop_to").val()),fish.one("#pop_to").val(i),j.pick({mode:"rangeTo",startDate:fish.parseTime(fish.one("#pop_from").val(),{days:1}),currentDate:[fish.parseTime(fish.one("#pop_from").val()),i],elem:fish.dom("#pop_to"),fn:function(){E(),fish.one("#checkDate02").html(n(fish.trim(fish.one("#pop_to").val())))}}),E(),fish.one("#checkDate01").html(n(fish.trim(fish.one("#pop_from").val())))}})}),fish.one("#pop_to").on("focus",function(){M.pick({elem:this,mode:"rangeTo",startDate:fish.parseTime(fish.one("#pop_from").val(),{days:1}),currentDate:[fish.parseTime(fish.one("#pop_from").val()),fish.parseTime(fish.one("#pop_to").val())],fn:function(){fish.one("#checkDate02").html(n(fish.trim(fish.one("#pop_to").val()))),E()}})}),E(),window.api_policy=function(t){if(e.html("预订"),"I0000"!==(t.Error||t.ErrorInfo).ErrorCode)return fish.one(".boxTit").html("很抱歉！暂无可用房型"),void e.addClass("notBtn").removeClass("yd_butm");var a=t.RoomInfo.PolicyInfo[0].IsCanYuDing,n=t.RoomInfo.PolicyInfo[0].RoomStatus.split(";"),i=t.RoomInfo.PolicyInfo[0].RoomUndecided.split(";"),o=fish.one(".errShow"),s=t.RoomInfo.PolicyInfo[0].LaterReserveTime;if(P&&o.html("inner",L(C.val(),n,i)),0===t.RoomInfo.PolicyInfo[0].IsCanYuDing){var r=u.replace("_comeDate",C.val()).replace("_leaveDate",T.val()),d="";fish.one("#stid").length&&(d=fish.one("#stid").attr("value")),r=r+"&stid="+d,e.attr("href",r),e.attr("target","_blank"),e.addClass("yd_butm").removeClass("notBtn"),fish.one(".boxTit").html("")}else{var m="";if(6===a&&0!==parseInt(l))1===l?(m=c,fish.one(".boxTit").html("很抱歉！此间房型需连住"+p+"晚。")):3===l&&(fish.parseDate(C.val())-fish.parseDate(T.val()))/1e3/60/60/24%c!=0&&fish.one(".boxTit").html("很抱歉！此间房型需连住"+m*c+"晚,您可以修改入离日期进行预订哟~");else if(5===a)if(0===parseInt(p)){if(""!==s&&s&&s.indexOf("1900")<0&&s.indexOf("0001-1-1")<0){var f="";f=s.indexOf("T")>0?s.split("-")[1]+"月"+s.split("-")[2].split("T")[0]+"日"+s.split("T")[1].split(":")[0]+"点前预订":s.split("-")[1]+"月"+s.split("-")[2].split(" ")[0]+"日"+s.split(" ")[1].split(":")[0]+"点前预订",fish.one(".boxTit").html("很抱歉！此间房型需在"+f)}}else fish.one(".boxTit").html("很抱歉！此间房型需提前"+p+"天预订！");else fish.one(".boxTit").html("很抱歉！此期间该房型部分不可订。");e.addClass("notBtn").removeClass("yd_butm"),e.attr("href","javascript:void(0)"),e.attr("target","")}P=!0}}}},function(e,t,a){"use strict";function n(){$(".aveBox").length||($("body").append('<div class="aveBox aveBoxPos"></div>'),$("body").append('<div id="apiShowPos" style="display: none;"><div class="apiShowBox"><div class="ImgBox"><img id="apiShowPos_img" src="//img1.40017.cn/cn/comm/images/cn/public/transparent_loading_v2.gif"></div></div></div>'))}t.__esModule=!0;t.viewDatePrice={show:function(e,t){n();var a=fish.all(".aveBox.aveBoxPos"),i=void 0,o=void 0,s=void 0,r=void 0;a.length>0&&(0===a[0].getElementsByTagName("table").length&&(r=e.data("hotelid").split("|"),o=e.data("type"),s=e.data("hk"),e.data("hkCurrency"),function(e,t,a,n,i,o,s,r,l,c,d,p,u,m,f,h){var v=e,g=n.split(";"),y=i.split(";"),_=o.split(";"),b=s.split(";"),w=r.split(";"),C=f.split(";"),T=h.split(";"),k=0,D="",S=!1,I="",P=0,x="",O="";O=""!==(x=m)?'<span class="neiwaibin_policy"><i class="neiwaibin_policy_icon"></i><div class="neiwaibin_policy_des"><div class="title">适用客人：</div><div class="des">'+x+"</div></div></span>":"";var j='<div class="api_list"><ul class="api_tips clearfix">{tips}</ul><ul class="api_content_list clearfix">{content}</ul>{ga}'+("不可加床"!==p?'<span class="abed"><i></i>加床政策：'+p+"</span>":'<span class="abed"><i></i>加床政策：不可加床</span>')+O+"</div>";k=Math.ceil(y.length/7);for(var M=0;M<k;M++){D+="<li class='week'>第"+(M+1)+"周</li>";for(var E=0;E<7;E++){var L=fish.parseTime(v,{days:P}),B="",A="",N="",H="";b[P]&&(B="<p class={cname}>"+L.split("-")[1]+"-"+L.split("-")[2]+"</p>",B=l&&"hk"===l&&"1"!==b[P]&&"1"!==y[P]?B.replace("{cname}","gap"):B.replace("{cname}","nogap"),"1"===b[P]?A='<p class="f60">价格未定</p><p class="rbf">'+_[P].replace("无","无早").replace("无早","无")+"</p>":"1"===y[P]?A='<p class="f60">售完</p><p class="rbf">'+_[P].replace("无","无早").replace("无早","无")+"</p>":l&&"hk"===l?("1"===d?N='<p class="f60">HKD'+g[P]+"</p>":"2"===d?N='<p class="f60">NT$'+g[P]+"</p>":"3"===d?N='<p class="f60">MOP'+g[P]+"</p>":"4"===d&&(N='<p class="f60">$'+g[P]+"</p>"),S=!0,A="<p class='c333'>&yen;"+w[P]+"</p><p class='rbf'>"+_[P].replace("份","").replace("早","")+"早</p>"):A="<p class='f60'>&yen;"+w[P]+"</p><p class='rbf'>"+_[P].replace("份","").replace("早","")+"早</p>");var R=parseInt(C[P]),F=parseInt(T[P]);R>0&&F>0?H='<p class="lifan">返<i>&yen;'+C[P]+'</i></p><p class="lifan">减<i>&yen;'+T[P]+"</i></p>":R>0&&0==F?H='<p class="lifan">返<i>&yen;'+C[P]+"</i></p>":0==R&&F>0&&(H='<p class="lifan">减<i>&yen;'+T[P]+"</i></p>"),D+="<li>"+B+A+H+N+"</li>",P++}}S?"1"===d?I='<div class="ga_tip"><p>货币兑换：&yen;'+w[0]+"=HKD"+g[0]+'</p><p>温馨提示：<span style="color:#666;">此汇率仅供参考，您需要根据当天实际汇率，<span style="color:#b54800;font-weight:bold;">到酒店后用港币支付</span>房费。</span></p></div>':"2"===d?I='<div class="ga_tip"><p>货币兑换：&yen;'+w[0]+"=NT$"+g[0]+'</p><p>温馨提示：<span style="color:#666;">此汇率仅供参考，您需要根据当天实际汇率，<span style="color:#b54800;font-weight:bold;">到酒店后用台币支付</span>房费。</span></p></div>':"3"===d?I='<div class="ga_tip"><p>货币兑换：&yen;'+w[0]+"=MOP"+g[0]+'</p><p>温馨提示：<span style="color:#666;">此汇率仅供参考，您需要根据当天实际汇率，<span style="color:#b54800;font-weight:bold;">到酒店后用澳门币支付</span>房费。</span></p></div>':"4"===d&&(I='<div class="ga_tip"><p>货币兑换：&yen;'+w[0]+"=$"+g[0]+'</p><p>温馨提示：<span style="color:#666;">此汇率仅供参考，您需要根据当天实际汇率，<span style="color:#b54800;font-weight:bold;">到酒店后用美元支付</span>房费。</span></p></div>'):I="",fish.one(t).html(j.replace("{tips}",function(){for(var e="",t="<li></li>",a=void 0,n=0;n<7;n++){switch(a=fish.parseTime(v,{days:n}),new Date(a.split("-")[0],parseInt(a.split("-")[1],10)-1,a.split("-")[2]).getDay()+""){case"1":e="周一";break;case"2":e="周二";break;case"3":e="周三";break;case"4":e="周四";break;case"5":e="周五";break;case"6":e="周六";break;default:e="周日"}t+="<li>"+e+"</li>"}return t}()).replace("{content}",D).replace("{ga}",I)),($(".aveBoxPos .api_list .api_content_list li p.lijian").length||$(".aveBoxPos .api_list .api_content_list li p.lifan").length)&&$(".api_list").addClass("hasdis")}(t,a[0],r[0],r[1],r[2],r[3],r[4],r[5],o,0,s,r[6],r[7],r[8],r[9],r[10])),a[0].style.display="block",i=e.offset(),a[0].style.display="none",a[0].style.top=i.top+36+"px",a[0].style.left=i.left-242+12+"px",a[0].id="listPrice_"+Math.round(1e8*Math.random()),fish.all("#"+a[0].id).css("display:block;"))},hide:function(){var e=fish.all(".aveBox.aveBoxPos");e.length>0&&(e[0].style.display="none",e[0].innerHTML="")}}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.setTimeByRules=undefined;var _stringify=__webpack_require__(15),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function setTimeByRules(pageFlag){var nowHours=(new Date).getHours(),startDate,endDate;if(nowHours>4&&nowHours<19||"last"===pageFlag){var startDate=new Date((new Date).setDate((new Date).getDate())).Format("yyyy-MM-dd"),endDate=new Date((new Date).setDate((new Date).getDate()+1)).Format("yyyy-MM-dd"),localStorageInfo=eval("("+localStorage.getItem("GnHotelData")+")");if(null==localStorageInfo){$("#startTime").val(startDate),$("#endTime").val(endDate);var str={CnHotelComeDate:startDate,CnHotelLeaveDate:endDate},timeHistory=(0,_stringify2["default"])(str);localStorage.setItem("GnHotelData",timeHistory)}else{var subStartDate=new Date(localStorageInfo.CnHotelComeDate)-new Date(startDate),subEndDate=new Date(localStorageInfo.CnHotelLeaveDate)-new Date(endDate),mainSub=new Date(localStorageInfo.CnHotelLeaveDate)-new Date(localStorageInfo.CnHotelComeDate);if("last"===pageFlag&&nowHours<5)$("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(localStorageInfo.CnHotelLeaveDate);else{if(subStartDate<0||subEndDate<0){$("#startTime").val(startDate),$("#endTime").val(endDate),localStorageInfo.CnHotelComeDate=startDate,localStorageInfo.CnHotelLeaveDate=endDate;var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo);localStorage.setItem("GnHotelData",localStorageInfoString)}else $("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(localStorageInfo.CnHotelLeaveDate);if(mainSub<=0){var newLeave=new Date((new Date).setDate(new Date(localStorageInfo.CnHotelComeDate).getDate()+1)).Format("yyyy-MM-dd");$("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(newLeave),localStorageInfo.CnHotelComeDate=$("#startTime").val(),localStorageInfo.CnHotelLeaveDate=$("#endTime").val();var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo);localStorage.setItem("GnHotelData",localStorageInfoString)}}if(""===new Date(localStorageInfo.CnHotelLeaveDate)||"Invalid Date"===new Date(localStorageInfo.CnHotelComeDate)){$("#startTime").val(startDate),$("#endTime").val(endDate),localStorageInfo.CnHotelComeDate=$("#startTime").val(),localStorageInfo.CnHotelLeaveDate=$("#endTime").val();var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo);localStorage.setItem("GnHotelData",localStorageInfoString)}}}else if(nowHours<5&&"last"!==pageFlag){startDate=new Date(Date.now()-864e5).Format("yyyy-MM-dd"),endDate=(new Date).Format("yyyy-MM-dd"),$("#startTime").val(startDate),$("#endTime").val(endDate);var str={CnHotelComeDate:startDate,CnHotelLeaveDate:endDate},timeHistory=(0,_stringify2["default"])(str);localStorage.setItem("GnHotelData",timeHistory)}else{startDate=new Date((new Date).setDate((new Date).getDate()+1)).Format("yyyy-MM-dd"),endDate=new Date((new Date).setDate((new Date).getDate()+2)).Format("yyyy-MM-dd");var localStorageInfo=eval("("+localStorage.getItem("GnHotelData")+")");if(null==localStorageInfo){$("#startTime").val(startDate),$("#endTime").val(endDate);var str={CnHotelComeDate:startDate,CnHotelLeaveDate:endDate},timeHistory=(0,_stringify2["default"])(str);localStorage.setItem("GnHotelData",timeHistory)}else{var subStartDate=new Date(localStorageInfo.CnHotelComeDate)-new Date(startDate),subEndDate=new Date(localStorageInfo.CnHotelLeaveDate)-new Date(endDate),mainSub=new Date(localStorageInfo.CnHotelLeaveDate)-new Date(localStorageInfo.CnHotelComeDate);if(subStartDate<0||subEndDate<0){$("#startTime").val(startDate),$("#endTime").val(endDate),localStorageInfo.CnHotelComeDate=startDate,localStorageInfo.CnHotelLeaveDate=endDate;var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo);localStorage.setItem("GnHotelData",localStorageInfoString)}else $("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(localStorageInfo.CnHotelLeaveDate);if(mainSub<=0){var newLeave=new Date((new Date).setDate(new Date(localStorageInfo.CnHotelComeDate).getDate()+1)).Format("yyyy-MM-dd");$("#startTime").val(localStorageInfo.CnHotelComeDate),$("#endTime").val(newLeave);var localStorageInfoString=(0,_stringify2["default"])(localStorageInfo);localStorage.setItem("GnHotelData",localStorageInfoString)}}}}exports.setTimeByRules=setTimeByRules},function(e,t){var a,n;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,n=0;a<e.length;a++,n+=8)t[n>>>5]|=e[a]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?t.push(a.charAt(i>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&t.push((a.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|a.indexOf(e.charAt(n))>>>6-2*i);return t}},e.exports=n},function(e,t){function a(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(a(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&a(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,a){"use strict";t.__esModule=!0,t.comments=undefined;var n=l(a(15)),i=a(120),o=a(57),s=l(a(37)),r=a(6);function l(e){return e&&e.__esModule?e:{"default":e}}var c={colorIndex:0,initFlag:!0,tagInit:!0,initFlag1:!0,grade:1,commentType:0,mainTagId:"",subTagId:"",tagType:0,ranktype:1,page:1,sourceid:settings.hotelid,hightLight:!1,roomTypeId:"",travelTypeId:"",tcTotal:-1,tcCommentData:null,init:function(){var e=this,t=$("#comments"),a=$(".comments-tab-item",t);$(".comments-tab-nav li.common-tab",t);0===settings.isPaChong?e.getComments(a.eq(0)):(e.initFlag1=!1,e.initFlag=!1),$(".comments-tab-nav ul.first").on("click","li",function(t){e.tagInit=!1,e.initFlag=!1,e.highLight=!1,$("#comments .comments-tags ol li").removeClass("chosen");var n=$(this).index(),i=a.eq(n);i.addClass("active").siblings(".comments-tab-item").removeClass("active"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCcomment","常规标签","选择常规标签",$(this).text().substring(0,$(this).text().indexOf("("))),e.commentType=$(this).data("commenttype")||0,e.mainTagId=$(this).data("maintagid")||"",e.subTagId=$(this).data("subtagid")||"",$("#roomTypeWrapper").css("display","block"),$("#travelTypeDrop").css("display","block"),!$(this).hasClass("active")&&e.getComments(i),$(this).addClass("active").siblings("li").removeClass("active")}),$("#comments .comments-tags ol").on("click","li",function(a){if(e.tagInit=!0,$("#roomTypeWrapper").css("display","block"),$("#travelTypeDrop").css("display","block"),$(this).hasClass("chosen"))e.page=1,e.tagType=0,e.commentType=$(this).data("commenttype")||0,e.mainTagId=$(this).data("maintagid")||"",e.subTagId=$(this).data("subtagid")||"",$(this).removeClass("chosen").siblings("li").removeClass("chosen"),$(".comments-tab-nav ul.first li").eq(0).trigger("click");else{e.initFilterTypeValue(),e.commentType=$(this).data("commenttype")||0,e.mainTagId=$(this).data("maintagid")||"",e.subTagId=$(this).data("subtagid")||"",e.page=1,e.tagType=$(this).data("type"),$(this).addClass("chosen").siblings("li").removeClass("chosen"),$(".comments-tab-nav ul.first li").removeClass("active").eq(0).addClass("active");var n=$(".comments-tab-item",t).eq(4).addClass("active").siblings(".comments-tab-item").removeClass("active").end();e.loading(n),e.ajaxComments(n,!1),e.highLight=!0}window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCcomment","语义标签","选择语义标签",$(this).text().substring(0,$(this).text().indexOf("（")))}),$(window).scroll(function(){if(1!==window.isCommentCanSee){var t=$(window).height();$("#comments").offset().top-$(window).scrollTop()<=t&&(window.isCommentCanSee=1,e.initTravelType())}}),e.clickSortType()},initFilterTypeValue:function(){this.travelTypeId&&($("#travelTypeDrop .title").html('全部出游类型<i class="icon"></i>'),this.travelTypeId=""),this.roomTypeId&&($("#roomTypeWrapper .title").html('全部房型<i class="icon"></i>'),this.roomTypeId="")},initRoomType:function(e,t,a){var n=$("#roomTypeWrapper"),i=n.find("ol"),o=this;if("0000"!==t.rspCode)n.remove();else{var s=a.room||[];if(0===s.length||1===s.length&&"全部房型"===s[0].roomTypeName)return void n.remove();var r=s.map(function(e){return"<li data-id='"+e.roomTypeId+"' class=single title='"+e.roomTypeName+"'>"+e.roomTypeName+"</li>"}).join("");i.html(r),n.on("click",function(e){if(o.tagInit=!0,$(e.target).closest("p").length>0)i.toggleClass("none"),n.find(".title").toggleClass("show-more");else{if($(e.target).hasClass("chosen")||!$(e.target).hasClass("single"))return;$(".comments-tags li").removeClass("chosen"),o.commentType=0,o.mainTagId="",o.subTagId="",o.grade=1,setTimeout(function(t){$(e.target).closest("li.single").addClass("chosen").siblings("li.single").removeClass("chosen"),i.toggleClass("none"),n.find(".title").html($(e.target).closest("li.single").text()+'<i class="icon"></i>').toggleClass("show-more")},200),o.roomTypeId=$(e.target).closest("li.single").data("id")+"",o.commentType=0,o.mainTagId="",o.subTagId="",o.grade=1,$(".comments-tab-nav li.common-tab","#comments").removeClass("active").eq(0).addClass("active"),$(".comments-tab-item","#comments").removeClass("active").eq(0).addClass("active"),o.getComments($(".comments-tab-item.active")),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCcomment","“房型政策”筛选栏","选择具体房型政策",$(e.target).closest("li.single").text())}})}$(document).on("click",function(e){$(e.target).closest(n).length||(n.find(".title").removeClass("show-more"),i.addClass("none"))})},clickSortType:function(){var e=$("#sortTypeDrop"),t=e.find("ol");t.addClass("none");var a=this;e.on("click",function(n){if(a.tagInit=!0,$(n.target).closest("p").length>0)t.toggleClass("none"),e.find(".title").toggleClass("show-more");else{if($(n.target).hasClass("chosen")||!$(n.target).hasClass("single"))return;$(".comments-tags li").removeClass("chosen"),a.commentType=0,a.mainTagId="",a.subTagId="",setTimeout(function(a){$(n.target).closest("li.single").addClass("chosen").siblings("li.single").removeClass("chosen"),t.toggleClass("none"),e.find(".title").html($(n.target).closest("li.single").text()+'<i class="icon"></i>').toggleClass("show-more")},200),a.ranktype=$(n.target).closest("li.single").data("ranktype")+"",a.commentType=0,a.mainTagId="",a.subTagId="",$(".comments-tab-nav li.common-tab","#comments").removeClass("active").eq(0).addClass("active"),$(".comments-tab-item","#comments").removeClass("active").eq(0).addClass("active"),a.getComments($(".comments-tab-item.active")),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCcomment","“推荐排序”筛选栏","选择推荐排序",$(n.target).closest("li.single").text())}})},initTravelType:function(){var e=$("#travelTypeDrop"),t=e.find("ol"),a=this;commentsTravelType&&($.ajax({url:commentsTravelType.url+"?hotelid="+a.sourceid+"&antitoken="+(0,r.getantitoken)(),type:commentsTravelType.type,dataType:commentsTravelType.dataType,success:function(n){var i=n.response,o=i.header,s=i.body;if("0000"!==o.rspCode)e.remove();else{var r=s.list||[];if(0===r.length||1===r.length&&"全部出游类型"===r[0].tagName)return void e.remove();var l=r.map(function(e){return"<li data-id='"+e.tagId+"' class=single title='"+e.tagName+"'>"+e.tagName+"</li>"}).join("");t.html(l),e.on("click",function(n){if(a.tagInit=!0,$(n.target).closest("p").length>0)t.toggleClass("none"),e.find(".title").toggleClass("show-more");else{if($(n.target).hasClass("chosen")||!$(n.target).hasClass("single"))return;$(".comments-tags li").removeClass("chosen"),a.grade=1,setTimeout(function(a){$(n.target).closest("li.single").addClass("chosen").siblings("li.single").removeClass("chosen"),t.toggleClass("none"),e.find(".title").html($(n.target).closest("li.single").text()+'<i class="icon"></i>').toggleClass("show-more")},200),a.travelTypeId=$(n.target).closest("li.single").data("id")+"",a.grade=1,$(".comments-tab-nav li.common-tab","#comments").removeClass("active").eq(0).addClass("active"),$(".comments-tab-item","#comments").removeClass("active").eq(0).addClass("active"),a.getComments($(".comments-tab-item.active")),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPCcomment","“出游类型”筛选栏","选择具体出游类型",$(n.target).closest("li.single").text())}})}},fail:function(t){e.remove()}}),$(document).on("click",function(a){$(a.target).closest(e).length||(e.find(".title").removeClass("show-more"),t.addClass("none"))}))},getComments:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];(e||e.length)&&(this.wrapperIsLoading(e)||(this.page=1,this.loading(e),this.ajaxComments(e,!1,t)))},ajaxComments:function(e,t){var a=arguments.length>2&&arguments[2]!==undefined&&arguments[2],n=this,o="?hotelid="+n.sourceid+"&page="+n.page+"&pageSize=10&commentType="+n.commentType+"&roomTypeId="+n.roomTypeId+"&tripPurposeId="+n.travelTypeId+"&RankType="+n.ranktype+"&mainTagId="+n.mainTagId+"&subTagId="+n.subTagId+"&antitoken="+(0,r.getantitoken)();$.ajax({url:settings.comments.url+o,type:settings.comments.type,dataType:settings.comments.dataType,success:function(o){var s=o.response,r=s.header,l=s.body;if(n.tagInit){for(var c=l.dpTagList,d=c.filter(function(e,t,a){return 1==e.tagType}),p="",u=0,m=d.length;u<m;u++){var f=d[u];p+='\n                        <li class="common-tab '+(0==u?"active":"")+'" data-maintagid="'+(f.mainTagId||"")+'" data-commenttype="'+(f.commentType||0)+'" data-subtagid = "'+(f.subtagid||"")+'">'+d[u].tagName+"</li>\n                        "}$(".comments-tab-nav ul.first").html(p)}var h=parseInt(l.totalNum||0);if(-1===n.tcTotal)return n.tcTotal=h||0,n.tcCommentData=l,void n.ajaxComments(e,!1,a,!0);if(n.initFlag){if(n.initFlag=!1,i.summaryComment.build(l,h,n.tcCommentData),!s||n.isEmptyObject(s)||"0000"!==r.rspCode)return $("#comments .comments-score").html('<div class="no-score">"暂时还没有客官评分"</div>'),$("#comments .comments-tab").html('<div class="no-comment">预订可抢点评沙发，赶快<a href="#secondary-menu">预订</a>哦^_^</div>'),$("#comments .comments-tags").addClass("none"),void $(".score-tags-wrapper").addClass("nocomment");n.initRoomType(s,r,l),n.printScore(l,0);var v=c.filter(function(e,t,a){var n=e.tagType,i=e.polarity;return 0==n&&1==i}).sort(function(e,t){return t.tagNum-e.tagNum}),g=c.filter(function(e,t,a){var n=e.tagType,i=e.polarity;return 0==n&&-1==i}).sort(function(e,t){return t.tagNum-e.tagNum}).slice(0,4),y=[],_=10-g.length;for(u=0,m=v.length;u<m&&y.length!==_;u++){var b=n.renderTagDom(v[u],!0);b!==undefined&&y.push(b)}for(u=0,m=g.length;u<m;u++){var w=n.renderTagDom(g[u]);w!==undefined&&y.push(w)}y.length>0?$("#comments .comments-tags ol").html(y.join("")):$("#comments .comments-tags").addClass("none"),$(".comments-score .total-count").html("共"+l.totalNum+"人点评"),$("#menu-title .comment .total").html("("+l.totalNum+")"),l.totalNum<=5&&($(".score-tags-wrapper").addClass("none"),$("#comments .circle_percent").addClass("none"),$("#comments .comments-score .score-grade .total-count").addClass("no-scorenum"))}else if(!s||n.isEmptyObject(s)||"0000"!==r.rspCode)return"0"!==l.totalNum?$(".comments-tab-nav .all").html(l.totalNum):$(".comments-tab-nav .all").parent().addClass("none"),"0"!==l.goodNum?$(".comments-tab-nav .good").html(l.goodNum):$(".comments-tab-nav .good").parent().addClass("none"),"0"!==l.midNum?$(".comments-tab-nav .moderate").html(l.midNum):$(".comments-tab-nav .moderate").parent().addClass("none"),"0"!==l.badNum?$(".comments-tab-nav .negative").html(l.badNum):$(".comments-tab-nav .negative").parent().addClass("none"),"0"!==l.hasImgNum?$(".comments-tab-nav .has-pic").html(l.hasImgNum):$(".comments-tab-nav .has-pic").parent().addClass("none"),void e.html('<div class="no-comment">"暂时还没有客官点评"</div>');var C=l.pageInfo.totalPage;e.html(n.renderList(l.dpList,n.page,C)),$(".comments-img img").hover(function(){$(this).closest(".comments-img").data("id"),$(this).closest(".comments-img").children("a").length;n.showBigImg(this)},function(){n.hideImg()}),$(".pager a",e).attr({"data-grade":n.grade,"data-sourceid":n.sourceid}),n.pagerSkip(e),t&&n.scroll(),n.loadWebp()},error:function(){n.initFlag?(i.summaryComment.build(null),$("#comments .comments-score").html('<div class="no-score">"暂时还没有客官评分"</div>'),$("#comments .comments-tab").html('<div class="no-comment">"预订可抢点评沙发，赶快<a href="javascript:;">预订</a>哦^_^"</div>'),$("#comments .comments-tags").addClass("none")):e.html('<div class="no-comment">"网络异常，稍后再试哦~"</div>')}})},ajaxOtherComments:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],a=this;$.ajax({url:settings.comments.url,type:settings.comments.type,dataType:settings.comments.dataType,data:{param:(0,n["default"])({hotelid:a.sourceid+"",pageIndex:a.page,pageSize:10,sortType:0,tagId:a.grade,DpSite:2,roomTypeId:a.roomTypeId,tripPurposeId:a.travelTypeId,productType:"2"})},success:function(n){var i=$(".comments-tab-item").eq(5);if(0===n.data.gwerror){var o=JSON.parse(n.data.result).response,s=o.header,r=o.body;if(a.initFlag1){if(a.initFlag1=!1,t){if($("#comments .comments-score").html('<div class="no-score">"暂时还没有客官评分"</div>'),$("#comments .comments-tags").addClass("none"),!o||a.isEmptyObject(o)||"0000"!==s.rspCode)return $("#comments .comments-tab").html('<div class="no-comment">"预订可抢点评沙发，赶快<a href="#secondary-menu">预订</a>哦^_^"</div>'),void $(".score-tags-wrapper").addClass("nocomment");$(".comments-tab .comments-tab-nav .common-tab").removeClass("active").css("display","none").eq(5).css("display","block"),$("#roomTypeWrapper").css("display","none"),$("#travelTypeDrop").css("display","none"),i=$(".comments-tab-item").eq(0)}else if(!o||a.isEmptyObject(o)||"0000"!==s.rspCode)return $(".common-tab").eq(5).css("display","none"),$(".comments-score .total-count").html("共"+e+"人点评"),void $("#menu-title .comment .total").html("("+e+")");var l=parseInt(e)+parseInt(r.totalNum);$(".comments-score .total-count").html("共"+e+"人点评"),$("#menu-title .comment .total").html("("+l+")")}else if(!o||a.isEmptyObject(o)||"0000"!==s.rspCode)return void $(".common-tab").eq(5).css("display","none");$(".comments-tab-nav .others").html(r.totalNum),$(".common-tab").eq(5).css("display","block"),i.html(a.renderList(r.dpList,a.page,r.pageInfo.totalPage,!1)),$(".comments-img img").hover(function(){$(this).closest(".comments-img").data("id"),$(this).closest(".comments-img").children("a").length;a.showBigImg(this)},function(){a.hideImg()}),$(".pager a",i).attr({"data-grade":a.grade,"data-sourceid":a.sourceid}),a.pagerSkip(i),a.loadWebp()}}})},renderTagDom:function(e,t){if(!(e.tagName.indexOf("值得推荐")>-1||e.tagName.indexOf("待改善")>-1)){var a=e.tagName.split("(")[0];return t?'<li data-type="'+e.tagType+'" data-maintagid="'+e.mainTagId+'" data-commenttype="'+e.commentType+'" data-subtagid="'+e.subTagId+'"> '+a+"<span>"+e.tagNum+"</span></li>":'<li data-type="'+e.tagType+'"  data-maintagid="'+e.mainTagId+'" data-commenttype="'+e.commentType+'" data-subtagid="'+e.subTagId+'" class="bad" > '+a+"<span>"+e.tagNum+"</span></li>"}},isEmptyObject:function(e){return $.isEmptyObject(e)},printScore:function(e,t){var a="",n=e;null!==this.tcCommentData&&(n=this.tcCommentData);var i=n.degreeLevel.split("%")[0],s=Math.floor(i),r=parseFloat(e.starNum),l=n.serviceScoreAvgList.sort(function(e,t){var a=["酒店位置","酒店服务","酒店设施","酒店卫生"];return a.indexOf(e.serviceName)-a.indexOf(t.serviceName)}).map(function(e,t,a){return e.score});if(0===t){s&&('<div class="satisfy"><span class="number">'+s+"%</span>的用户满意</div>",'<div class="lists-item">周边环境:<span>'+l[0]+'</span></div>\n                        <div class="lists-item">酒店设施:<span>'+l[2]+'</span></div>\n                        <div class="lists-item">酒店服务:<span>'+l[1]+'</span></div>\n                        <div class="lists-item">房间卫生:<span>'+l[3]+"</span></div>"),a='<div class="score-grade">\n                        <div class="circle_percent" data-grade="'+r+'">\n                            <div class="percent">\n                                <span>'+r+'</span>/5分\n                            </div>\n                            <div class="circle"></div>\n                        </div>\n                        <div class="total-count"></div>\n                    </div>'}else a='<div class="score-grade">\n                        <div class="circle_percent" data-grade="'+r+'">\n                            <div class="percent">\n                                <span>'+r+'</span> 分\n                            </div>\n                            <div class="circle"></div>\n                        </div>\n                        <div class="score-txt">基于大数据综合评分</div>\n                    </div>';$(".comments-score").html(a);var c=$("#comments .circle_percent");if(0===r)return c.addClass("circle_percent_0"),void $(".percent",c).html("暂无满意度");$.browser.msie?c.addClass("circle_percent_num").addClass("circle_percent_"+10*r):(0,o.drawCirclePercent)(c,r)},loading:function(e){e.html('<div class="loading"></div>')},loadWebp:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if("function"==typeof loadWebp){var e=fish.all("#comments-tab img");loadWebp({attr:"orisrc",img:e,fn:function(){e.lazyLoad({attr:"orisrc"})}})}}),wrapperIsLoading:function(e){return'<div class="loading"></div>'===e.html()},renderList:function(e,t,a){var n=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3];if(!e||0===e.length)return'<div class="empty">暂无点评内容。</div>';for(var i=[],o=0;o<e.length;o++){var s=e[o];0===parseInt(s.DPUserLevel)?s.DPUserLevel=parseInt(s.DPUserLevel)+1:s.DPUserLevel=parseInt(s.DPUserLevel),i.push(this.renderComment(s,n))}return'<ul class="comments-list">'+i.join("")+"</ul>"+this.pager(t,a,"clearfix")},renderComment:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],a="";return a+=this.renderCommentAuthor(e),a='<li class="clearfix">'+(a+=this.renderCommentBody(e,t))+"</li>"},renderCommentAuthor:function(e){var t=e.dpUserName||"";t=t.substring(0,12);var a=e.memberHeaderImgUrl?e.memberHeaderImgUrl.replace(/http(s?):/,""):"";if("2"===e.dPSupplier){var n=(0,s["default"])(e.dpContent),i=n.substring(n.length-1);t=n.substring(0,6),a={0:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713480118262094.png",1:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713482025464121.png",2:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713483360964656.png",3:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713484242932190.png",4:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713485386433046.png",5:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713490383346341.png",6:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713491181033269.png",7:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713492063391371.png",8:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713492984325136.png",9:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713493884554965.png",a:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713494711735133.png",b:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713495637356683.png",c:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713500419906235.png",d:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713501234000029.png",e:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713501940374785.png",f:"//file.40017.cn/img140017cnproduct/cn/h/dzs-hotel/0.0.0.6/images/common/2017042713503837322695.png"}[i]}var o=$.trim(t).substring(0,1),r=["#32AB9D","#C76453","#58AFD8","#FAC007","#71738C","#EF9B39","#92A25D","#90774E"],l=Math.floor(Math.random()*r.length);l==this.colorIndex&&(l=l>0?this.colorIndex-1:this.colorIndex+1),this.colorIndex=l;return'<dl class="comments-author">\n                  <dt>\n                    '+(a?'<img class="author-img" src="'+a+'">':'<p class="userhaeder" style="background:'+r[l]+'">'+o+"</p>")+'\n                  </dt>\n                  <dd class="name">'+t+"</dd>                </dl>"},renderCommentBody:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],a="",n=(e.lineAccess.indexOf("好"),e.score),i="";i=n>0&&n<1?"sc-05":1==n?"sc-1":n>1&&n<2?"sc-15":2==n?"sc-2":n>2&&n<3?"sc-25":3==n?"sc-3":n>3&&n<4?"sc-35":4==n?"sc-4":n>4&&n<5?"sc-45":5==n?"sc-5":"";var o=e.dpTripPurpose,s="";switch(!0){case"商务出差"===o:s="icon-work";break;case"情侣"===o:s="icon-love";break;case"团体"===o:s="icon-team";break;case"独自旅行"===o:s="icon-alone";break;case"带小孩"===o:s="icon-parents";break;case"其他"===o:s="icon-others";break;default:s=""}a='<div class="top">\n             <span class="scores" style="display:'+(e.score>0?"inline-block":"none")+'"><span class="scorestar '+i+'"></span>'+e.score+'分</span>\n              <div class="time">\n                <span class="published-time">发表时间：'+e.dpDate+'</span>\n              </div>\n              <div class="add-info">\n                <p><i class="icon-type '+s+'"></i><span>'+o+'</span><span style="display:'+(t?"inline-block":"none")+'">'+(e.roomTypeName?e.roomTypeName:"其他房型")+"</span></p>\n              </div>\n            </div>";var r=e.csReplyList.length?e.csReplyList[0].replyContent:"",l="<p>"+e.dpContent.replace(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]|\uD83D[\uDE80-\uDEFF])/g,"")+"</p>";if(this.highLight)for(var c=e.highLightList,d=0,p=c.length;d<p;d++)l=l.replace(c[d],function(e){return"<span>"+e+"</span>"});return a+='<div class="comments-body">'+l+"</div>",a+=this.renderCommentImg(e),r.length&&(a+='<p class="record">'+r+"</p>"),a='<div class="comments-details">'+a+"</div>"},renderCommentImg:function(e){var t=e.dpImgUrl,a=[];if(!t.length)return"";for(var n=0;n<t.length&&5!==n;n++){var i=t[n].imgUrl||t[n].originalImgUrl||t[n].smallImgUrl,o=(i=i.replace(/http(s?):/,"")).lastIndexOf("."),s=i.substring(0,o)+i.substring(o);a.push('<a href="javascript:void(0);"><img src="'+s+'"></a>')}return'<div class="comments-img" data-id="'+e.dpGuid+'">'+a.join("")+"</div>"},showBigImg:function(e){$("#apiShowPos").length||$("body").append('<div id="apiShowPos"><img src="" class="loading"/></div>');var t,a,n=$(e),i=n.attr("src"),o=$("#apiShowPos"),s=($("img",o),n.offset()),r=(n.width(),new Image);r.parent=e,r.onload=function(){o.html(r),t=r.width,a=r.height;$("#apiShowPos img").each(function(){var e=0;t>500&&(e=500/t,$("#apiShowPos img").css("width","500px"),$("#apiShowPos img").css("height",a*e+"px"));var n=$("#apiShowPos img").width(),i=$("#apiShowPos img").height();i>450&&(e=450/i,$("#apiShowPos img").css("height","450px"),$("#apiShowPos img").css("width",n*e+"px"))});var e=$(window).height(),n=$(r.parent).offset().top-$(window).scrollTop();if(n>e-n){var i=$("#apiShowPos").outerHeight(!0),l=$(r.parent).height();o.css({position:"absolute",left:s.left+83+"px",top:s.top+l-i+"px"})}else o.css({position:"absolute",left:s.left+83+"px",top:s.top-3+"px"})},r.setAttribute("src",""),r.src=i},hideImg:function(){$("#apiShowPos").remove()},pager:function(e,t,a){if(a=a||"",!t)return'<div class="pager '+a+'"><div class="total-page">共0页</div></div>';e=parseInt(e);var n=void 0,i=void 0,o=void 0,s=void 0,r=void 0,l=void 0;n='<div class="total-page">共'+(t=parseInt(t))+"页</div>",1===e?(o='<li class="first"><span>首页</span></li>',i='<li class="prev"><span>上一页</span></li>'):(o='<li class="first"><a href="#" data-page-num="1">首页</a></li>',i='<li class="prev"><a href="#" data-page-num="'+(e-1)+'">上一页</a></li>'),e===t?(l='<li class="last"><span>末页</span></li>',r='<li class="next"><span>下一页</span></li>'):(l='<li class="last"><a href="#" data-page-num="'+t+'">末页</a></li>',r='<li class="next"><a href="#" data-page-num="'+(e+1)+'">下一页</a></li>'),s="";var c=void 0,d=e-Math.floor(3.5)>0?e-Math.floor(3.5):1;c=0;for(var p=0;p<7&&c<t;p++){var u=d+p;s+=u===e?'<li class="active"><a href="#" data-page-num="'+u+'">'+u+"</a></li>":'<li><a href="#" data-page-num="'+u+'">'+u+"</a></li>",c=d+p}return c<t&&(s+='<li class="ellipsis">...</li>'),n='<div class="pager '+a+'">'+(n+=s="<ul>"+o+i+s+r+l+"</ul>")+"</div>"},pagerSkip:function(e){var t=this,a=$(".pager",e);a.hasClass("pager-process")||($("a",a).on("click",function(a){a.preventDefault(),t.initFlag=!1,$(this).closest("li").hasClass("active")||(t.page=$(this).attr("data-page-num"),t.grade=$(this).attr("data-grade"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","点击翻页"),t.ajaxComments(e,!0))}),a.addClass("pager-process"))},scroll:function(){if(!this.initFlag){var e=$("#comments").offset().top;$(window).scrollTop()!==e&&$("html,body").animate({scrollTop:e},500)}}};t.comments=c},function(e,t,a){"use strict";t.__esModule=!0,t.summaryComment=undefined;var n,i=a(57),o=a(1),s=a(37),r=(n=s)&&n.__esModule?n:{"default":n};var l={init:function(){var e=this;$.ajax({url:settings.comments,type:settings.type,dataType:settings.dataType,success:function(t){t&&(e.build(t.pageinfo),e.satisfactionInit(),e.commentSliderInit())}})},build:function(e,t,a){if(e&&e.dpList.length){this.hasComment(e,t,a);n={score:$(".circle_percent").attr("data-grade")+"分",count:$(".satiinfo span.reviewnum em").html(),percent:$("#summary dl dt span.satisfaction em i").html()+"%"};o.buryChannelPoint.last_head_comment(n)}else{this.noComment(e.starNum);var n={score:"",count:"",percent:""};o.buryChannelPoint.last_head_comment(n)}this.satisfactionInit(),this.commentSliderInit()},noComment:function(e){$("#summary dl dt a").html('<div class="noscore nocomm">"暂时还没有客官评分"</div>');$("#summary dl dd.review").html('<div class="nodp nocomm">"预订抢点评沙发，赶快<a href="#secondary-menu">预订</a>哦^_^"</div>')},hasComment:function(e,t,a){var n="",i=e.totalNum,o=a.degreeLevel.split("%")[0],s=parseInt(o,10),l=(o=parseInt(o,10)/100,e.starNum),c="",d="";i>10?l>=4.9?c="完美":l>=4.6&&l<=4.8?c="超赞":l>=4.3&&l<=4.5?c="很好":l>=4&&l<=4.2?c="还行":d="none":d="none";var p="";a.degreeLevel&&"0%"!==a.degreeLevel&&(p='<span class="satisfaction"><em><i>'+s+"</i>%</em>用户满意度</span>"),n+='<div class="circle_percent" data-grade="'+l+'">\n                                    <div class="percent">\n                                        <span>'+l+'</span> 分\n                                    </div>\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="satiinfo">\n                                    <span class="score-word '+d+'">'+c+'</span>\n                                    <span class="reviewnum">已有<em>'+i+"</em>人点评</span>\n                                    "+p+"\n                                </div>",$("#summary dl dt a").html(n);var u,m=e.dpList;n="";if(m&&m.length){parseInt(i)<=5&&parseInt(i)>0&&($(".circle_percent").addClass("none"),$("#summary dl dt span.score-word").addClass("none"),$("#summary dl dt .satiinfo").addClass("no-score"));for(var f=0;f<m.length&&!(f>=3);f++){var h=e.dpList[f],v=h.dpContent.replace(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g,""),g=h.dpUserName||"";if(g=g.substring(0,12),"2"===h.dPSupplier){var y=(0,r["default"])(v);y.substring(y.length-1);g=y.substring(0,6)}n+='<li class="'+(f?"":"active")+'"><span class="reviewinfo">来自 <em>'+g+'</em> 的最新评论：</span>\n                                            <div class="desc">'+v+"</div>\n                                        </li>"}u='<div class="commentpage">\n                                        <span class="prepage cpage disabled"></span>\n                                        <span class="nextpage cpage"></span>\n                                    </div>\n                                    <ul>'+n+"</ul>",$("#summary dl dd.review").html(u)}else $("#summary dl dd.review").html('<div class="nodp nocomm">"暂时还没有客官点评"</div>')},satisfactionInit:function(){var e=$(".circle_percent"),t=e.attr("data-grade")||0;if(0===parseInt(t))return e.addClass("circle_percent_0"),void $(".percent",e).html("暂无满意度");$.browser.msie?e.addClass("circle_percent_num").addClass("circle_percent_"+10*t):(0,i.drawCirclePercent)(e,t)},commentSliderInit:function(){$("#summary .review .prepage").click(function(){$("#summary .review .nextpage").removeClass("disabled");var e=$("#summary dl dd.review ul"),t=($("li",e).length,$("li.active",e).index());t>0&&t--,$("li",e).eq(t).addClass("active").siblings("li").removeClass("active"),0!==t?o.buryChannelPoint.last_comment_view():$("#summary .review .prepage").addClass("disabled")}),$("#summary .review .nextpage").click(function(){$("#summary .review .prepage").removeClass("disabled");var e=$("#summary dl dd.review ul"),t=$("li",e).length-1,a=$("li.active",e).index();a++,$("li",e).eq(a).addClass("active").siblings("li").removeClass("active"),a!==t?o.buryChannelPoint.last_comment_view():$("#summary .review .nextpage").addClass("disabled")})}};t.summaryComment=l},function(e,t,a){"use strict";t.__esModule=!0,t.hotelAndScenary=undefined;a(6);var n={getPackages:function(){$(".menu-title-con .hotelscenary").addClass("none"),$("#hotelAndScenary .h-s-title ul li.hasnav").addClass("none"),$("#hotelAndScenary .h-s-list.scenery").removeClass("none"),$("#hotelAndScenary .h-s-title ul li.secenerynav").addClass("active"),$("#hotelAndScenary .h-s-title li").not(".none").length||$("#hotelAndScenary .h-s-title").addClass("none")},printPackages:function(e){for(var t="",a=0;a<e.length;a++){var n=e[a];if(!n.AmtDT)return;var i=n.WlTitle.length>35?n.WlTitle.substr(0,33)+"..":n.WlTitle;t+='<a href="'+n.FinalUrl+'" target="_blank" data-id="'+n.Id+'">\n                        <dl>\n                            <dt><img src="'+(n.ImgUrl?n.ImgUrl.replace("http:",""):"//img1.40017.cn/cn/sl/dzs-hotel/last/h-s-default.jpg")+'" alt=""></dt>\n                            <dd class="subname">\n                                <p title="'+n.WlTitle+'">'+i+'</p>                            </dd>                            <dd class="h-s-price">                                <label>¥<strong>'+n.AmtDT+"</strong></label>起                            </dd>                        </dl>                    </a>"}t.length?$("#hotelAndScenary .h-s-list.hscon").html(t):($(".menu-title-con .hotelscenary").addClass("none"),$("#hotelAndScenary .h-s-title ul li.hasnav").addClass("none"),$("#hotelAndScenary .h-s-list.scenery").removeClass("none"),$("#hotelAndScenary .h-s-title ul li.secenerynav").addClass("active"))},loadWebp:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){if("function"==typeof loadWebp){var e=fish.all("#hotelAndScenary .hscon img");loadWebp({attr:"orisrc",img:e,fn:function(){e.lazyLoad({attr:"orisrc"})}})}}),loading:function(e){e.html('<div class="loading"></div>')},listEvent:function(){$("#hotelAndScenary .h-s-title ul li.hasnav").on("click",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作","合作tab","酒店景点")}),$("#hotelAndScenary .h-s-list.hscon  a").on("click",function(){var e=$(this).data("id")||"";window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作","酒店景点",e)})}};t.hotelAndScenary=n},function(e,t,a){"use strict";t.__esModule=!0,t.scenery=undefined;var n=a(6),i={getScenery:function(){var e=this,t=(0,n.getantitoken)();$.ajax({url:settings.scenery.url+"&antitoken="+t,type:settings.scenery.type,dataType:settings.scenery.dataType,cache:!1,success:function(t){if(!t||!t.length)return $("#hotelAndScenary .h-s-title ul li.secenerynav").addClass("none"),$("#hotelAndScenary .h-s-list.scenery").addClass("none"),void($("#hotelAndScenary .h-s-title li").not(".none").length||$("#hotelAndScenary .h-s-title").addClass("none"));e.printScenery(t),e.listEvent()},error:function(){$("#hotelAndScenary .h-s-title ul li.secenerynav").addClass("none"),$("#hotelAndScenary .h-s-list.scenery").addClass("none"),$("#hotelAndScenary .h-s-title").addClass("none")}})},printScenery:function(e){for(var t="",a=0;a<e.length;a++){var n=e[a];if(n.img){var i=n.img.substring(n.img.lastIndexOf("."));n.img=n.img.replace(i,"_120x120_02"+i)}t+='<a data-id="'+n.id+'"  href="'+n.url+'&refid=209711363" target="_blank" >\n                        <dl>\n                            <dt><img src="'+(n.img?n.img:"//img1.40017.cn/cn/sl/dzs-hotel/last/h-s-default.jpg")+'" alt=""></dt>\n                            <dd class="subname">\n                                <p title="'+n.name+'">'+n.name+'</p>\n                            </dd>\n                            <dd class="h-s-price">\n                                <label>¥<strong>'+n.price+"</strong></label>起\n                            </dd>\n                        </dl>\n                    </a>"}t.length?$("#hotelAndScenary .h-s-list.scenery").html(t):($("#hotelAndScenary .h-s-title ul li.secenerynav").addClass("none"),$("#hotelAndScenary .h-s-list.scenery").addClass("none"))},listEvent:function(){$("#hotelAndScenary .h-s-title ul li.secenerynav").on("click",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("PC酒店详情页","景区交叉模块","景点"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作","合作tab","景点")}),$("#hotelAndScenary .h-s-list.scenery a").on("click",function(){var e=$(this).data("id")||"";window._tcTraObj&&_tcTraObj._tcTrackEvent("PC酒店详情页","景区交叉模块",e),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","合作","景点名称",e)})}};t.scenery=i},function(e,t,a){"use strict";t.__esModule=!0,t.summary=undefined;var n=a(124),i={init:function(){$("#summary dd.icon ul li.phoneview").mouseover(function(){$("#summary .qrcode").addClass("hover")}),$("#summary dd.icon ul li.phoneview").mouseleave(function(){$("#summary .qrcode").removeClass("hover")}),$("#summary .favxt").on("click",function(e){e.stopPropagation()});var e={url:{init:settings.favorite.init,toggle:settings.favorite.toggle},dataType:"json"};new n.Favorite($("#summary .favorite"),e)}};t.summary=i},function(e,t,a){"use strict";t.__esModule=!0,t.Favorite=undefined;var n=a(1),i=a(6),o={url:{init:"../data/common/favorite/init.json",toggle:"../data/common/favorite/toggle.json"},dataType:"json"};function s(e,t){var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(e){return e?"已收藏":"未收藏"};return e&&e.length?(this.actions=e,this.settings=$.extend(o,t),this.getTextByStatus=a,this.init()):null}s.prototype={init:function(){this.isLogin()&&this._init();var e=this;return this.actions.unbind("click").on("click",function(t){if(settings&&settings.hotelid){var a={hotelId:settings.hotelid,hotelName:center.title,cityId:settings.cityid};n.buryChannelPoint.last_head_favorite(a)}if(e.isLogin()){var o=$(this),s="/"+o.data("id"),r=o.hasClass("favorited"),l=r?"DELETE":"POST",c=(0,i.getantitoken)();o.addClass("favorite-loading"),$.ajax({url:e.settings.url.toggle+s,data:{antitoken:c},type:l,dataType:e.settings.dataType,cache:!1,success:function(t){o.removeClass("favorite-loading"),t&&1===t.state&&e.setAction(o,!r)},error:function(){o.removeClass("favorite-loading")}})}else location.href="//passport.ly.com/?pageurl="+encodeURIComponent(location.href)}),this},_init:function(){var e=[];this.actions.each(function(t,a){if(void 0===$(a).data("id"))throw new Error("Favorite need define data-id.");e.push($(a).data("id"))});var t=(0,i.getantitoken)(),a={hotelId:e.join(","),antitoken:t};this.actions.addClass("favorite-loading");var n=this;$.ajax({url:this.settings.url.init,dataType:n.settings.dataType,data:a,cache:!1,success:function(e){if(n.actions.removeClass("favorite-loading"),e&&e.length)for(var t=0;t<e.length&&t<n.actions.length;t++){var a=$(n.actions[t]),i=1===e[t].favorited;n.setAction(a,i)}},error:function(){n.actions.removeClass("favorite-loading")}})},getToken:function(){var e=fish.cookie.get("wangba");return e&&void 0!==e||(e=(new Date).getTime().toString(),fish.cookie.set("wangba",e)),md5(e)},isLogin:function(){var e,t,a,n,i=void 0;return fish?i=fish.cookie.get("us","userid"):(i=$.cookie("us"),e="userid",t="",a=(a="")||"?",n=(n=i)||location.href,i=new RegExp("(^|\\"+a+"|&)"+e+"=([^&]*)(\\s|&|$)","i").test(n)?unescape(RegExp.$2.replace(/\+/g," ")):t),!!i},setAction:function(e,t){e.toggleClass("favorited",t),$(".text",e).html(this.getTextByStatus(t))}},t.Favorite=s},function(e,t,a){"use strict";t.__esModule=!0,t.suggestedTab=undefined;var n=a(1),i=a(6),o={enableCallback:!1,callback:function(e){},bindEvents:function(){$(".chioce-box a").on("click",function(){$(this).children("span").addClass("chioce-color"),$(this).siblings().children("span").removeClass("chioce-color")}),$("#fjjd").on("click",function(){$("#fjhotel-list").show(),$("#zbhotel-list").hide(),n.buryChannelPoint.last_nearby_tab($(this).html())}),$("#zbtj").on("click",function(){$("#fjhotel-list").hide(),$("#zbhotel-list").show(),n.buryChannelPoint.last_nearby_tab($(this).html())})},getHotel:function(){var e=this,t=(0,i.getantitoken)(),a={hotelid:settings.hotelid,cityid:settings.cityid,Lonlat:center.thisPageSourcePoint.lng+","+center.thisPageSourcePoint.lat,checkindate:$("#startTime").val(),checkoutdate:$("#endTime").val(),antitoken:t};$.ajax({type:settings.suggestedTab.type,dataType:settings.suggestedTab.dataType,data:a,url:settings.suggestedTab.url,cache:!1,success:function(t){if((null===t.nearhotel||t.nearhotel.length<=0)&&(null===t.samelevelhotel||t.samelevelhotel<=0))$("#suggested-tab").hide();else{var a,n=t.nearhotel||[],i=t.samelevelhotel||[];null!=e.suggestedHotel(n)&&""!=e.suggestedHotel(n)?$("#fjhotel-list").html(e.suggestedHotel(n)):($("#fjhotel-list").hide(),$("#fjjd").hide()),null!=e.suggestedHotel(i)&&""!=e.suggestedHotel(i)?($("#zbhotel-list").html(e.suggestedHotel(i)),"none"==$("#zbtj").css("display")&&($("#zbhotel-list").show(),$("#zbtj").show(),$("#suggested-tab #zbtj").addClass("chioce-color"))):($("#zbhotel-list").hide(),$("#zbtj").hide()),null==e.suggestedHotel(n)&&"null"==e.suggestedHotel(n)&&null==e.suggestedHotel(i)&&""==e.suggestedHotel(i)&&$("#suggested-tab").hide(),a=t&&t.nearhotel.length?t.nearhotel:t.samelevelhotel,e.enableCallback&&e.callback&&e.callback(a),$("#suggested-tab .list-li").on("click",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","推荐","查看",$(this).attr("data-id"))})}},error:function(){$("#suggested-tab").hide()}})},suggestedHotel:function(e){for(var t=e.length,a="",n=0;n<t;n++)0===e[n].price||"0"===e[n].price?a+='<li class="list-li" data-id="'+e[n].Id+'" ><a href="'+e[n].Url+'" ><img class="left-img" src="'+(""===e[n].Img?"//img1.40017.cn/cn/sl/dzs-hotel/last/hotel-null.jpg":e[n].Img)+'"><div class="li-right"><p class="hotel-name">'+e[n].Name+'</p> <p class="space-price">'+this.formatNumer(e[n].Distance)+'<span class="price none"><span class="mark">&yen;</span><span class="number">'+e[n].Price+'</span><span class="word">起</span></span></p></div></a></li>':a+='<li class="list-li"  data-id="'+e[n].Id+'"><a href="'+e[n].Url+'"><img class="left-img" src="'+(""===e[n].Img?"//img1.40017.cn/cn/sl/dzs-hotel/last/hotel-null.jpg":e[n].Img)+'"><div class="li-right"><p class="hotel-name">'+e[n].Name+'</p> <p class="space-price">'+this.formatNumer(e[n].Distance)+'<span class="price"><span class="mark">&yen;</span><span class="number">'+e[n].Price+'</span><span class="word">起</span></span></p></div></a></li>';return a},formatNumer:function(e){var t=e,a=!1;return e&&"string"==typeof e&&(t=parseFloat(t)),t<1e3?t>1&&(t=Math.round(t)):(t=Math.floor(t/100)/10,a=!0),'<span>距离该酒店<span class="space-number">'+t+"</span>"+(a?"千米":"米")+"</span>"}};t.suggestedTab=o},function(e,t,a){"use strict";t.__esModule=!0,t.hotelDetails=undefined;var n=a(1);!function(){$(".hotel-facility-up").children("triangle-down").on("click",function(){$(".hotel-facility-up").hide(),$("hotel-facility-down").show()}),$(".hotel-facility-down").children("triangle-up").on("click",function(){$(".hotel-facility-down").hide(),$("hotel-facility-up").show()}),$(".hotel-facility .triangle").on("click",function(){$(this).hasClass("triangle-up")?($(this).removeClass("triangle-up"),$(".hotel-facility dl.morefacility").slideUp(),$(".facility-details").length&&($(".facility-details").slideUp(function(){$(".facility-details-up").show()}),$(".facility-p").addClass("p-up"))):($(this).addClass("triangle-up"),$(".hotel-facility dl.morefacility").slideDown(),$(".facility-details").length&&($(".facility-details-up").hide(),$(".facility-details").slideDown(),$(".facility-p").removeClass("p-up"))),n.buryChannelPoint.last_hotel_feature()}),""!==$(".introduce2").text()?$(".introduce2").html().length<=50?($(".introduce2").hide(),$(".hotel-introduce .triangle").hide(),$(".introduce1").show()):($(".introduce2").show(),$(".hotel-introduce .triangle").show(),$(".introduce1").hide(),$(".hotel-introduce .triangle").on("click",function(){$(this).hasClass("triangle-up")?($(this).removeClass("triangle-up"),$(".introduce2").animate({height:"22px"},200,function(){$(".introduce2").addClass("introduce-up")})):($(this).addClass("triangle-up"),$(".introduce2").removeClass("introduce-up"),$(".introduce2").animate({height:"100%"},500,function(){})),n.buryChannelPoint.last_hotel_short()})):$(".hotel-introduce").hide();var e=$("#hotel-details .p-style span.childrenPolicy").width(),t=$("#hotel-details .p-style span.petPolicy").width();e>605&&($("#hotel-details .p-style.childrenPolicy span.moreContent.none").removeClass("none"),$("#hotel-details .p-style span.childrenPolicy").css({width:"606px",height:"22px",overflow:"hidden"})),t>605&&($("#hotel-details .p-style.petPolicy span.moreContent.none").removeClass("none"),$("#hotel-details .p-style span.petPolicy").css({width:"606px",height:"22px",overflow:"hidden"})),$("#hotel-details .p-style span.moreContent").on("click",function(){$(this).parent().hasClass("open")?($(this).parent().removeClass("open"),$(this).parent().find("span.moreContent").css({"background-position":"0px -290px"}),$(this).parent().find(".content").height("22px"),$(this).parent().find(".content div").css({width:"606px",overflow:"hidden",height:"22px","text-overflow":"ellipsis","white-space":"nowrap"})):($(this).parent().addClass("open"),$(this).parent().find(".content").height("auto"),$(this).parent().find(".content div").css({width:"605",overflow:"unset",height:"auto","text-overflow":"unset","white-space":"normal"}),$(this).parent().find("span.moreContent").css({"background-position":"-25px -290px"}))})}();t.hotelDetails=null},function(e,t,a){"use strict";t.__esModule=!0,t.init=undefined;var n=a(58),i=a(128),o=a(129);t.init=function(){var e=new n.DZSMap("smallMap");e.render({center:[center.thisPageSourcePoint.lng,center.thisPageSourcePoint.lat],wheelScroll:!1,control:!0,controlSize:BMAP_NAVIGATION_CONTROL_SMALL}),e.addCustomMarker({point:[{lng:center.thisPageSourcePoint.lng,lat:center.thisPageSourcePoint.lat,param:{contentData:{hotelValue:center.title}}}],content:$("#template_main_marker").html(),contentOffset:[-17,-40]});var t=new i.LargeMap("largeMap",{settings:settings,wrap:$("#largeMapContent"),currentPoint:{lng_lat:center.thisPageSourcePoint,title:center.title}}),a={name:center.title,lat:center.thisPageSourcePoint.lat,lng:center.thisPageSourcePoint.lng,Id:108};(new o.FindRouter)._init($("#largeMapContent"),t,a),t.baiduMap.addEventListener("zoomend",function(){window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","大小")}),t.render({center:[center.thisPageSourcePoint.lng,center.thisPageSourcePoint.lat],wheelScroll:!1,control:!0,zoomLevel:14}),t.mianDealWith(),t.addCustomMarker({point:[{lng:center.thisPageSourcePoint.lng,lat:center.thisPageSourcePoint.lat,param:{contentData:{hotelValue:center.title}}}],content:$("#template_main_marker").html(),contentOffset:[-17,-40],allwayRember:!0}),$(window).scroll(function(){if(1!==window.isBigMapShow){var e=$(window).height();$("#map").offset().top-$(window).scrollTop()<=e&&(window.isBigMapShow=1,t.getMetroBusData())}}),$("#smallMapContent .showlarge").on("click",function(){var e=$("#map").offset().top;$(".secondary-menu-wrap").height(),$(document).scrollTop(e-60),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","地图1","查看")}),$("#largeMapContent .toggleButton").on("click",function(){$(this).parents(".dzspc-map-content").toggleClass("toggle"),$(this).parents(".dzspc-map-content").hasClass("toggle")?$(this).html("展开"):$(this).html("收起")})}},function(e,t,a){"use strict";t.__esModule=!0,t.LargeMap=undefined;var n=a(58),i=a(6);function o(e,t,a){n.DZSMap.call(this,e),this.sourceOptions=t,this.domWrapper=t.wrap}function s(e,t){$.ajax({url:e.url,type:e.type,dataType:e.dataType,data:e.param,success:function(e){e||alert("成功"),t(e)},error:function(e){}})}function r(){var e=center.thisPageSourcePoint,t=new BMap.Point(e.lng,e.lat);this.setCenter(t)}function l(e,t){var a=[];e.forEach(function(e,t){var n=e.lon_lat.split(",");a.push({lng:n[0],lat:n[1],param:{contentData:e,windowInfoData:e}})}),this.addCustomMarker({point:a,content:t,infoWindow:$("#template_normal_infowin").html(),contentOffset:[-15,-34],viewport:!0,clickCallBack:c,mouseinCallBack:d});var n=this;n.baiduMap.addEventListener("zoomend",r),n.baiduMap.addEventListener("movestart",function(){n.baiduMap.removeEventListener("zoomend",r)})}function c(e){var t=e.savedThisMarkerData.markerid;$("#largeMapSider tr[data-markerid="+t+"]").addClass("hover"),window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","信息")}function d(e){var t=e.savedThisMarkerData.markerid;$("#largeMapSider .hmap_list tr").removeClass("hover");var a=$("#largeMapSider tr[data-markerid="+t+"]");a.addClass("hover");var n=a.parents(".hmap_info_list"),i=a.offset().top-n.offset().top+n.scrollTop()-n.height()+a.height();n.scrollTop(i);var o=$(e.getContent()),s=o.attr("id");o.remove(),$(".normal-custom-marker").parent().removeClass("zIndex100"),$(".normal-custom-marker").removeClass("hover"),$("#"+s).parent().addClass("zIndex100"),$("#"+s).addClass("hover")}function p(e){var t=$(".hmap_traer_addr span",e).eq(0).attr("data-lnglat").split(","),a=$(".hmap_traer_addr span",e).eq(0).text(),n=$(".hmap_traer_addr span",e).eq(1).data("lnglat").split(","),i=$(".hmap_traer_addr span",e).eq(1).text();return{startPoint:{title:a,point:new BMap.Point(t[0],t[1])},endPoint:{title:i,point:new BMap.Point(n[0],n[1])}}}function u(e){if("bus"===e.type){if(e.error)return void $("#largeMapSider .hmap_traer_tool_bus").html('<div class="map_nodata_error"></div>');this.poi_1_tempolateFn=this.poi_1_tempolateFn||doT.template($("#template_hmap_poi_1").html()),$("#largeMapSider .hmap_traer_tool_bus").html(this.poi_1_tempolateFn(e)).addClass("on").siblings(".hmap_traer_tool").removeClass("on")}else if("car"===e.type){if(e.error)return void $("#largeMapSider .hmap_traer_tool_bus").html('<div class="map_nodata_error"></div>');this.poi_2_tempolateFn=this.poi_2_tempolateFn||doT.template($("#template_hmap_poi_2").html()),$("#largeMapSider .hmap_traer_tool_car").html(this.poi_2_tempolateFn(e)).addClass("on").siblings(".hmap_traer_tool").removeClass("on")}else if("foot"===e.type){if(e.error)return void $("#largeMapSider .hmap_traer_tool_bus").html('<div class="map_nodata_error"></div>');this.poi_2_tempolateFn=this.poi_2_tempolateFn||doT.template($("#template_hmap_poi_2").html()),$("#largeMapSider .hmap_traer_tool_foot").html(this.poi_2_tempolateFn(e)).addClass("on").siblings(".hmap_traer_tool").removeClass("on")}}function m(e,t){if(!$.isEmptyObject(e)){var a=this,n=a.sourceOptions.currentPoint,i=new BMap.Point(n.lng_lat.lng,n.lng_lat.lat);return e.forEach(function(e,n){var o=e.lon_lat.split(","),s=new BMap.Point(o[0],o[1]),r=Math.floor(a.baiduMap.getDistance(i,s));e.disnum=r,r=r>1e3?(r/1e3).toFixed(1)+"km":r+"m",e.distance=r,t&&("scenic"===t?(e.type="scenic",e.title="周边景区",e.markerid="marker"+e.id,e.index=n+1):"food"===t?(e.type="food",e.title="周边美食",e.markerid="marker"+e.id,e.index=n+1):"ent"===t?(e.type="ent",e.title="周边娱乐",e.index=n+1,e.markerid="marker"+e.id):"Metro"===t?(e.title="周边地铁大巴",e.markerid="marker"+e.id,e.index="no"):"Air"===t&&(e.title="周边机场车站",e.markerid="marker"+e.id,e.index="no"))}),e.sort((o="disnum",function(e,t){var a=e[o],n=t[o];return a-n})),e}var o}function f(e){return"airportandstation"===e?"getAirportAndStationData":"scenic"===e?"getScenicData":"food"===e?"getFoodData":"metro"===e?"getMetroBusData":"entertainment"===e?"getEntertainmentData":void 0}o.prototype=new n.DZSMap,o.prototype.getMetroBusData=function(){var e=this;e.metroBusData?l.call(e,e.metroBusData.metro,e.metroTemplate):(this.metroTemplate=$("#template_normal_marker").html(),s({url:settings.mapSource.url+"&typeid=2&antitoken="+(0,i.getantitoken)(),type:settings.mapSource.type,dataType:settings.mapSource.dataType,param:{}},function(t){if(t.metro&&t.metro.length>0){t.metro=m.call(e,t.metro,"Metro"),e.metroBusData=t,l.call(e,e.metroBusData.metro,e.metroTemplate);var a=doT.template($("#template_hmap_tra").html());if(e.metroBusFetchTemplateFn=a,t.metro.length){var n={busData:[],trainData:[],airData:[],metroData:[]};t.metro.forEach(function(e,t){"Metro"===e.type?n.metroData.push(e):"Train"===e.type?n.trainData.push(e):"Air"===e.type?n.airData.push(e):n.busData.push(e)}),$("#largeMapSider .hmap_content_tra").html(a(n))}else $("#largeMapSider .hmap_content_tra").html("<div class='map_nosource_error'></div>")}else $("#largeMapSider .hmap_content_tra").html("<div class='map_nosource_error'></div>")}))},o.prototype.getAirportAndStationData=function(){var e=this;e.airportAndStationData?l.call(e,e.airportAndStationData.airportAndStation,e.airportAndStationTemplate):(this.airportAndStationTemplate=$("#template_normal_marker").html(),s({url:settings.mapSource.url+"&typeid=1&antitoken="+(0,i.getantitoken)(),type:settings.mapSource.type,dataType:settings.mapSource.dataType,param:{}},function(t){if(t.airportAndStation&&t.airportAndStation.length>0){t.airportAndStation=m.call(e,t.airportAndStation,"Air"),e.airportAndStationData=t,l.call(e,e.airportAndStationData.airportAndStation,e.airportAndStationTemplate);var a=doT.template($("#template_hmap_spo").html());if(e.airportAndStationFetchTemplateFn=a,t.airportAndStation.length){var n={busData:[],trainData:[],airData:[],metroData:[]};t.airportAndStation.forEach(function(e,t){"Metro"===e.type?n.metroData.push(e):"Train"===e.type?n.trainData.push(e):"Air"===e.type?n.airData.push(e):n.busData.push(e)}),$("#largeMapSider .hmap_content_spo").html(a(n))}else $("#largeMapSider .hmap_content_spo").html("<div class='map_nosource_error'></div>")}else $("#largeMapSider .hmap_content_spo").html("<div class='map_nosource_error'></div>")}))},o.prototype.getScenicData=function(){var e=this;e.scenicData?l.call(e,e.scenicData.scenic,e.scenicTemplate):(this.scenicTemplate=$("#template_normal_marker").html(),s({url:settings.mapSource.url+"&typeid=3&antitoken="+(0,i.getantitoken)(),type:settings.mapSource.type,dataType:settings.mapSource.dataType,param:{}},function(t){if(t.scenic&&t.scenic.length>0){t.scenic=m.call(e,t.scenic,"scenic"),e.scenicData=t,l.call(e,e.scenicData.scenic,e.scenicTemplate);var a=doT.template($("#template_hmap_scen").html());e.scenFetchTemplateFn=a,t.scenic.length?$("#largeMapSider .hmap_content_scen").html(a(t)):$("#largeMapSider .hmap_content_scen").html('<div class="map_nosource_error"></div>')}else $("#largeMapSider .hmap_content_scen").html('<div class="map_nosource_error"></div>')}))},o.prototype.getFoodData=function(){var e=this;e.foodData?l.call(e,e.foodData.food,e.foodTemplate):(this.foodTemplate=$("#template_normal_marker").html(),s({url:settings.mapSource.url+"&typeid=4&antitoken="+(0,i.getantitoken)(),type:settings.mapSource.type,dataType:settings.mapSource.dataType,param:{}},function(t){if(t.food&&t.food.length>0){t.food=m.call(e,t.food,"food"),e.foodData=t,l.call(e,e.foodData.food,e.foodTemplate);var a=doT.template($("#template_hmap_fod").html());e.foodFetchTemplateFn=a,t.food.length?$("#largeMapSider .hmap_content_fod").html(a(t)):$("#largeMapSider .hmap_content_fod").html("<div class='map_nosource_error'></div>")}else $("#largeMapSider .hmap_content_fod").html("<div class='map_nosource_error'></div>")}))},o.prototype.getEntertainmentData=function(){var e=this;e.entertainmentData?l.call(e,e.entertainmentData.entertainment,e.entertainmentTemplate,"周边娱乐"):(this.entertainmentTemplate=$("#template_normal_marker").html(),s({url:settings.mapSource.url+"&typeid=5&antitoken="+(0,i.getantitoken)(),type:settings.mapSource.type,dataType:settings.mapSource.dataType,param:{}},function(t){if(t.entertainment&&t.entertainment.length>0){t.entertainment=m.call(e,t.entertainment,"ent"),e.entertainmentData=t,l.call(e,e.entertainmentData.entertainment,e.entertainmentTemplate,"周边娱乐");var a=doT.template($("#template_hmap_ent").html());e.entFetchTemplateFn=a,t.entertainment.length?$("#largeMapSider .hmap_content_ent").html(a(t)):$("#largeMapSider .hmap_content_ent").html('<div class="map_nosource_error"></div>')}else $("#largeMapSider .hmap_content_ent").html('<div class="map_nosource_error"></div>')}))},o.prototype.mianDealWith=function(e){var t=this;$(".hmap_nav li",e).on("click",function(){var e=$(this).data("type");if($("#largeMapSider").removeClass("hidden"),t.navTabObj="",t.switchRouter(2),!$(this).hasClass("on")){switch(t.isProcessDef=1,$("#largeMapSider .hmap_info_item[data-type='"+e+"']").removeClass("none").siblings(".hmap_info_item").addClass("none"),$(this).addClass("on").siblings("li").removeClass("on"),$("#largeMapSider .hmap_info_traer").removeClass("hmap_info_traer_on"),$("#largeMapSider .hmap_info_traer .hmap_traer_way li").removeClass("have"),$("#largeMapSider .hmap_traer_way li[initshow]").addClass("on").siblings().removeClass("on"),e){case"metro":t.getMetroBusData();break;case"airportandstation":t.getAirportAndStationData();break;case"scenic":t.getScenicData();break;case"food":t.getFoodData();break;case"entertainment":t.getEntertainmentData()}window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","类型",$("p",this).html())}}),$("#largeMapSider").on("mouseover",".hmap_list tr",function(){$("#largeMapSider .hmap_list tr").removeClass("hover"),$(this).addClass("hover");var e=$(this).data("markerid"),t=$("#"+e);$(".normal-custom-marker").removeClass("hover"),$(".normal-custom-marker").parent().removeClass("zIndex100"),t.parent().addClass("zIndex100"),t.addClass("hover")}),$("#largeMapSider").on("click",".hmap_list tr",function(){$(this).parents(".hmap_info_item").find(".hmap_info_traer");var e=$(".map_td_name p",this).text();window._tcTraObj&&_tcTraObj._tcTrackEvent("hotelPChoteldetails","交通","地点",e);var a=$(this).data("lnglat"),n=($(this).data("id"),t.sourceOptions.currentPoint.title),i=t.sourceOptions.currentPoint.lng_lat.lng+","+t.sourceOptions.currentPoint.lng_lat.lat,o=e||"";t.isProcessDef=0,$(".router-paner .r-start input",t.domWrapper).val(o.trim()).data("latlon",a),$(".router-paner .r-end input",t.domWrapper).val(n).data("latlon",i),$(".tangram-suggestion-main").css({visibility:"hidden"}),$(".router-paner .r-input .clear-icon",t.domWrapper).show(),$(".router-paner .r-search-btn",t.domWrapper).trigger("click"),$(".m-right-main .back-btn").remove(),$(".r-map-result",t.domWrapper).append('<span class="back-btn"><em><</em>返回</span>'),$(".m-right-main .back-btn",t.domWrapper).on("click",function(){t.baiduMap.clearOverlays(),t.switchRouter(2),t.resetMarderCon()})}),$("#largeMapSider").on("click",".hmap_traer_way ul li",function(){if($(this).addClass("on").siblings("li").removeClass("on"),"bus"===(a=$(this).data("type"))?$("#largeMapSider .hmap_traer_tool_bus").addClass("on").siblings(".hmap_traer_tool").removeClass("on"):"car"===a?$("#largeMapSider .hmap_traer_tool_car").addClass("on").siblings(".hmap_traer_tool").removeClass("on"):"foot"===a&&$("#largeMapSider .hmap_traer_tool_foot").addClass("on").siblings(".hmap_traer_tool").removeClass("on"),!$(this).hasClass("have")){var e=$(this).parents(".hmap_info_traer"),a=$(this).data("type"),n=p(e);t.renderPolyLine(a,n.startPoint,n.endPoint,u),$(this).addClass("have")}}),$("#largeMapContent .hmap_nav").on("click",function(){t.baiduMap.closeInfoWindow()}),$("#largeMapContent .hmap_traer_addr .icon_close_gray").on("click",function(){$(this).parents(".hmap_info_traer").removeClass("hmap_info_traer_on");var e=$(this).parents(".hmap_info_item"),a=e.data("type");e.find(".hmap_traer_way li[initshow]").addClass("on").siblings().removeClass("on");var n=f(a);t[n].call(t)}),$("#largeMapContent .hmap_traer_addr b").on("click",function(){var e=$(this).prev(),a=e.text(),n=e.data("lnglat"),i=$(this).next(),o=i.text(),s=i.data("lnglat");e.text(o).data("lnglat",s),i.text(a).data("lnglat",n);var r=f($(this).parents(".hmap_info_item").data("type"));t[r].call(t);var l=$(this).parents(".hmap_info_traer"),c=l.find(".hmap_traer_way li.on").data("type");l.find(".hmap_traer_way li").removeClass("have");var d=p(l);t.renderPolyLine(c,d.startPoint,d.endPoint,u)}),$("#largeMapContent #closeBtn").on("click",function(){$("#largeMapSider").addClass("hidden")})},o.prototype.switchRouter=function(e){1===e?($(".hmap_info_wrap").hide(),$(".r-map-result").show()):2===e&&($(".hmap_info_wrap").show(),$(".r-map-result").hide(),this.navTabObj&&this.navTabObj.addClass("on"))},o.prototype.resetMarderCon=function(){switch(this.showConType||"metro"){case"metro":this.getMetroBusData();break;case"airportandstation":this.getAirportAndStationData();break;case"scenic":this.getScenicData();break;case"food":this.getFoodData();break;case"entertainment":this.getEntertainmentData()}},o.prototype.processTabStyle=function(){this.isProcessDef&&($(".m-right-main .back-btn").remove(),this.navTabObj=$(".m-right-main .hmap_nav li.on"),$(".m-right-main .hmap_nav li").removeClass("on"))},o.prototype.createLargeMap=function(){},t.LargeMap=o},function(e,t,a){"use strict";function n(e,t){var a=$("#h_map_wrap_"+t.proId),n=t.proId,i=$(".r-ways-tab",a),o=$("#r_"+n+"_result");s(t.ways,i),e.error?o.html('<div class="not-have-r"></div>'):"bus"===e.type?(this.poi_1_tempolateFn=this.poi_1_tempolateFn||doT.template($("#template_hmap_poi_1").html()),o.html(this.poi_1_tempolateFn(e))):"car"===e.type?(this.poi_2_tempolateFn=this.poi_2_tempolateFn||doT.template($("#template_hmap_poi_2").html()),o.html(this.poi_2_tempolateFn(e))):"foot"===e.type&&(this.poi_2_tempolateFn=this.poi_2_tempolateFn||doT.template($("#template_hmap_poi_2").html()),o.html(this.poi_2_tempolateFn(e)))}function i(e,t,a,n,i){var o=n.getNumPages(),s=n.getPageIndex()||0,r=t.proId,l=$("#r_"+r+"_result"),c=0===i?"起点":"终点",d=0===i?t.start:t.end;o=o>5?5:o;var p="",u="";this.searchStatus.start<0&&(p="r-addr-yes"),this.searchStatus.end<0&&(u="r-addr-yes");var m={title:d,list:e,pages:o,cpage:s,type:i,typeName:c};if(0===i&&0===s){var f='<div class="r-address-main"><div class="r-addressTip"><span>请选择准确的起点、途经点或终点</span></div><div class="r-addr-result r-result0 '+p+'"></div><div class="r-addr-result r-result1 '+u+'"></div></div>';l.html(f)}var h=$(".r-result"+i,l);t.con_obj=l;var v=doT.template($("#template_router_search_result").html());if(h.html(v(m)),function(e,t,a,n,i,o,s,r){t>=1?$(".r-pager .pre-btn",n).show():$(".r-pager .pre-btn",n).hide(),t+1>=a?$(".r-pager .next-btn",n).hide():$(".r-pager .next-btn",n).show(),$(".r-pager a",n).on("click",function(){var t=$(this).data("num");e.gotoPage(parseInt(t))}),$(".r-pager .pre-btn",n).on("click",function(){e.gotoPage(parseInt(t-1))}),$(".r-pager .next-btn",n).on("click",function(){e.gotoPage(parseInt(t+1))}),$("tr",n).on("mouseover",function(e){var t=$(this).data("index"),a=o.markerArr[t],n=new BMap.Icon("//img1.40017.cn/cn/sl/dzs-hotel/list/map/markers_icon_new.png",new BMap.Size(23,26),{offset:new BMap.Size(10,26),imageOffset:new BMap.Size(0-23*t,-230)});a.setZIndex(200),a.setIcon(n);var s="";s=0===i?o.searchResult.start[t]:o.searchResult.end[t],$("th span",$(this)).addClass("hover");var r={title:s.title,enableMessage:!1},l=0===i?"设为起点":"设为终点",c=s.point.lng+","+s.point.lat,d="<div>地址："+s.address+'</div><div class="selinfoBtn"><a href="javascript:void(0);"  data-lnglat="'+c+'" data-title="'+s.title+'" data-type="'+i+'">'+l+"</a></div>",p=new BMap.InfoWindow(d,r);a.openInfoWindow(p)}),$("tr",n).on("mouseout",function(e){var t=$(this).data("index"),a=o.markerArr[t];$("th span",$(this)).removeClass("hover");var n=new BMap.Icon("//img1.40017.cn/cn/sl/dzs-hotel/list/map/markers_icon_new.png",new BMap.Size(23,26),{offset:new BMap.Size(10,26),imageOffset:new BMap.Size(0-23*t,-263)});a.setZIndex(0),a.setIcon(n)}),$(".btn a",n).on("click",function(){o.setSearchTitle(this,s,r)}),$(".r-title",n).on("click",function(){var e=$(".r-result"+(0===i?1:0),s);e.hasClass("r-addr-yes")||$(".r-title",e).addClass("down-icon");var t=0===i?o.searchResult.start:o.searchResult.end,a=$(this).siblings(".r-addr-list");a.hasClass("none")||"none"===a.css("display")?($(".r-addr-list",s).each(function(){$(this).parent(".r-addr-result").hasClass("r-addr-yes")?($(this).addClass("none"),$(this).hide()):$(this).addClass("none")}),$(".r-title",e).addClass("down-icon").removeClass("up-icon"),$(this).removeClass("down-icon").addClass("up-icon"),n.hasClass("r-addr-yes")?(a.removeClass("none"),a.show()):a.removeClass("none"),o.addMarkerIcon(t,i,n,r)):($(this).removeClass("up-icon").addClass("down-icon"),o.baiduMap.clearOverlays(),n.hasClass("r-addr-yes")?(a.addClass("none"),a.hide()):a.addClass("none"))})}(a,s,o,h,i,this,l,t),1===i){if(u&&h.addClass(u),!(this.searchStatus.start>0||this.searchStatus.end>0))return void this.routerSearch(t);l.addClass("r-result-erro"),$(".r-address-main",l).show()}0===i&&this.searchStatus.start>0&&($(".r-addr-list",h).removeClass("none"),$(".r-title",h).addClass("up-icon"),this.addMarkerIcon(this.searchResult.start,0,h,t)),1===i&&(this.searchStatus.end>0&&($(".r-result0 .r-addr-list",l).hasClass("none")||$(".r-result0",l).hasClass("r-addr-yes"))?($(".r-addr-list",h).removeClass("none"),$(".r-title",h).addClass("up-icon"),this.addMarkerIcon(this.searchResult.end,1,h,t)):$(".r-addr-list",h).addClass("none"))}function o(){}function s(e,t){var a=0;"bus"===e?a=0:"car"===e?a=1:"foot"===e&&(a=2),t.show(),$("li",t).removeClass("active"),$("li",t).eq(a).addClass("active")}t.__esModule=!0,o.prototype._init=function(e,t,a){var n=this;n.baiduMap=t.baiduMap,n.domw=t.domWrapper,this.defaultPoint=$("#txtCityName").text()||n.baiduMap,n.starInput="txt_start_"+a.Id,n.endInput="txt_end_"+a.Id,n.ac_start=new BMap.Autocomplete({input:n.starInput,location:n.baiduMap}),n.ac_start.addEventListener("onconfirm",function(e){var t=e.item.value.business;n.ac_start.setInputValue(t)}),n.ac_start.addEventListener("onhighlight",function(e){var t=e.fromitem.value,a="";e.fromitem.index>-1&&(a=t.business),a="",e.toitem.index>-1&&(a=(t=e.toitem.value).business),n.ac_start.setInputValue(a)}),n.ac_end=new BMap.Autocomplete({input:n.endInput,location:n.baiduMap}),n.ac_end.addEventListener("onconfirm",function(e){var t=e.item.value.business;n.ac_end.setInputValue(t)}),n.ac_end.addEventListener("onhighlight",function(e){var t=e.fromitem.value,a="";e.fromitem.index>-1&&(a=t.business),a="",e.toitem.index>-1&&(a=(t=e.toitem.value).business),n.ac_end.setInputValue(a)}),setTimeout(function(){n.ac_end.setInputValue(a.name),$("#"+n.endInput).data("latlon",a.lng+","+a.lat),$(".router-paner .r-end .clear-icon",n.domw).show()},200);var o=$("#map-block").height()-245+"px";$("#r-not-result").css({"max-height":o}),$(".router-paner .r-search-btn",e).on("click",function(){var e=a.Id,o=n.domw,s=$(".r-search-con .r-start input",o),r=$(".r-search-con .r-end input",o),l=s.val()||"",c=r.val()||"火车站",d=s.data("latlon")||0,p=r.data("latlon")||0;if(n.start_point="",n.end_point="",d){var u=d.split(",");n.start_point={lat:u[1],lng:u[0]}}if(p){var m=p.split(",");n.end_point={lat:m[1],lng:m[0]}}var f="r_"+e+"_result";if($(".r-ways-tab",o).hide(),$(".r-ways-tab li",o).removeClass("active"),t.switchRouter(1),l&&c){n.baiduMap.clearOverlays(),$(".router-paner .r-clear-btn",o).show(),t.processTabStyle&&t.processTabStyle();var h={start:l,end:c,ways:"bus",btnType:0,resultId:f,map:n.baiduMap,proId:e};n.start_point&&n.end_point?n.routerSearch(h):n.getSearchPoint(l,c,h,i)}else n.showSearchEerror()}),$(".router-paner .r-clear-btn",e).on("click",function(){n.clearRouterMark(),$("input",n.domw).val(""),$(".clear-icon",n.domw).hide(),t.switchRouter(2),t.resetMarderCon(),$(this).hide()}),$(".r-search-con input",e).on("change",function(){var e=$(this).val();t.isProcessDef=1,$(this).removeData("latlon"),e.length>0?$(this).siblings(".clear-icon").show():$(this).siblings(".clear-icon").hide()}),$(".r-search-con input",e).on("input",function(){$(".tangram-suggestion-main").css({visibility:"visible"}),t.isProcessDef=1,$(this).removeData("latlon"),$(this).val().length>0?$(this).siblings(".clear-icon").show():$(this).siblings(".clear-icon").hide()}),$(".router-paner .clear-icon",e).on("click",function(){$(this).siblings("input").val(""),$(this).hide()}),$(".r-map-result .r-ways-tab li",e).on("click",function(){var e=$(this).parent().data("hid"),t=$("#h_map_wrap_"+e),a=$(this).data("type"),i=$(".r-search-con .r-start input",t).val(),o=$(".r-search-con .r-end input",t).val(),s=$(".r-ways-tab",t);if($("li",s).removeClass("active"),$(this).addClass("active"),i&&o){var r={start:i,end:o,ways:a,resultId:"r_"+e+"_result",proId:e,map:n.baiduMap};n.routerSearch(r)}else n.showSearchEerror()}),$(".router-paner  .revert-icon",e).on("click",function(){var e=$(".r-search-con .r-start input",n.domw),t=$(".r-search-con .r-end input",n.domw),a=e.val(),i=t.val(),o=e.data("latlon")||0,s=t.data("latlon")||0;t.data("latlon",o),e.data("latlon",s),$(".r-search-con .r-start input",n.domw).val(i),$(".r-search-con .r-end input",n.domw).val(a),$(".tangram-suggestion-main").css({visibility:"hidden"})})},o.prototype.showSearchEerror=function(){$(".r-result-con",this.domw).css({"min-height":"100px"}),$(".r-result-con",this.domw).html('<div class="r-addressTip error-tip"><span>请选择准确的起点、途经点或终点</span></div>'),$(".r-ways-tab",this.domw).hide()},o.prototype.getSearchPoint=function(e,t,a,n){var i=this;i.loadingModule(1,$("#"+a.resultId)),i.searchStatus={start:0,end:0},i.searchResult={start:0,end:0};var o=new BMap.LocalSearch(i.defaultPoint,{map:i.baiduMap,onSearchComplete:function(r){if(o.getStatus()===BMAP_STATUS_SUCCESS&&r.getNumPois()){var l=r.getPoi(0);l.title.toLowerCase()===e.toLowerCase()?(i.start_point=l.point,i.searchStatus.start=-1):i.searchStatus.start=1,s.pageCapacity=5,s.search(t);for(var c=[],d=0;d<r.getCurrentNumPois();d++){var p=r.getPoi(d),u={title:p.title,point:p.point,address:p.address};c.push(u)}i.searchResult.start=c,n&&n.call(i,c,a,o,r,0)}else i.showSearchEerror()},pageCapacity:5}),s=new BMap.LocalSearch(i.defaultPoint,{map:i.baiduMap,onSearchComplete:function(e){if(s.getStatus()===BMAP_STATUS_SUCCESS&&e.getNumPois()){var o=e.getPoi(0),r=t.toLowerCase()||"",l=e.city.replace("市",""),c=o.title.toLowerCase()||"",d=r.replace(l,"");c.indexOf(d)>-1||r===c?(i.end_point=o.point,i.searchStatus.end=-2):i.searchStatus.end=2;for(var p=[],u=0;u<e.getCurrentNumPois();u++){var m=e.getPoi(u),f={title:m.title,point:m.point,address:m.address};p.push(f)}i.searchResult.end=p,n&&n.call(i,p,a,s,e,1)}else i.showSearchEerror()},pageCapacity:5});o.search(e)},o.prototype.addMarkerIcon=function(e,t,a,n){var i=this,o=[],s=[];i.baiduMap.clearOverlays(),e.map(function(e,r){var l=new BMap.Icon("//img1.40017.cn/cn/sl/dzs-hotel/list/map/markers_icon_new.png",new BMap.Size(23,26),{offset:new BMap.Size(10,26),imageOffset:new BMap.Size(0-23*r,-263)});o.push(e.point);var c=new BMap.Marker(e.point,{icon:l});s.push(c),i.baiduMap.addOverlay(c),i.addMarkerHandlder(c,e,r,t,a,n)}),i.markerArr=s,this.baiduMap.setViewport(o,{margins:[20,20,20,20]})},o.prototype.addMarkerHandlder=function(e,t,a,n,i,o){var s=this,r={title:t.title,enableMessage:!1},l=0===n?"设为起点":"设为终点",c=t.point.lng+","+t.point.lat,d="<div>地址："+t.address+'</div><div class="selinfoBtn"><a href="javascript:void(0);"  data-lnglat="'+c+'" data-title="'+t.title+'" data-type="'+n+'">'+l+"</a></div>";e.addEventListener("click",function(t){var a=t.target,n=(new BMap.Point(a.getPosition().lng,a.getPosition().lat),new BMap.InfoWindow(d,r));e.openInfoWindow(n)}),e.addEventListener("infowindowopen",function(){$(".selinfoBtn a").on("click",function(){s.setSearchTitle(this,o.con_obj,o)})}),e.addEventListener("mouseover",function(t){var n=new BMap.Icon("//img1.40017.cn/cn/sl/dzs-hotel/list/map/markers_icon_new.png",new BMap.Size(23,26),{offset:new BMap.Size(10,26),imageOffset:new BMap.Size(0-23*a,-230)});e.setZIndex(200),e.setIcon(n)}),e.addEventListener("mouseout",function(t){var n=new BMap.Icon("//img1.40017.cn/cn/sl/dzs-hotel/list/map/markers_icon_new.png",new BMap.Size(23,26),{offset:new BMap.Size(10,26),imageOffset:new BMap.Size(0-23*a,-263)});e.setZIndex(0),e.setIcon(n)})},o.prototype.setSearchTitle=function(e,t,a){var n=$(e).data("lnglat"),i=$(e).data("title"),o=$(e).data("type"),s=$(".r-result"+o,a.con_obj),r=0===o?1:0;if(n){var l=n.split(","),c={lng:l[0],lat:l[1]};if(0===o?(this.start_point=c,a.start=i):(this.end_point=c,a.end=i),$(".r-title span",s).html(i),$(".r-title",s).removeClass("up-icon").addClass("down-icon"),s.addClass("r-addr-yes"),$(".r-addr-list",s).hide(),2===$(".r-addr-yes",t).length)this.routerSearch(a);else{$(".r-result"+r+" .r-addr-list",t).removeClass("none");var d=$(".r-result"+r,t),p=0===r?this.searchResult.start:this.searchResult.end;$(".r-title",d).removeClass("down-icon").addClass("up-icon"),this.addMarkerIcon(p,r,d,a)}}},o.prototype.routerSearch=function(e){if(e){var t=e.start,a=e.end;if(this.ac_start.setInputValue(e.start),this.ac_end.setInputValue(e.end),$("#"+e.resultId).removeClass("r-result-erro"),this.start_point)t=new BMap.Point(this.start_point.lng,this.start_point.lat);if(this.end_point)a=new BMap.Point(this.end_point.lng,this.end_point.lat);var i={title:e.start,point:t},o={title:e.end,point:a};this.renderPolyLine(e,i,o,n)}},o.prototype.renderPolyLine=function(e,t,a,n){var i=this;i.clearRouterMark();var o=$("#h_map_wrap_"+e.proId),r=(e.proId,$(".r-ways-tab",o)),l=$("#"+e.resultId);if(i.loadingModule(1,l),"bus"===e.ways){var c=new BMap.TransitRoute(e.map,{renderOptions:{map:e.map,panel:e.resultId},onSearchComplete:function(t){c.getStatus()===BMAP_STATUS_SUCCESS?(s(e.ways,r),t.getNumPlans()||l.html('<div class="not-have-r"></div>')):(s(e.ways,r),l.html('<div class="not-have-r"></div>'))},onMarkersSet:function(t,a){i.customerLinePoi(t,a,e)},onResultsHtmlSet:function(){$("h1",l).remove(),$("a",l).parent().remove(),$(".tranroute-plan-list",l).removeAttr("onclick"),$(".tranroute-plan-list",l).each(function(e,t){$(this).attr("data-index",e),$(".trans-title",this).on("click",function(t){c._selectPlan(e)})})}});c.setInfoHtmlSetCallback(function(e,t){;""}),c.search(t.point,a.point),i.transit=c}else if("car"===e.ways){var d=new BMap.DrivingRoute(i.baiduMap,{renderOptions:{map:e.map},onSearchComplete:function(o){if(d.getStatus()===BMAP_STATUS_SUCCESS){var s=o.getPlan(0),r=(o.getStart().title,o.getEnd().title,s.getDistance(!1));r=r>1e3?(r/1e3).toFixed(1)+"km":r+"m";var l=Math.ceil(s.getDuration(!1)/60),c=Math.floor(l/60),p=Math.floor(l%60),u=Math.floor(l/60)<=0?"":Math.floor(l/60)+"小时",m=Math.floor(l%60)<=0?"":Math.floor(l%60)+"分钟";if(c>0||p>0)var f="，约"+u+m;else f="";for(var h=[],v=0;v<s.getNumRoutes();v++)for(var g=s.getRoute(v),y=0;y<g.getNumSteps();y++){var _=g.getStep(y);h.push(_.getDescription(!1))}n&&n.call(i,{s:h,start:t.title,end:a.title,allDistance:r,allDuration:f,type:"car"},e)}else n&&n.call(i,{error:!0,type:"car"},e)},onMarkersSet:function(t,a){i.customerLinePoi(t,a,e)}});d.search(t.point,a.point),i.driving=d}else if("foot"===e.ways){var p=new BMap.WalkingRoute(i.baiduMap,{renderOptions:{map:e.map},onSearchComplete:function(o){if(p.getStatus()===BMAP_STATUS_SUCCESS){var s=o.getPlan(0),r=(o.getStart().title,o.getEnd().title,s.getDistance(!1));r=r>1e3?(r/1e3).toFixed(1)+"km":r+"m";var l=Math.ceil(s.getDuration(!1)/60),c=Math.floor(l/60),d=Math.floor(l%60),u=Math.floor(l/60)<=0?"":Math.floor(l/60)+"小时",m=Math.floor(l%60)<=0?"":Math.floor(l%60)+"分钟";if(c>0||d>0)var f="，约"+u+m;else f="";for(var h=[],v=0;v<s.getNumRoutes();v++)for(var g=s.getRoute(v),y=0;y<g.getNumSteps();y++){var _=g.getStep(y);h.push(_.getDescription(!1))}n&&n.call(i,{s:h,start:t.title,end:a.title,allDistance:r,allDuration:f,type:"foot"},e)}else n&&n.call(i,{error:!0,type:"foot"},e)},onMarkersSet:function(t,a){i.customerLinePoi(t,a,e)}});p.search(t.point,a.point),i.walking=p}},o.prototype.customerLinePoi=function(e,t,a){var n=this;if(e&&e.length){e[0],e[1];var i=[];e.map(function(e,t){n.baiduMap.removeOverlay(e.marker);var o=0===t?"起":"终",s=0===t?a.start:a.end,r={Lat:e.point.lat,Lng:e.point.lng,title:s,type:o};i.push(r)})}n.addRouterLineMarkers(i),t&&t.length&&t.map(function(e){n.baiduMap.removeOverlay(e.marker)})},o.prototype.addRouterLineMarkers=function(e){var t=this;e&&e.length&&e.map(function(e,a){var n=[],i={param:e,lat:e.Lat,lng:e.Lng};n.push(i);var o={point:n,content:0===a?$("#template_router_start_marker").html():$("#template_router_end_marker").html(),contentOffset:[-15,-35]};t.addCustomMarker(o)})},o.prototype.addCustomMarker=function(e,t){var a=doT.template(e.content);e.contentOffset||(e.contentOffset=[0,0]);var n=new BMap.Size(e.contentOffset[0],e.contentOffset[1]),i=[],o=[];e.isclear&&this.clearAllOverlay();var s=this;e.point.forEach(function(r){var l=a(r.param),c=new BMap.Point(r.lng,r.lat),d=new BMapLib.RichMarker(l,c,{anchor:n});if(d.hrefid=r.param.Id,s.baiduMap.addOverlay(d),o.push(d),i.push(c),e.infoWindow){var p=doT.template(e.infoWindow);s.infoWindowFn=p}t&&t(d,e,r)}),e.isAutoView&&this.baiduMap.setViewport(i,{margins:[20,20,20,20]})},o.prototype.clearRouterMark=function(){this.driving&&this.driving.clearResults(),this.transit&&this.transit.clearResults(),this.walking&&this.walking.clearResults(),this.baiduMap.clearOverlays()},o.prototype.clearBusRoutetMarker=function(e,t){var a=this.baiduMap;e&&e.length&&e.forEach(function(e,n){1===t?a.removeOverlay(e.marker):a.removeOverlay(e.getPolyline())})},o.prototype.loadingModule=function(e,t){t.html(""),e?(t.find(".not-have-r").remove(),t.append('<div class="map-loading-box"><span>正在加载中</span></div>')):t.find(".map-loading-box").remove()},t.FindRouter=o},function(e,t,a){"use strict";t.__esModule=!0,t.browseHistory=undefined;var n=s(a(15)),i=s(a(131)),o=s(a(136));function s(e){return e&&e.__esModule?e:{"default":e}}var r={maxHistories:5,init:function(){var e=[],t=$(".bread-hotel").text(),a=$("#hightlight .top .address a.landmark").html()||"暂无商圈",s=$("#slider .mSlider_con .slider_ul li img").attr("data-url");if(void 0===s&&(s=""),t&&t.length){var r=localStorage.getItem("seenHotelMark");null!=r&&(e=JSON.parse(r));var l={hotelId:settings.hotelid,hotelName:t,landMark:a,imgUrl:s};e.unshift(l),e=(0,o["default"])(e,"hotelId"),(0,i["default"])(e)>5&&e.pop(),localStorage.setItem("seenHotelMark",(0,n["default"])(e))}}};t.browseHistory=r},function(e,t,a){var n=a(59),i=a(13),o=a(40);e.exports=function(e){var t=e?n(e):0;return i(t)?t:o(e).length}},function(e,t,a){var n=a(61),i=a(62),o=a(12),s=/^\[object .+?Constructor\]$/,r=Object.prototype,l=Function.prototype.toString,c=r.hasOwnProperty,d=RegExp("^"+l.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return null!=e&&(n(e)?d.test(l.call(e)):o(e)&&(i(e)?d:s).test(e))}},function(e,t,a){var n=a(63),i=a(14),o=a(42),s=a(13),r=a(38),l=a(134),c=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=l(e),a=t.length,d=a&&e.length,p=!!d&&s(d)&&(i(e)||n(e)||r(e)),u=-1,m=[];++u<a;){var f=t[u];(p&&o(f,d)||c.call(e,f))&&m.push(f)}return m}},function(e,t,a){var n=a(135),i=a(63),o=a(14),s=a(61),r=a(42),l=a(13),c=a(0),d=a(38),p=a(39),u="[object Error]",m="[object Object]",f="[object String]",h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],v=Error.prototype,g=Object.prototype,y=String.prototype,_=g.hasOwnProperty,b=g.toString,$={};$["[object Array]"]=$["[object Date]"]=$["[object Number]"]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$["[object Boolean]"]=$[f]={constructor:!0,toString:!0,valueOf:!0},$[u]=$["[object Function]"]=$["[object RegExp]"]={constructor:!0,toString:!0},$[m]={constructor:!0},n(h,function(e){for(var t in $)if(_.call($,t)){var a=$[t];a[e]=_.call(a,e)}}),e.exports=function(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&l(t)&&(o(e)||i(e)||d(e))&&t||0;for(var a=e.constructor,n=-1,w=s(a)&&a.prototype||g,C=w===e,T=Array(t),k=t>0,D=p.enumErrorProps&&(e===v||e instanceof Error),S=p.enumPrototypes&&s(e);++n<t;)T[n]=n+"";for(var I in e)S&&"prototype"==I||D&&("message"==I||"name"==I)||k&&r(I,t)||"constructor"==I&&(C||!_.call(e,I))||T.push(I);if(p.nonEnumShadows&&e!==g){var P=e===y?f:e===v?u:b.call(e),x=$[P]||$[m];for(P==m&&(w=g),t=h.length;t--;){var O=x[I=h[t]];C&&O||(O?!_.call(e,I):e[I]===w[I])||T.push(I)}}return T}},function(e,t){e.exports=function(e,t){for(var a=-1,n=e.length;++a<n&&!1!==t(e[a],a,e););return e}},function(e,t,a){var n=a(137),i=a(155),o=a(162),s=a(163);e.exports=function(e,t,a,r){return e&&e.length?(null!=t&&"boolean"!=typeof t&&(a=o(e,t,r=a)?undefined:t,t=!1),a=null==a?a:n(a,r,3),t?s(e,a):i(e,a)):[]}},function(e,t,a){var n=a(138),i=a(148),o=a(152),s=a(69),r=a(153);e.exports=function(e,t,a){var l=typeof e;return"function"==l?t===undefined?e:o(e,t,a):null==e?s:"object"==l?n(e):t===undefined?r(e):i(e,t)}},function(e,t,a){var n=a(139),i=a(146),o=a(7);e.exports=function(e){var t=i(e);if(1==t.length&&t[0][2]){var a=t[0][0],s=t[0][1];return function(e){return null!=e&&(e=o(e))[a]===s&&(s!==undefined||a in e)}}return function(e){return n(e,t)}}},function(e,t,a){var n=a(64),i=a(7);e.exports=function(e,t,a){var o=t.length,s=o,r=!a;if(null==e)return!s;for(e=i(e);o--;){var l=t[o];if(r&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<s;){var c=(l=t[o])[0],d=e[c],p=l[1];if(r&&l[2]){if(d===undefined&&!(c in e))return!1}else{var u=a?a(d,p,c):undefined;if(!(u===undefined?n(p,d,a,!0):u))return!1}}return!0}},function(e,t,a){var n=a(141),i=a(143),o=a(144),s=a(14),r=a(62),l=a(145),c="[object Arguments]",d="[object Array]",p="[object Object]",u=Object.prototype,m=u.hasOwnProperty,f=u.toString;e.exports=function(e,t,a,u,h,v,g){var y=s(e),_=s(t),b=d,$=d;y||((b=f.call(e))==c?b=p:b!=p&&(y=l(e))),_||(($=f.call(t))==c?$=p:$!=p&&(_=l(t)));var w=b==p&&!r(e),C=$==p&&!r(t),T=b==$;if(T&&!y&&!w)return i(e,t,b);if(!h){var k=w&&m.call(e,"__wrapped__"),D=C&&m.call(t,"__wrapped__");if(k||D)return a(k?e.value():e,D?t.value():t,u,h,v,g)}if(!T)return!1;v||(v=[]),g||(g=[]);for(var S=v.length;S--;)if(v[S]==e)return g[S]==t;v.push(e),g.push(t);var I=(y?n:o)(e,t,a,u,h,v,g);return v.pop(),g.pop(),I}},function(e,t,a){var n=a(142);e.exports=function(e,t,a,i,o,s,r){var l=-1,c=e.length,d=t.length;if(c!=d&&!(o&&d>c))return!1;for(;++l<c;){var p=e[l],u=t[l],m=i?i(o?u:p,o?p:u,l):undefined;if(m!==undefined){if(m)continue;return!1}if(o){if(!n(t,function(e){return p===e||a(p,e,i,o,s,r)}))return!1}else if(p!==u&&!a(p,u,i,o,s,r))return!1}return!0}},function(e,t){e.exports=function(e,t){for(var a=-1,n=e.length;++a<n;)if(t(e[a],a,e))return!0;return!1}},function(e,t){var a="[object Boolean]",n="[object Date]",i="[object Error]",o="[object Number]",s="[object RegExp]",r="[object String]";e.exports=function(e,t,l){switch(l){case a:case n:return+e==+t;case i:return e.name==t.name&&e.message==t.message;case o:return e!=+e?t!=+t:e==+t;case s:case r:return e==t+""}return!1}},function(e,t,a){var n=a(40),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,a,o,s,r,l){var c=n(e),d=c.length;if(d!=n(t).length&&!s)return!1;for(var p=d;p--;){var u=c[p];if(!(s?u in t:i.call(t,u)))return!1}for(var m=s;++p<d;){var f=e[u=c[p]],h=t[u],v=o?o(s?h:f,s?f:h,u):undefined;if(!(v===undefined?a(f,h,o,s,r,l):v))return!1;m||(m="constructor"==u)}if(!m){var g=e.constructor,y=t.constructor;if(g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}},function(e,t,a){var n=a(13),i=a(12),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var s=Object.prototype.toString;e.exports=function(e){return i(e)&&n(e.length)&&!!o[s.call(e)]}},function(e,t,a){var n=a(65),i=a(147);e.exports=function(e){for(var t=i(e),a=t.length;a--;)t[a][2]=n(t[a][1]);return t}},function(e,t,a){var n=a(40),i=a(7);e.exports=function(e){e=i(e);for(var t=-1,a=n(e),o=a.length,s=Array(o);++t<o;){var r=a[t];s[t]=[r,e[r]]}return s}},function(e,t,a){var n=a(66),i=a(64),o=a(149),s=a(14),r=a(67),l=a(65),c=a(150),d=a(7),p=a(68);e.exports=function(e,t){var a=s(e),u=r(e)&&l(t),m=e+"";return e=p(e),function(s){if(null==s)return!1;var r=m;if(s=d(s),(a||!u)&&!(r in s)){if(null==(s=1==e.length?s:n(s,o(e,0,-1))))return!1;r=c(e),s=d(s)}return s[r]===t?t!==undefined||r in s:i(t,s[r],undefined,!0)}}},function(e,t){e.exports=function(e,t,a){var n=-1,i=e.length;(t=null==t?0:+t||0)<0&&(t=-t>i?0:i+t),(a=a===undefined||a>i?i:+a||0)<0&&(a+=i),i=t>a?0:a-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}},function(e,t){e.exports=function(e){var t=e?e.length:0;return t?e[t-1]:undefined}},function(e,t){e.exports=function(e){return null==e?"":e+""}},function(e,t,a){var n=a(69);e.exports=function(e,t,a){if("function"!=typeof e)return n;if(t===undefined)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 3:return function(a,n,i){return e.call(t,a,n,i)};case 4:return function(a,n,i,o){return e.call(t,a,n,i,o)};case 5:return function(a,n,i,o,s){return e.call(t,a,n,i,o,s)}}return function(){return e.apply(t,arguments)}}},function(e,t,a){var n=a(60),i=a(154),o=a(67);e.exports=function(e){return o(e)?n(e):i(e)}},function(e,t,a){var n=a(66),i=a(68);e.exports=function(e){var t=e+"";return e=i(e),function(a){return n(a,e,t)}}},function(e,t,a){var n=a(156),i=a(158),o=a(159),s=200;e.exports=function(e,t){var a=-1,r=n,l=e.length,c=!0,d=c&&l>=s,p=d?o():null,u=[];p?(r=i,c=!1):(d=!1,p=t?[]:u);e:for(;++a<l;){var m=e[a],f=t?t(m,a,e):m;if(c&&m==m){for(var h=p.length;h--;)if(p[h]===f)continue e;t&&p.push(f),u.push(m)}else r(p,f,0)<0&&((t||d)&&p.push(f),u.push(m))}return u}},function(e,t,a){var n=a(157);e.exports=function(e,t,a){if(t!=t)return n(e,a);for(var i=a-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}},function(e,t){e.exports=function(e,t,a){for(var n=e.length,i=t+(a?0:-1);a?i--:++i<n;){var o=e[i];if(o!=o)return i}return-1}},function(e,t,a){var n=a(0);e.exports=function(e,t){var a=e.data;return("string"==typeof t||n(t)?a.set.has(t):a.hash[t])?0:-1}},function(e,t,a){(function(t){var n=a(160),i=a(22),o=i(t,"Set"),s=i(Object,"create");e.exports=function(e){return s&&o?new n(e):null}}).call(t,a(70))},function(e,t,a){(function(t){var n=a(161),i=a(22),o=i(t,"Set"),s=i(Object,"create");function r(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new o};t--;)this.push(e[t])}r.prototype.push=n,e.exports=r}).call(t,a(70))},function(e,t,a){var n=a(0);e.exports=function(e){var t=this.data;"string"==typeof e||n(e)?t.set.add(e):t.hash[e]=!0}},function(e,t,a){var n=a(41),i=a(42),o=a(0);e.exports=function(e,t,a){if(!o(a))return!1;var s=typeof t;if("number"==s?n(a)&&i(t,a.length):"string"==s&&t in a){var r=a[t];return e==e?e===r:r!=r}return!1}},function(e,t){e.exports=function(e,t){for(var a,n=-1,i=e.length,o=-1,s=[];++n<i;){var r=e[n],l=t?t(r,n,e):r;n&&a===l||(a=l,s[++o]=r)}return s}}]);